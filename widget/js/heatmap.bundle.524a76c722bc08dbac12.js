(self.webpackChunkn4rWidget=self.webpackChunkn4rWidget||[]).push([[534],{3052:function(t,e,n){"use strict";var a=n(491),s=n(4053),o=n(2138),i=n(2358),r=a.v.UNSUB_GRACE_PERIOD;e.Z={data:function(){return{activated:!1,timerId:void 0}},activated:function(){this.activated=!0,(0,i.Z)(o.s.Debug,this.subject+" activated")},deactivated:function(){this.activated=!1,(0,i.Z)(o.s.Debug,this.subject+" deactivated")},computed:{isActive:function(){return s.Z.openedFrameConfig&&this.activated}},watch:{isActive:function(t,e){var n=this;t?this.timerId?(clearTimeout(this.timerId),this.timerId=void 0,(0,i.Z)(o.s.Debug,this.subject+" greace unset")):this.subscribe():(this.timerId=setTimeout((function(){(0,i.Z)(o.s.Debug,n.subject+" greace expired"),n.timerId=void 0,n.unsubscribe().then(n.resetState)}),r),(0,i.Z)(o.s.Debug,"".concat(this.subject," ").concat(r,"ms greace set")))}}}},586:function(){},2441:function(){},6851:function(){},2725:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return w}});var a=n(491),s=n(896),o=n(4053),i=n(3052),r=n(4780),c=n(1795);function u(t){var e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(n,a){return(n[t]<a[t]?-1:n[t]>a[t]?1:0)*e}}var l=n(7157),d={ad:"Andorra",ai:"Anguilla",aq:"Antarctica",as:"American Samoa",aw:"Aruba",ax:"Åland Islands",bh:"Bahrain",bl:"Saint Barthélemy",bm:"Bermuda",bq:"Bonaire, Sint Eustatius and Saba",bv:"Bouvet Island",cc:"Cocos (Keeling) Islands",ck:"Cook Islands",cw:"Curaçao",cx:"Christmas Island",eh:"Western Sahara",fm:"Micronesia, Federated States of",fo:"Faroe Islands",gg:"Guernsey",gi:"Gibraltar",gp:"Guadeloupe",gs:"South Georgia and the South Sandwich Islands",gu:"Guam",hk:"Hong Kong",hm:"Heard Island and McDonald Islands",im:"Isle of Man",io:"British Indian Ocean Territory",je:"Jersey",ki:"Kiribati",ky:"Cayman Islands",li:"Liechtenstein",lu:"Luxembourg",mc:"Monaco",me:"Montenegro",mf:"Saint Martin (French part)",mh:"Marshall Islands",mo:"Macao",mp:"Northern Mariana Islands",mq:"Martinique",ms:"Montserrat",nf:"Norfolk Island",nr:"Nauru",nu:"Niue",pm:"Saint Pierre and Miquelon",pn:"Pitcairn",pr:"Puerto Rico",ps:"Palestine, State of",pw:"Palau",sg:"Singapore",sh:"Saint Helena, Ascension and Tristan da Cunha",sj:"Svalbard and Jan Mayen",sm:"San Marino",ss:"South Sudan",sx:"Sint Maarten (Dutch part)",tc:"Turks and Caicos Islands",tf:"French Southern Territories",tk:"Tokelau",to:"Tonga",tv:"Tuvalu",um:"United States Minor Outlying Islands",va:"Holy See",vc:"Saint Vincent and the Grenadines",vg:"Virgin Islands, British",vi:"Virgin Islands, U.S.",wf:"Wallis and Futuna",ws:"Samoa",xk:"Kosovo",yt:"Mayotte",zz:"Unknown"},h={name:"heatmap-legend",props:["countriesMap","countriesData"],mixins:[r.Z],data:function(){return{map:this.countriesMap,data:this.countriesData}},methods:{retrieveCountry:function(t){return this.data[t]||d[t]},toHSLColor:function(t){return(0,c.J7)(t)}},computed:{countriesArray:function(){var t=this;return Object.keys(this.map).map((function(e){return{countryCode:e,country:t.retrieveCountry(e),intensity:t.map[e]}}))},orderedCountriesArray:function(){return this.countriesArray.sort(function(){var t=arguments;return function(e,n){for(var a=t.length,s=0,o=0;0===o&&s<a;)o=u(t[s])(e,n),s++;return o}}("-intensity","country"))},populatedCountries:function(){return this.orderedCountriesArray.length>0}},components:{Spinner:l.Z}},p=h,m=(n(3404),n(1900)),v=(0,m.Z)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"smooth-scroll",attrs:{id:"heatmap-legend-wrapper"}},[t.connected&&t.populatedCountries?e("table",{key:"leg",staticClass:"legend-table"},t._l(t.orderedCountriesArray,(function(n){return e("tr",{key:n.countryCode,staticClass:"legend-row"},[e("td",{staticClass:"legend-row-data"},[e("span",{staticClass:"intensity-label-wrapper"},[e("span",{staticClass:"intensity-label",style:{backgroundColor:t.toHSLColor(n.intensity),width:100*n.intensity+"%"}})]),t._v(" "),e("span",{staticClass:"country-name"},[t._v(t._s(n.country))])])])})),0):t.connected?e("table",{key:"loleg",staticClass:"legend-table"},[e("tr",{staticClass:"legend-row"},[e("td",{staticClass:"legend-row-data"},[e("spinner")],1)])]):e("table",{key:"noleg",staticClass:"legend-table"},[e("tr",{staticClass:"legend-row"},[e("td",{staticClass:"legend-row-data legend-empty"},[t._v("\n                "+t._s(t.$lang.data.k55)+"\n            ")])])])])}),[],!1,null,null,null).exports,b=n(4962),g=n(2138),f=n(2358),C=n(5825),S=n.n(C),_=(n(4043),"#e7e7e7"),E={name:"heatmap",mixins:[i.Z,r.Z],data:function(){var t=a.v.SCOPE===s.Z.SITE;return{singleContext:t,subject:t&&a.v.SITE_COUNTER_VIEW||!t&&a.v.SITE_COUNTER_VIEW&&!a.v.PAGE_COUNTER_VIEW?now4real.Subject.HEATMAP_SITE_VIEWERS:now4real.Subject.HEATMAP_PAGE_VIEWERS,pageHeatmapForegroundSubject:now4real.Subject.HEATMAP_PAGE_VIEWERS,siteHeatmapForegroundSubject:now4real.Subject.HEATMAP_SITE_VIEWERS,store:o.Z,map:{},data:{},vmap:void 0,showSwitch:void 0}},created:function(){this.showSwitch=a.v.PAGE_COUNTER_VIEW&&a.v.SITE_COUNTER_VIEW},methods:{handleMobileConf:function(t,e){t||e?S()(".jqvmap-zoomin, .jqvmap-zoomout").hide():S()(".jqvmap-zoomin, .jqvmap-zoomout").show()},subscribe:function(t){var e=this,n=t||this.subject;return now4real.subscribe(n,(function(t){var n=t.data.country.toLowerCase(),a=t.data.intensity;null!==a&&0!==a?e.$set(e.map,n,a):e.$delete(e.map,n);var s=null!==a&&0!==a?(0,c.J7)(a):_,o={};o[n]=s,e.vmap.vectorMap("set","colors",o),(0,f.Z)(g.s.Debug,"map color update",n,a,s,o)}))},unsubscribe:function(t){var e=t||this.subject;return now4real.unsubscribe(e)},resetState:function(){var t=this;(0,f.Z)(g.s.Debug,"".concat(this.subject," reset state call")),Object.keys(this.map).forEach((function(e,n){(0,f.Z)(g.s.Debug,"deleting ",e),t.$delete(t.map,e);var a={};a[e]=_,t.vmap.vectorMap("set","colors",a)}))}},mounted:function(){var t=this;(0,f.Z)(g.s.Debug,"Jqvmap mounted"),this.vmap=S()("#jqvmap");var e=S()("#jqvmap").vectorMap({map:"world_en",backgroundColor:"#fff",borderColor:"#3c515d",borderOpacity:.5,borderWidth:1,color:_,enableZoom:!1,selectedRegions:null,showTooltip:!0,onRegionClick:function(t,e,n){t.preventDefault()},onLabelShow:function(e,n,a){void 0===t.map[a]?e.preventDefault():n.text(n[0].innerText)},onRegionOver:function(t,e){t.preventDefault()}}).mapData.paths;for(var n in e)this.data[n]=e[n].name;this.data.cd="Democratic Republic of the Congo",this.handleMobileConf(this.store.isMobile,this.store.isTablet)},destroyed:function(){S()(".jqvmap-label").remove()},watch:{"store.isMobile":function(t){this.handleMobileConf(t)},connected:function(t){var e=this,n=Object.keys(this.map);n.length>0&&(t?n.forEach((function(t,n){(0,f.Z)(g.s.Debug,"".concat(t," restored"));var a={};a[t]=(0,c.J7)(e.map[t]),e.vmap.vectorMap("set","colors",a)})):n.forEach((function(t,n){(0,f.Z)(g.s.Debug,"".concat(t," resetted"));var a={};a[t]=_,e.vmap.vectorMap("set","colors",a)})))},subject:function(t,e){var n=this;this.unsubscribe(e).then((function(){n.resetState(),n.subscribe(t).then((function(){(0,f.Z)(g.s.Debug,"changed from ".concat(e," to ").concat(t))})).catch((function(t){return(0,f.Z)(g.s.Error,t.message)}))})).catch((function(t){return(0,f.Z)(g.s.Error,t.message)}))}},computed:{landscaped:function(){return this.store.isLandscape},context:function(){return this.subject===this.pageHeatmapForegroundSubject?s.Z.PAGE:this.subject===this.siteHeatmapForegroundSubject?s.Z.SITE:void 0},pageSwitchLabelStyle:function(){var t=this.subject===this.pageHeatmapForegroundSubject;return{borderTop:"1px solid ".concat(a.v.COLOR_A),backgroundColor:t?a.v.COLOR_A:a.v.COLOR_B,color:t?a.v.COLOR_B:a.v.COLOR_A}},siteSwitchLabelStyle:function(){var t=this.subject===this.siteHeatmapForegroundSubject;return{borderTop:"1px solid ".concat(a.v.COLOR_A),backgroundColor:t?a.v.COLOR_A:a.v.COLOR_B,color:t?a.v.COLOR_B:a.v.COLOR_A}}},components:{HeatmapLegend:v,Presence:b.Z}},w=(n(773),(0,m.Z)(E,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"heatmap-container"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.landscaped,expression:"!landscaped"}],attrs:{id:"jqvmap"}}),t._v(" "),e("presence",{directives:[{name:"show",rawName:"v-show",value:t.connected,expression:"connected"}],attrs:{context:t.context,hideTotal:""}}),t._v(" "),e("heatmap-legend",{attrs:{"countries-map":t.map,"countries-data":t.data}}),t._v(" "),t.showSwitch?e("div",{attrs:{id:"heatmap-switch"}},[e("ul",{staticClass:"segmented-control",class:{"segmented-control-disabled":!t.connected}},[e("li",{staticClass:"segmented-control-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],staticClass:"segmented-control-input",attrs:{type:"radio",id:"option-1"},domProps:{value:t.pageHeatmapForegroundSubject,checked:t._q(t.subject,t.pageHeatmapForegroundSubject)},on:{change:function(e){t.subject=t.pageHeatmapForegroundSubject}}}),t._v(" "),e("label",{staticClass:"segmented-control-label",style:t.pageSwitchLabelStyle,attrs:{for:"option-1"}},[t._v(t._s(t.$lang.data.k53))])]),t._v(" "),e("li",{staticClass:"segmented-control-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],staticClass:"segmented-control-input",attrs:{type:"radio",id:"option-2"},domProps:{value:t.siteHeatmapForegroundSubject,checked:t._q(t.subject,t.siteHeatmapForegroundSubject)},on:{change:function(e){t.subject=t.siteHeatmapForegroundSubject}}}),t._v(" "),e("label",{staticClass:"segmented-control-label",style:t.siteSwitchLabelStyle,attrs:{for:"option-2"}},[t._v(t._s(t.$lang.data.k54))])])])]):t._e()],1)}),[],!1,null,null,null).exports)},4962:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var a=n(896),s=n(4053),o=n(491),i=n(2138),r=n(2358);function c(t){return t||"-"}var u={name:"presence",props:{context:{type:String,default:a.Z.PAGE},hideTotal:{type:Boolean,default:!1}},data:function(){return{store:s.Z,pageCounter:void 0,siteCounter:void 0}},created:function(){(0,r.Z)(i.s.Debug,"created"),this.handleCounters()},computed:{summary:function(){return this.showTotal?"1"===this.pageCounter?this.$lang.complete("k92",{$N:c(this.siteCounter)}):this.$lang.complete("k93",{$N:c(this.pageCounter),$M:c(this.siteCounter)}):this.context===a.Z.PAGE?"1"===this.pageCounter?this.$lang.data.k94:this.$lang.complete("k95",{$N:c(this.pageCounter)}):"1"===this.siteCounter?this.$lang.data.k96:this.$lang.complete("k97",{$N:c(this.siteCounter)})},show:function(){return!(this.context===a.Z.PAGE&&!o.v.PAGE_COUNTER_VIEW||this.context===a.Z.SITE&&!o.v.SITE_COUNTER_VIEW)},showTotal:function(){return this.show&&!this.hideTotal&&this.context===a.Z.PAGE&&o.v.SITE_COUNTER_VIEW}},watch:{context:function(t){(0,r.Z)(i.s.Debug,"newContext ->",t),this.handleCounters()}},methods:{handleCounters:function(){var t=this;if(this.show){var e=now4real.Subject.COUNTER_PAGE_VIEWERS,n=now4real.Subject.COUNTER_SITE_VIEWERS;this.context===a.Z.PAGE&&void 0===this.pageCounter&&((0,r.Z)(i.s.Debug,"init page counter"),void 0!==this.store[e]?(this.pageCounter=null,this.$watch("store.".concat(e),(function(e){t.pageCounter=e}),{immediate:!0})):(this.store[e]=null,now4real.subscribe(e,(function(n){t.store[e]=n.data.value,t.pageCounter=n.data.value})))),(this.context===a.Z.SITE||this.showTotal)&&void 0===this.siteCounter&&((0,r.Z)(i.s.Debug,"init site counter"),void 0!==this.store[n]?(this.siteCounter=null,this.$watch("store.".concat(n),(function(e){t.siteCounter=e}),{immediate:!0})):(this.store[n]=null,now4real.subscribe(n,(function(e){t.store[n]=e.data.value,t.siteCounter=e.data.value}))))}}}},l=(n(2059),(0,n(1900).Z)(u,(function(){var t=this,e=t._self._c;return t.show?e("div",{attrs:{id:"presence-container"}},[e("div",{staticClass:"presence-summary"},[t._v("\n        "+t._s(t.summary)+"\n    ")])]):t._e()}),[],!1,null,null,null).exports)},3404:function(t,e,n){var a=n(586);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5346).Z)("37385e00",a,!0,{})},773:function(t,e,n){var a=n(2441);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5346).Z)("2a82cac4",a,!0,{})},2059:function(t,e,n){var a=n(6851);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5346).Z)("2d65ca4c",a,!0,{})}}]);