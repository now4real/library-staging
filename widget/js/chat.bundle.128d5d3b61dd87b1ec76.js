(self.webpackChunkn4rWidget=self.webpackChunkn4rWidget||[]).push([[348],{3052:function(e,t,s){"use strict";var i=s(491),n=s(4053),o=s(2138),a=s(2358);const r=i.v.UNSUB_GRACE_PERIOD;t.Z={data(){return{activated:!1,timerId:void 0}},activated(){this.activated=!0,(0,a.Z)(o.s.Debug,this.subject+" activated")},deactivated(){this.activated=!1,(0,a.Z)(o.s.Debug,this.subject+" deactivated")},computed:{isActive(){return n.Z.openedFrameConfig&&this.activated}},watch:{isActive(e,t){e?this.timerId?(clearTimeout(this.timerId),this.timerId=void 0,(0,a.Z)(o.s.Debug,this.subject+" greace unset")):this.subscribe():(this.timerId=setTimeout((()=>{(0,a.Z)(o.s.Debug,this.subject+" greace expired"),this.timerId=void 0,this.unsubscribe().then(this.resetState)}),r),(0,a.Z)(o.s.Debug,`${this.subject} ${r}ms greace set`))}}}},2120:function(e,t,s){"use strict";function i(e){let t=document.createElement("a");return t.href=e,t}s.d(t,{e:function(){return i}})},7005:function(){},84:function(){},5200:function(){},1005:function(){},5338:function(){},5254:function(){},3042:function(){},3025:function(){},3282:function(){},5068:function(){},2615:function(){},6904:function(){},7529:function(){},6758:function(){},4087:function(){},8592:function(){},9531:function(){},4794:function(){},5903:function(){},5354:function(){},6851:function(){},2342:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ut}});var i=s(4053),n=s(1651),o=s(672),a=s(491),r=s(896),l=s(8178),c=s(8082),d=s(2120),h=s(5715),u=s(1795);function g(e){return JSON.parse(JSON.stringify(e))}var p=s(4780),m=s(7536),v=s(5378),f={computed:{authenticated(){return"AUTHENTICATED"===i.Z.LOGIN_STATUS.status},authenticatedUser(){return this.authenticated?i.Z.LOGIN_STATUS.user:null}}},b=s(7638),_=s(4289),C=s(2138),k=s(2358),w={props:{maxLines:{type:Number,default:5},maxLength:{type:Number,default:140}},mixins:[p.Z,f],data(){return{lines:1,chars:0,message:"",disabled:!1,enterDisabled:!1,lineHeight:null,maxHeight:84}},computed:{inputAreaStyle(){return{color:a.v.COLOR_B,backgroundColor:a.v.COLOR_A,caretColor:a.v.COLOR_B}}},mounted(){const e=window.getComputedStyle(this.$el,null),t=parseFloat(e.getPropertyValue("line-height"),10);this.lineHeight=t,this.maxHeight=10+this.maxLines*t},methods:{focus(){this.$el.focus()},disable(){this.disabled=!0},enable(){this.disabled=!1},disableEnter(){this.enterDisabled=!0},enableEnter(){this.enterDisabled=!1},clear(){this.$el.value="",this._handleHeightChange(),this._updateState(),this.$emit("input",this.message,this.lines,this.chars)},placeCaretAtEnd(){const e=this.$el,t=e.value;e.selectionStart=e.selectionEnd=t.length},insertText(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.disabled)return;if(!(""!==this._getSelectedText())&&!t){const t=(0,l.u$)(e),s=this._getSelectedText(),i=(0,l.u$)(s);if(this.chars-i+t>this.maxLength)return}this._insertTextAtCursor(e),this._handleHeightChange(),this._updateState(),this.$emit("input",this.message,this.lines,this.chars)},onInput(e){(0,k.Z)(C.s.Debug,"onInput",e,e.target.scrollHeight),this._handleHeightChange(),this._handleInputChange(e)},onKeydown(e){(0,k.Z)(C.s.Debug,"onKeydown",e,this.disabled);const t=e.which||e.keyCode,s=e.ctrlKey||e.metaKey,i=s&&88===t,o=s&&65===t,a=""!==this._getSelectedText();if((this.disabled||![38,40,37,39,46,8].includes(t)&&!a&&!i&&!o&&this.chars>=this.maxLength||13===t)&&(e.preventDefault(),229!==t&&13!==t))return;return!(!this.authenticated&&(0,n.vU)())&&13===t&&this.connected&&!this.enterDisabled&&this.message.trim().length>0&&this.chars<=this.maxLength?(this.$emit("enter"),void this.disable()):void 0},onPaste(e){if((0,k.Z)(C.s.Debug,"onPaste",e),e.preventDefault(),this.disabled)return;let t="";e.clipboardData?t=e.clipboardData.getData("text/plain"):window.clipboardData&&(t=window.clipboardData.getData("Text")),t=t.replace(/(\r\n|\n|\r)/gm,""),this.insertText(t,!0)},_handleInputChange(e){const t=e.which||e.keyCode;this._updateState(),46!==t&&8!==t&&this.chars>this.maxLength&&this._fixOverflow(e),this.$emit("input",this.message,this.lines,this.chars)},_handleHeightChange(){const e=this.$el;e.style.overflowY="hidden",e.style.height=0,e.scrollHeight<this.maxHeight?e.style.height=e.scrollHeight+"px":(e.style.height=this.maxHeight+"px",e.style.overflowY="auto"),e.selectionEnd===e.value.length&&(0,h.Og)(e)},_updateState(){const e=this.$el,t=e.value;this.message=t,this.chars=(0,l.u$)(t),this.lines=Math.round((e.scrollHeight-10)/this.lineHeight),(0,k.Z)(C.s.Debug,"_updateState",this.chars,this.lines)},_getSelectedText(){const e=this.$el;return e.value.substring(e.selectionStart,e.selectionEnd)},_insertTextAtCursor(e){const t=this.$el,s=t.selectionStart,i=t.selectionEnd;if("number"==typeof s&&"number"==typeof i){const n=t.value,o=s;t.value=(0,l.VO)(n,s,i,e),t.selectionStart=t.selectionEnd=o+e.length,t.focus()}},_fixOverflow(e){const t=e.data,s=t?.length;if(s){const e=this.$el,i=e.value,n=e.selectionEnd;(0,k.Z)(C.s.Debug,"_fixOverflow",t,s,n),e.value=(0,l.VO)(i,n-s,n,""),this._updateState()}}}},y=w,M=(s(4810),s(1900)),E=(0,M.Z)(y,(function(){var e=this;return(0,e._self._c)("textarea",{staticClass:"input-area focus-cont",class:{"input-area-disabled":e.disabled},style:e.inputAreaStyle,attrs:{tabindex:"1003",rows:"1",placeholder:e.$lang.data.k75},on:{keydown:function(t){return t.stopPropagation(),e.onKeydown(t)},input:function(t){return t.stopPropagation(),e.onInput(t)},paste:function(t){return e.onPaste(t)}}})}),[],!1,null,null,null).exports,T=s(9814),S=s(1068),x=s(388),$={data(){return{store:i.Z,showed:!1,submitted:!1,intent:null,params:null,mode:null,MODE_A:1,MODE_B:2,consentMessage:null,customConsentMessage:null,consentAcceptance:!1,customConsentAcceptance:!1}},methods:{show(e,t){this.showed=!0,this.intent=e,this.params=t,this.$nextTick((e=>{this.handleFocus()}))},hide(){this.showed=!1,this.intent=null,this.params=null,this.consentAcceptance=!1,this.customConsentAcceptance=!1},handleFocus(){let e;e=this.mode===this.MODE_A?document.getElementById("accept"):document.querySelector(".jwt-modal-header a"),e&&e.focus()},generateClick(e){(0,T.H)(e.target.firstChild)},accept(e){this.submitted=!0,now4real.registerUserConsent().then((e=>{this.$emit("accept",this.intent,this.params),this.submitted=!1})).catch((e=>{(0,k.Z)(C.s.Error,"registerUserConsent error",e),this.$toast(this.$lang.data.k1,{parent:".chat-container",id:"logout-error",className:"toast-alert"}),this.submitted=!1}))},generateConsent(){return this.$lang.complete("k122",{"<a1>":'<span class="focus-el" tabindex="13"><a class="focus-cont" tabindex="-1" href="https://now4real.com/terms/" rel="noopener noreferrer nofollow" target="_blank">',"</a1>":"</a></span>","<a2>":'<span class="focus-el" tabindex="14"><a class="focus-cont" tabindex="-1" href="https://now4real.com/privacy/" rel="noopener noreferrer nofollow" target="_blank">',"</a2>":"</a></span>"})},generateCustomConsent(e){const t=e.substring(0,1e3);return(0,l.Xv)(t).replace(/&lt;(?:(?:(?!(&lt;|&gt;)).)+)href="((?!javascript:)[^"]*)"(?:(?:(?!(&lt;|&gt;)).)*)*&gt;((?:(?!&lt;).)+)&lt;\/a&gt;/gm,((e,t,s,i,n)=>`<span class="focus-el" tabindex="17"><a class="focus-cont" tabindex="-1" href="${s}" rel="noopener noreferrer nofollow ugc" target="_blank">${n}</a></span>`))}},computed:{allAccepted(){return this.consentAcceptance&&this.customConsentAcceptance}},created(){const e=this.$whiteLabel,t=now4real.config.widget.consent_message;!e&&t?(this.mode=this.MODE_B,this.consentMessage=this.generateConsent(),this.customConsentMessage=this.generateCustomConsent(t)):(this.mode=this.MODE_A,this.consentMessage=t?this.generateCustomConsent(t):this.generateConsent())},components:{Modal:S.Z,Button:x.Z}},I=(s(9506),(0,M.Z)($,(function(){var e=this,t=e._self._c;return e.showed?t("modal",{on:{close:function(t){return e.$emit("close")}}},[t("template",{slot:"title"},[e._v("\n        "+e._s(e.$lang.data.k121)+"\n    ")]),e._v(" "),t("template",{slot:"header"},[e.mode===e.MODE_A?t("div",{staticClass:"jwt-modal-header"},[t("p",{domProps:{innerHTML:e._s(e.consentMessage)}})]):t("div",{staticClass:"jwt-modal-header"},[t("p",{domProps:{innerHTML:e._s(e.consentMessage)}}),e._v(" "),t("div",{staticClass:"c-radio-group"},[t("div",{staticClass:"c-radio-input focus-el",attrs:{tabindex:"15"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.generateClick.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.consentAcceptance,expression:"consentAcceptance"}],staticClass:"focus-cont",attrs:{type:"radio",id:"bc-disagree-radio",tabindex:"-1"},domProps:{value:!1,checked:e._q(e.consentAcceptance,!1)},on:{change:function(t){e.consentAcceptance=!1}}}),e._v(" "),t("label",{staticClass:"focus-cont",attrs:{for:"bc-disagree-radio",tabindex:"-1"}},[e._v(e._s(e.$lang.data.k124))])]),e._v(" "),t("div",{staticClass:"c-radio-input focus-el",attrs:{tabindex:"16"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.generateClick.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.consentAcceptance,expression:"consentAcceptance"}],staticClass:"focus-cont",attrs:{type:"radio",id:"bc-agree-radio",tabindex:"-1"},domProps:{value:!0,checked:e._q(e.consentAcceptance,!0)},on:{change:function(t){e.consentAcceptance=!0}}}),e._v(" "),t("label",{staticClass:"focus-cont",attrs:{for:"bc-agree-radio",tabindex:"-1"}},[e._v(e._s(e.$lang.data.k125))])])]),e._v(" "),t("p",{staticClass:"c-consent",domProps:{innerHTML:e._s(e.customConsentMessage)}}),e._v(" "),t("div",{staticClass:"c-radio-group"},[t("div",{staticClass:"c-radio-input focus-el",attrs:{tabindex:"18"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.generateClick.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.customConsentAcceptance,expression:"customConsentAcceptance"}],staticClass:"focus-cont",attrs:{type:"radio",id:"cc-disagree-radio",tabindex:"-1"},domProps:{value:!1,checked:e._q(e.customConsentAcceptance,!1)},on:{change:function(t){e.customConsentAcceptance=!1}}}),e._v(" "),t("label",{staticClass:"focus-cont",attrs:{for:"cc-disagree-radio",tabindex:"-1"}},[e._v(e._s(e.$lang.data.k124))])]),e._v(" "),t("div",{staticClass:"c-radio-input focus-el",attrs:{tabindex:"19"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.generateClick.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.customConsentAcceptance,expression:"customConsentAcceptance"}],staticClass:"focus-cont",attrs:{type:"radio",id:"cc-agree-radio",tabindex:"-1"},domProps:{value:!0,checked:e._q(e.customConsentAcceptance,!0)},on:{change:function(t){e.customConsentAcceptance=!0}}}),e._v(" "),t("label",{staticClass:"focus-cont",attrs:{for:"cc-agree-radio",tabindex:"-1"}},[e._v(e._s(e.$lang.data.k125))])])])])]),e._v(" "),t("template",{slot:"footer"},[e.mode===e.MODE_A?t("Button",{attrs:{id:"accept",disabled:e.submitted,submitted:e.submitted,tabindex:"20"},on:{click:e.accept}},[e._v("\n            "+e._s(e.$lang.data.k123)+"\n        ")]):t("Button",{attrs:{id:"continue",disabled:!e.allAccepted||e.submitted,submitted:e.submitted,tabindex:"20"},on:{click:e.accept}},[e._v("\n            "+e._s(e.$lang.data.k126)+"\n        ")])],1)],2):e._e()}),[],!1,null,null,null)),A=I.exports,P=s(7157),O=s(7474);const L="3600";var Z={data(){return{store:i.Z,loading:!1,showed:!1,submitted:!1,header:null,body:null,muteValue:1,muteUnit:L,minMuteValue:null}},methods:{onKeyPress(e){e.key&&[",",".","-"].indexOf(e.key)>-1&&e.preventDefault(),this.muteValue&&3===this.muteValue.length&&e.preventDefault()},show(e){this.user=e,this.showed=!0,this.loading=!0,now4real.getMute(e.id).then((e=>{if(console.log("getMuteStatus response",e),e)if(e.expiration){let t=e.expiration;this.header=this.$lang.complete("k128",{$U:`<strong>${this.user.name}</strong>`,$E:new Date(t).toUTCString()}),this.body=this.$lang.data.k131,this.minMuteValue=0}else this.header=this.$lang.complete("k128Forever",{$U:`<strong>${this.user.name}</strong>`}),this.body=this.$lang.data.k131,this.minMuteValue=0;else this.body=this.$lang.complete("k130",{$U:`<strong>${this.user.name}</strong>`}),this.minMuteValue=1;this.loading=!1,this.$nextTick((e=>{document.getElementById("mute-value").focus()}))})).catch((e=>{console.error("getMuteStatus error",e),this.$toast(this.$lang.data.k1,{parent:"body",id:"mute-error",className:"toast-alert"}),this.hide()}))},hide(){this.showed=!1,this.user=null,this.loading=!1,this.submitted=!1,this.header=null,this.body=null,this.muteValue=1,this.muteUnit=L,this.minMuteValue=null},save(){this.submitted=!0;const e=this.muteUnit?Number(this.muteValue)*Number(this.muteUnit):null;now4real.setMute(this.user.id,e).then((e=>{console.log("setMute response",e),this.hide(),this.submitted=!1})).catch((e=>{console.error("setMute error",e),this.$toast(this.$lang.data.k1,{parent:"body",id:"mute-error",className:"toast-alert"}),this.submitted=!1}))}},components:{Modal:S.Z,Spinner:P.Z,Button:x.Z,UserPic:O.Z}},D=(s(9716),(0,M.Z)(Z,(function(){var e=this,t=e._self._c;return e.showed?t("modal",{attrs:{id:"mute-modal"},on:{close:e.hide}},[t("template",{slot:"title"},[e._v("\n        "+e._s(e.$lang.data.k127)+"\n    ")]),e._v(" "),t("template",{slot:"header"},[t("div",{staticClass:"section"},[t("user-pic",{attrs:{id:"user-pic",user:e.user}}),e._v(" "),e.header?t("div",{domProps:{innerHTML:e._s(e.header)}}):e._e()],1)]),e._v(" "),t("template",{slot:"body"},[t("div",{staticClass:"section"},[e.loading?t("spinner"):t("div",[t("div",{domProps:{innerHTML:e._s(e.body)}}),e._v(" "),t("div",{staticClass:"mute-settings"},[t("span",{staticClass:"focus-el",attrs:{tabindex:"13"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.muteValue,expression:"muteValue"}],staticClass:"focus-cont",attrs:{type:"number",min:e.minMuteValue,max:"999",id:"mute-value",tabindex:"-1",disabled:!e.muteUnit},domProps:{value:e.muteValue},on:{keypress:e.onKeyPress,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)},paste:function(e){e.preventDefault()},input:function(t){t.target.composing||(e.muteValue=t.target.value)}}})]),e._v(" "),t("span",{staticClass:"focus-el",attrs:{tabindex:"14"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.muteUnit,expression:"muteUnit"}],staticClass:"focus-cont",attrs:{name:"unit",id:"mute-unit",tabindex:"-1"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.muteUnit=t.target.multiple?s:s[0]}}},[t("option",{attrs:{value:"60"}},[e._v(e._s(e.$lang.data.k5s))]),e._v(" "),t("option",{attrs:{value:"3600"}},[e._v(e._s(e.$lang.data.k7s))]),e._v(" "),t("option",{attrs:{value:"86400"}},[e._v(e._s(e.$lang.data.k9s))]),e._v(" "),t("option",{attrs:{value:"694800"}},[e._v(e._s(e.$lang.data.k11s))]),e._v(" "),t("option",{attrs:{value:"2592000"}},[e._v(e._s(e.$lang.data.k13s))]),e._v(" "),t("option",{attrs:{value:"31536000"}},[e._v(e._s(e.$lang.data.k15s))]),e._v(" "),t("option",{attrs:{value:""}},[e._v(e._s(e.$lang.data.k17))])])])]),e._v(" "),t("div",{staticClass:"remove-info"},[e._v("\n                    "+e._s(e.$lang.data.k132)+"\n                ")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.header&&"0"===e.muteValue,expression:"header && muteValue === '0'"}],staticClass:"remove-alert"},[e._v("\n                    "+e._s(e.$lang.data.k133)+"\n                ")])])],1)]),e._v(" "),t("template",{slot:"footer"},[t("div",{staticClass:"section"},[e.loading?e._e():t("Button",{attrs:{disabled:e.submitted,submitted:e.submitted,tabindex:"15"},on:{click:e.save}},[e._v("\n                "+e._s(e.$lang.data.k134)+"\n            ")])],1)])],2):e._e()}),[],!1,null,null,null)),R=D.exports,N={data(){return{store:i.Z,showed:!1,submitted:!1,msg:null,reasonRadioGroup:null,reason:null,comment:null}},methods:{generateClick(e){(0,T.H)(e.target.firstChild)},show(e){this.msg=e;const t=this.$lang.data;this.reasonRadioGroup=[{value:r.Z.SPAM,text:t.k150},{value:r.Z.HATE_SPEECH,text:t.k147},{value:r.Z.VIOLENCE,text:t.k148},{value:r.Z.PORNOGRAPHY,text:t.k149},{value:r.Z.SELF_INJURY,text:t.k151},{value:r.Z.COPYRIGHT,text:t.k152},{value:r.Z.OTHER,text:t.k153}],this.reason=r.Z.SPAM,this.showed=!0,this.$nextTick((e=>{let t=document.querySelector("#reason .r-radio-input input");t&&t.focus()}))},hide(){this.showed=!1,this.msg=null,this.reasonRadioGroup=null,this.reason=null,this.comment=null},report(){this.submitted=!0,now4real.reportMessage(this.msg.id,this.reason,this.comment).then((e=>{console.log("report response",e),this.$toast(this.$lang.data.k156,{parent:".chat-container",id:"report-ok",className:"report-toast-info"}),this.hide(),this.submitted=!1})).catch((e=>{let t;console.error("report error",e),t=e.code===now4real.ErrorCode.ALREADY_REPORTED?this.$lang.data.k157:e.code===now4real.ErrorCode.USER_MUTED?this.$lang.data.k2:this.$lang.data.k1,this.$toast(t,{parent:".chat-container",id:"report-error",className:"toast-alert"}),this.submitted=!1}))}},components:{Modal:S.Z,Button:x.Z}},H=(s(2090),(0,M.Z)(N,(function(){var e=this,t=e._self._c;return e.showed?t("modal",{attrs:{id:"report-modal"},on:{close:e.hide}},[t("template",{slot:"title"},[e._v("\n        "+e._s(e.$lang.data.k144)+"\n    ")]),e._v(" "),t("template",{slot:"header"},[t("p",{attrs:{id:"header"}},[e._v(e._s(e.$lang.data.k145))])]),e._v(" "),t("template",{slot:"body"},[t("div",{staticClass:"section"},[t("p",{attrs:{id:"note"}},[e._v(e._s(e.$lang.data.k146))]),e._v(" "),t("div",{attrs:{id:"reason"}},[t("div",{staticClass:"r-radio-group"},e._l(e.reasonRadioGroup,(function(s,i){return t("div",{key:s.value,staticClass:"r-radio-input focus-el",attrs:{tabindex:15+i},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.generateClick.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reason,expression:"reason"}],staticClass:"focus-cont",attrs:{type:"radio",id:s.value.toLowerCase()+"-radio",tabindex:"-1"},domProps:{value:s.value,checked:e._q(e.reason,s.value)},on:{change:function(t){e.reason=s.value}}}),e._v(" "),t("label",{staticClass:"focus-cont",attrs:{for:s.value.toLowerCase()+"-radio",tabindex:"-1"}},[e._v(e._s(s.text))])])})),0)]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],attrs:{id:"comment",rows:"3",maxlength:"500",placeholder:e.$lang.data.k154,tabindex:"22"},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}})])]),e._v(" "),t("template",{slot:"footer"},[t("div",{staticClass:"section"},[t("Button",{attrs:{disabled:e.submitted,submitted:e.submitted,tabindex:"23"},on:{click:e.report}},[e._v("\n                "+e._s(e.$lang.data.k155)+"\n            ")])],1)])],2):e._e()}),[],!1,null,null,null)),U=H.exports,B={data(){return{store:i.Z,showed:!1,submitted:!1,header:null,body:null,msg:null,intent:null,HIDE_INTENT:r.Z.HIDE,SHOW_INTENT:r.Z.SHOW}},methods:{show(e,t){this.msg=e,this.intent=t,this.showed=!0;const s=t===this.HIDE_INTENT?"k137":"k138";this.header=this.$lang.complete(s,{$U:`<strong>${e.author.name}</strong>`}),t===this.HIDE_INTENT&&(this.body=this.$lang.data.k139),this.$nextTick((e=>{let t=document.querySelector("#hide-modal #save");t&&t.focus()}))},hide(){this.showed=!1,this.msg=null,this.intent=null,this.header=null,this.body=null,this.submitted=!1},save(){this.submitted=!0;const e=this.msg.author.id,t=this.intent,s=this.store.hiddenUsers,i=r.Z.HIDDEN_USERS_KEY;let n=[];Object.keys(s).forEach((e=>{const t=s[e]-1;n[t]=e})),t===this.HIDE_INTENT?-1===n.indexOf(e)&&(n.push(e),n.length>a.v.MAX_USERS_HIDEABLE&&n.shift()):n=n.filter((t=>t!==e)),(0,k.Z)(C.s.Debug,"save",e,t,s,i,n);(n.length?now4real.userPreferences.setItem(i,n):now4real.userPreferences.removeItem(i)).then((e=>{this.hide(),this.submitted=!1})).catch((e=>{(0,k.Z)(C.s.Error,e),this.$toast(this.$lang.data.k1,{parent:".chat-container",id:"hide-error",className:"toast-alert"}),this.submitted=!1}))}},components:{Modal:S.Z,Button:x.Z,UserPic:O.Z}},V=(s(6446),(0,M.Z)(B,(function(){var e=this,t=e._self._c;return e.showed?t("modal",{attrs:{id:"hide-modal"},on:{close:e.hide}},[t("template",{slot:"title"},[e.intent===e.HIDE_INTENT?[e._v("\n            "+e._s(e.$lang.data.k135)+"\n        ")]:[e._v("\n            "+e._s(e.$lang.data.k136)+"\n        ")]],2),e._v(" "),t("template",{slot:"header"},[e.msg&&e.header?t("div",{staticClass:"section"},[t("user-pic",{attrs:{id:"user-pic",user:e.msg.author}}),e._v(" "),t("div",{domProps:{innerHTML:e._s(e.header)}})],1):e._e()]),e._v(" "),t("template",{slot:"body"},[e.body?t("div",{staticClass:"section"},[t("div",{domProps:{innerHTML:e._s(e.body)}})]):e._e()]),e._v(" "),t("template",{slot:"footer"},[t("div",{staticClass:"section"},[t("Button",{attrs:{id:"save",disabled:e.submitted,submitted:e.submitted,tabindex:"13"},on:{click:e.save}},[e._v("\n                "+e._s(e.$lang.data.k140)+"\n            ")])],1)])],2):e._e()}),[],!1,null,null,null).exports),j=s(144);const G={props:{suggestions:{type:Array,required:!0,default:()=>[]},color:{type:String,default:"red"}},computed:{limitedSuggestions(){return this.suggestions.slice(0,5)}},methods:{handleClick(e){this.$emit("suggestion-clicked",e)}}},z=()=>{(0,j.useCssVars)(((e,t)=>({"587d7fad":e.color})))},K=G.setup;G.setup=K?(e,t)=>(z(),K(e,t)):z;var W=G,F=(s(6875),(0,M.Z)(W,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"suggestions-container",class:{"has-suggestions":e.limitedSuggestions.length>0}},e._l(e.limitedSuggestions,(function(s,i){return t("button",{key:`${s}-${i}`,staticClass:"suggestion-button",on:{click:function(t){return e.handleClick(s)}}},[e._v("\n        "+e._s(s)+"\n    ")])})),0)}),[],!1,null,"6c52f1e0",null).exports);var Y=s(3052),q=s(4962),J={name:"div-component"},X=(0,M.Z)(J,(function(){return(0,this._self._c)("div",[this._t("default")],2)}),[],!1,null,null,null).exports;const Q=new class{constructor(e,t){this.name=t||"Elastic",this.time=e||2e4,this.id=null,this.onEnd=null}_set(e){this.id=setTimeout((()=>{this.id=null,e()}),this.time)}_reset(){clearTimeout(this.id),this.id=null}start(e,t){null===this.id?((0,k.Z)(C.s.Debug,`First "${this.name}" timer initialization`),this.onEnd=t,e()):((0,k.Z)(C.s.Debug,`"${this.name}" timer reinitialized`),this._reset()),this._set(t)}invalidate(){null!==this.id&&((0,k.Z)(C.s.Debug,`"${this.name}" timer invalidation`),this.onEnd(),this._reset(),this.onEnd=null)}}(a.v.TYPING_TIMEOUT,"typing"),ee="COUNTER_CHAT_TYPING",te="LIST_CHAT_TYPING";var se={name:"typing",mixins:[Y.Z,p.Z],data(){return{subject:[ee,te].join(" & "),typingUsers:[],typingCounter:null,scope:a.v.SCOPE,typingEnabled:null}},created(){this.typingEnabled=a.v.CHAT_VIEW&&now4real.config.widget.typing_enabled},methods:{write(e){(0,k.Z)(C.s.Debug,"write call",e),""!==e?((0,k.Z)(C.s.Debug,"Start to type"),Q.start((()=>now4real.startTyping()),(()=>now4real.stopTyping()))):((0,k.Z)(C.s.Debug,"Stop to type"),Q.invalidate())},subscribe(){return this.typingEnabled?Promise.all([now4real.subscribe(ee,(e=>{(0,k.Z)(C.s.Debug,"Typing counter update",e),this.typingCounter=e.data.value})),now4real.subscribe(te,(e=>{(0,k.Z)(C.s.Debug,"Typing update",e)})).then((e=>{this.typingUsers=now4real[te]}))]):Promise.resolve()},unsubscribe(){return Q.invalidate(),this.typingEnabled?Promise.all([now4real.unsubscribe(ee),now4real.unsubscribe(te)]):Promise.resolve()},resetState(){(0,k.Z)(C.s.Debug,"typing reset state call"),this.typingUsers=[],this.typingCounter=null}},computed:{typingList(){let e="";if(null===this.typingCounter)return e;const t=Number(this.typingCounter),s=this.typingUsers.length,i=t-s;return t>0&&i>=0&&(e=s?1===s?i?1===i?this.$lang.complete("k115",{$A:this.typingUsers[0].name}):this.$lang.complete("k116",{$A:this.typingUsers[0].name,$N:i}):this.$lang.complete("k112",{$A:this.typingUsers[0].name}):2===s?i?1===i?this.$lang.complete("k117",{$A:this.typingUsers[0].name,$B:this.typingUsers[1].name}):this.$lang.complete("k118",{$A:this.typingUsers[0].name,$B:this.typingUsers[1].name,$N:i}):this.$lang.complete("k113",{$A:this.typingUsers[0].name,$B:this.typingUsers[1].name}):i?1===i?this.$lang.complete("k119",{$A:this.typingUsers[0].name,$B:this.typingUsers[1].name,$C:this.typingUsers[2].name}):this.$lang.complete("k120",{$A:this.typingUsers[0].name,$B:this.typingUsers[1].name,$C:this.typingUsers[2].name,$N:i}):this.$lang.complete("k114",{$A:this.typingUsers[0].name,$B:this.typingUsers[1].name,$C:this.typingUsers[2].name}):1===i?this.$lang.data.k110:this.$lang.complete("k111",{$N:i})),e},showTyping(){return this.typingCounter&&Number(this.typingCounter)>0&&Number(this.typingCounter)-this.typingUsers.length>=0}},components:{Presence:q.Z,DivComponent:X}},ie=(s(8357),(0,M.Z)(se,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"typing-container"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("keep-alive",[e.connected&&e.typingEnabled&&e.showTyping?t("div-component",{staticClass:"typing-summary"},[e._v("\n                "+e._s(e.typingList)+"\n            ")]):e.connected?t("presence",{attrs:{context:e.scope}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports),ne=s(2712);const oe=[{version:16,emoji:String.fromCodePoint(129734)},{version:15.1,emoji:String.fromCodePoint(127819)+String.fromCodePoint(8205)+String.fromCodePoint(129001)},{version:15,emoji:String.fromCodePoint(129768)},{version:14,emoji:String.fromCodePoint(129760)},{version:13,emoji:String.fromCodePoint(129394)},{version:12,emoji:String.fromCodePoint(129393)},{version:11,emoji:String.fromCodePoint(129396)},{version:5,emoji:String.fromCodePoint(129322)},{version:4,emoji:String.fromCodePoint(9877)+String.fromCodePoint(65039)},{version:3,emoji:String.fromCodePoint(129314)},{version:2,emoji:String.fromCodePoint(128488)+String.fromCodePoint(65039)},{version:1,emoji:String.fromCodePoint(128512)}];function ae(){const e=oe.find((e=>function(e){let t=null;try{t=document.createElement("canvas").getContext("2d")}catch{}if(!t)return!1;const s=25,i=20,n=Math.floor(s/2);t.font=n+"px Arial, Sans-Serif",t.textBaseline="top",t.canvas.width=2*i,t.canvas.height=s,t.clearRect(0,0,2*i,s),t.fillStyle="#FF0000",t.fillText(e,0,22),t.fillStyle="#0000FF",t.fillText(e,i,22);const o=t.getImageData(0,0,i,s).data,a=o.length;let r=0;for(;r<a&&!o[r+3];r+=4);if(r>=a)return!1;const l=i+r/4%i,c=Math.floor(r/4/i),d=t.getImageData(l,c,1,1).data;if(o[r]!==d[0]||o[r+2]!==d[2])return!1;if(t.measureText(e).width>=i)return!1;return!0}(e.emoji)));return e?.version??1}var re=s(7856),le={mixins:[f],data(){return{store:i.Z,availableLangs:["da","de","en","es","et","fi","fr","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","zh"],chosenLang:null,platformSupportedEmojiVersion:null,cachedPicker:null,recents:null,recentsTmp:null,optionUpdateListenerUnwatcher:null}},methods:{getRecents(){const e=this.authenticatedUser;let t=[];return e&&e.preferences&&e.preferences[r.Z.RECENTS_EMOJIS_KEY]&&(0,ne.kJ)(e.preferences[r.Z.RECENTS_EMOJIS_KEY])&&(t=e.preferences[r.Z.RECENTS_EMOJIS_KEY]),t},setupOptionUpdateListener(e){const t=()=>{this.cachedPicker?.updateOptions(this.computeUpdateSizes())};if(this.store.containerMode){const e=(0,re.P)(500,t);window.addEventListener("resize",e),this.optionUpdateListenerUnwatcher=()=>{window.removeEventListener("resize",e)}}else this.optionUpdateListenerUnwatcher=this.$watch("store.isMobile",t);e&&t()},resetOptionUpdateListener(){this.optionUpdateListenerUnwatcher&&(this.optionUpdateListenerUnwatcher(),this.optionUpdateListenerUnwatcher=null)},computeUpdateSizes(){const e=this.store.containerMode,t=this.store.isMobile;let s,i,n;if(e)s="1.5rem",i=Math.floor(window.innerWidth/34),n=3;else if(t){s="1.7rem",i=9;const e=screen?.height||0;n=e>=824?5:e>=780?4:3}else s="1.5rem",i=8,n=3;return{emojiSize:s,emojisPerRow:i,visibleRows:n}},storeRecents(){(0,k.Z)(C.s.Debug,"Emoji-picker storeRecents",this.recents,this.recentsTmp),this.recents&&this.recentsTmp&&JSON.stringify(this.recents)!==JSON.stringify(this.recentsTmp)&&((0,k.Z)(C.s.Debug,"Emoji-picker save",this.recentsTmp),this.recents=this.recentsTmp,now4real.userPreferences.setItem(r.Z.RECENTS_EMOJIS_KEY,this.recentsTmp))},renderPicker(e,t){if(!this.cachedPicker){(0,k.Z)(C.s.Debug,"Emoji-picker renderPicker",e,t,this.platformSupportedEmojiVersion);const s=performance.now(),i=this;class n extends picmo.RecentsProvider{constructor(){super()}clear(){(0,k.Z)(C.s.Debug,"UserPreferencesRecentsProvider clear")}getRecents(e){return(0,k.Z)(C.s.Debug,"UserPreferencesRecentsProvider getRecents",e),t}addOrUpdateRecent(e,t){(0,k.Z)(C.s.Debug,"UserPreferencesRecentsProvider addOrUpdateRecent",e,t);const s=e.emoji,n=i.recentsTmp,o=[s,...n.filter((e=>e!==s))].slice(0,a.v.MAX_RECENTS_EMOJIS);i.recentsTmp=o}}const o=!!t,r=this.computeUpdateSizes(),l=document.documentElement.classList.contains("noto-color-emoji")?16:this.platformSupportedEmojiVersion,c=this.$lang.data,d=picmo.createPicker({rootElement:document.querySelector("#emoji-picker"),emojiVersion:l,showPreview:!1,visibleRows:r.visibleRows,emojiSize:r.emojiSize,emojisPerRow:r.emojisPerRow,locale:e,i18n:{"categories.recents":c.k100,"recents.none":c["k100.none"],"error.load":c.k106,retry:c.k107,"search.clear":c["k102.clear"],"search.error":c["k102.error"],"search.notFound":c["k102.notFound"],search:c.k102},showRecents:o,maxRecents:o?a.v.MAX_RECENTS_EMOJIS:0,recentsProvider:o?new n:null,initialCategory:o&&t.length?"recents":"smileys-emotion",className:"my-picker"});return d.addEventListener("data:ready",(e=>{const t=performance.now();(0,k.Z)(C.s.Debug,`Emoji-picker ready in: ${t-s}ms`)})),d.addEventListener("emoji:select",(e=>{const t=e.emoji;(0,k.Z)(C.s.Debug,"Emoji-picker select:",e,t),this.$emit("selection",t),setTimeout((e=>{document.querySelectorAll('.recentEmojis button:not([title=""])').forEach((e=>e.setAttribute("title","")))}),0)})),this.cachedPicker=d,!1}return!0},purgeCache(){(0,k.Z)(C.s.Debug,"Emoji-picker purgeCache",this.cachedPicker),this.cachedPicker&&(this.cachedPicker.destroy(),this.cachedPicker=null),this.recents=null,this.recentsTmp=null}},created(){(0,k.Z)(C.s.Debug,"Emoji-picker created");const e=this.$lang.currentLang,t=this.availableLangs.find((t=>t===e));this.chosenLang=t||"en",this.platformSupportedEmojiVersion=ae()},activated(){(0,k.Z)(C.s.Debug,"Emoji-picker activated");let e=null;this.authenticated&&(this.recents||(this.recents=this.getRecents()),this.recentsTmp||(this.recentsTmp=this.recents),e=this.recents.map((e=>({emoji:e,label:""}))));const t=this.renderPicker(this.chosenLang,e);this.setupOptionUpdateListener(t)},deactivated(){(0,k.Z)(C.s.Debug,"Emoji-picker deactivated"),this.resetOptionUpdateListener()}},ce=(s(9757),(0,M.Z)(le,(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{attrs:{id:"emoji-picker-container"}},[e("div",{attrs:{id:"emoji-picker"}})])}],!1,null,null,null).exports),de=[function(){var e=this._self._c;return e("a",{attrs:{href:"https://tenor.com",target:"_blank",rel:"noopener noreferrer nofollow"}},[e("img",{attrs:{src:s(4409),alt:"TENOR"}})])}],he=s(8685),ue={props:["gif","observer"],mounted(){this.observer&&(this.observer.observe(this.$el),(0,k.Z)(C.s.Debug,"observe",this.$el,this.gif.id))},beforeDestroy(){this.observer&&(this.observer.unobserve(this.$el),(0,k.Z)(C.s.Debug,"unobserve",this.$el,this.gif.id))},methods:{onClick(e){this.$emit("click",`https://tenor.com/view/${e.id}`)}}},ge=ue,pe=(s(3970),(0,M.Z)(ge,(function(){var e=this;return(0,e._self._c)("button",{staticClass:"tenor-picker-item",style:`background-image: url('${e.gif.media_formats.tinygif.url}')`,on:{click:function(t){return e.onClick(e.gif)}}})}),[],!1,null,null,null).exports),me={data(){return{retryLink:null}},created(){window.tenorTryAgainHandler=()=>{this.$emit("tryAgain")},this.retryLink=this.$lang.complete("k109",{"<a>":'<a href="javascript:void(0)" onclick="window.tenorTryAgainHandler()">'})},destroyed(){delete window.tenorTryAgainHandler}},ve=(s(8094),(0,M.Z)(me,(function(){var e=this;return(0,e._self._c)("p",{staticClass:"tenor-error-line",domProps:{innerHTML:e._s(e.retryLink)}})}),[],!1,null,null,null).exports),fe={props:{data:Array},data(){return{loading:!1,error:!1,gifs:null,observer:null}},watch:{data(e){(0,k.Z)(C.s.Debug,"Grid data update",e),this.gifs=e,this.loading=!1,this.error=!1}},created(){(0,k.Z)(C.s.Debug,"Grid created",this.data),this.gifs=this.data,this.observer=new IntersectionObserver(this.onElementObserved,{root:this.$el,threshold:.5})},methods:{isLastChild(e){return e===this.gifs.length-1},onElementObserved(e){e.forEach((e=>{let{target:t,isIntersecting:s}=e;s&&(this.observer.unobserve(t),this.$emit("loadMore"))}))},onSelected(e){this.$emit("selection",e)},onTryAgain(){this.$emit("loadMore")},markLoading(){this.loading=!0,this.error=!1},markLoadingError(){this.loading=!1,this.error=!0},scrollTop(){(0,h.k3)(this.$el)}},beforeUnmount(){this.observer.disconnect()},components:{TenorPickerItem:pe,TenorLoadingErrorLine:ve,Spinner:P.Z}},be=fe,_e=(s(1207),(0,M.Z)(be,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"tenor-grid-wrapper"},[t("div",{staticClass:"tenor-grid"},e._l(e.gifs,(function(s,i){return t("div",{key:s.id+"-"+i},[e.isLastChild(i)?t("TenorPickerItem",{attrs:{gif:s,observer:e.observer},on:{click:e.onSelected}}):t("TenorPickerItem",{attrs:{gif:s},on:{click:e.onSelected}})],1)})),0),e._v(" "),e.loading?t("Spinner"):e.error?t("TenorLoadingErrorLine",{on:{tryAgain:e.onTryAgain}}):e._e()],1)}),[],!1,null,null,null)),Ce=_e.exports;const ke=new he.Z(a.v.TENOR_API_KEY);var we={props:{rating:{type:String,default:"G"}},mixins:[p.Z],data(){return{store:i.Z,loading:!1,error:!1,searchValue:"",result:null,resultTrending:null,next:null,nextTrending:null}},computed:{computedRating(){return this.mapRating(this.rating)}},created(){(0,k.Z)(C.s.Debug,"Tenor picker created",this.rating,this.mapRating(this.rating)),this.loadTrending()},methods:{async loadTrending(){try{this.loading=!0;const e=await this.doTrendingSearch();this.result=e.results,this.resultTrending=e.results,this.nextTrending=e.next,this.loading=!1}catch(e){(0,k.Z)(C.s.Error,e),this.loading=!1,this.error=!0}},mapRating(e){return{G:"high",PG:"medium","PG-13":"low",R:"off"}[e]},doSearch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ke.search(e,{contentfilter:this.computedRating,media_filter:"tinygif",...t})},doTrendingSearch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ke.trending({contentfilter:this.computedRating,media_filter:"tinygif",...e})},search:(0,re.D)(500,(async function(){if(!this.searchValue)return this.result=this.resultTrending||[],this.next=null,void this.$refs.grid?.scrollTop();try{this.error=!1;const e=this.searchValue,t=await this.doSearch(e);this.searchValue===e&&(this.$refs.grid?.scrollTop(),this.result=t.results,this.next=t.next)}catch(e){(0,k.Z)(C.s.Error,"search error",e),this.error=!0}})),onClear(){this.searchValue="",this.search()},onSelection(e){(0,k.Z)(C.s.Debug,"onSelection",e),this.$emit("selection",e)},async onLoadMore(){(0,k.Z)(C.s.Debug,"onLoadMore",this.searchValue,this.next,this.nextTrending);try{const e=!!this.searchValue;if(e&&this.next){this.$refs.grid?.markLoading();const e=await this.doSearch(this.searchValue,{pos:this.next});this.result=this.result.concat(e.results),this.next=e.next}else if(!e&&this.nextTrending){this.$refs.grid?.markLoading();const e=await this.doTrendingSearch({pos:this.nextTrending});this.result=this.result.concat(e.results),this.resultTrending=this.result.concat(e.results),this.nextTrending=e.next}}catch(e){(0,k.Z)(C.s.Error,"onLoadMore error",e),this.$refs.grid?.markLoadingError()}},onTryAgain(){this.searchValue?this.search():this.loadTrending()},reset(){this.searchValue="",this.result=this.resultTrending||[],this.next=null,this.$refs.grid?.scrollTop()}},components:{TenorPickerGrid:Ce,TenorLoadingErrorLine:ve}},ye=we,Me=(s(1502),(0,M.Z)(ye,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tenor-picker-container"},[t("div",{staticClass:"input-bar-container"},[t("div",{staticClass:"input-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:e.$lang.data.k108,disabled:!e.connected||e.loading},domProps:{value:e.searchValue},on:{input:[function(t){t.target.composing||(e.searchValue=t.target.value)},e.search]}}),e._v(" "),t("transition",{attrs:{name:"fade"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.searchValue,expression:"searchValue"}],attrs:{"data-clear-input":""},on:{click:function(t){return t.stopPropagation(),e.onClear.apply(null,arguments)}}},[e._v("×")])])],1),e._v(" "),e._m(0)]),e._v(" "),t("div",{staticClass:"search-results",class:{mobile:e.store.isMobile}},[e.error?t("TenorLoadingErrorLine",{on:{tryAgain:e.onTryAgain}}):e.result?t("TenorPickerGrid",{ref:"grid",attrs:{data:e.result},on:{loadMore:e.onLoadMore,selection:e.onSelection}}):e._e()],1)])}),de,!1,null,null,null)),Ee=Me.exports,Te={name:"rich-content-picker",props:{gifRating:{type:String,default:"G"}},data(){return{show:null,emojiPickerInvisible:!1,EMOJI_PICKER:r.Z.EMOJI_PICKER,GIF_PICKER:r.Z.GIF_PICKER}},methods:{open(e){e===this.GIF_PICKER&&this.show===this.EMOJI_PICKER?this.emojiPickerInvisible=!0:this.emojiPickerInvisible=!1,this.show=e},close(e){e?(this.$refs.emojiPicker?.purgeCache(),this.emojiPickerInvisible=!1,this.$refs.tenorPicker?.reset()):this.show===this.EMOJI_PICKER&&(this.emojiPickerInvisible=!0),this.show=null},getOpenPicker(){return this.show},storeRecents(){this.$refs.emojiPicker?.storeRecents()},_onEmojiSelection(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.$emit("emoji-selection",...t)},_onGifSelection(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.$emit("gif-selection",...t)}},components:{EmojiPicker:ce,TenorPicker:Ee}},Se=Te,xe=(s(1484),(0,M.Z)(Se,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"rc-picker-container"}},[t("keep-alive",[e.show===e.EMOJI_PICKER||e.emojiPickerInvisible?t("emoji-picker",{ref:"emojiPicker",class:{invisible:e.emojiPickerInvisible},on:{selection:e._onEmojiSelection}}):e._e()],1),e._v(" "),t("keep-alive",[e.show===e.GIF_PICKER?t("tenor-picker",{ref:"tenorPicker",attrs:{rating:e.gifRating},on:{selection:e._onGifSelection}}):e._e()],1)],1)}),[],!1,null,null,null).exports);const $e=150;var Ie={methods:{setClip(e,t,s,i){return`rect(${e}px, ${t}px, ${s}px, ${i}px)`},setTransformStyle(e,t){let s=Math.floor(e/100*180);return"fix"===t?`rotate(${2*s}deg)`:`rotate(${s}deg)`},setTransitionStyle(e){return`transform ${e}s`},setPv(){["fix","rotate"].map((e=>{this[e+"Style"]={transform:this.setTransformStyle(this.pv,e)}}))}},props:["color","width","fontSize","pv","textColor","bold","textBgColor","borderColor","during","bgColor"],data(){let e=this.setTransformStyle(this.pv),t=(this.width,this.bold,this.setTransformStyle(this.pv,"fix")),s=this.setTransitionStyle(this.during||.3);return{circleStyle:{borderColor:this.borderColor||"#f7f7f7",borderStyle:"solid",borderWidth:"5px",width:(this.width||$e)+"px",height:(this.width||$e)+"px",backgroundColor:this.bgColor||"#f7f7f7"},progressTextStyle:{fontSize:(this.fontSize||64)+"px",color:this.textColor||"#f7f7f7"},fillStyle:{backgroundColor:this.color||"#2ecc71",width:(this.width||$e)+"px",height:(this.width||$e)+"px",clip:this.setClip(0,this.width/2,this.width,0)},rotateStyle:{transform:e,webkitTransform:e,msTransform:e,oTransform:e,mozTransform:e},transitionStyle:{transition:s,webkitTransition:s,mozTransition:s,oTransition:s,msTransition:s},maskStyle:{width:(this.width||$e)+"px",height:(this.width||$e)+"px",clip:this.setClip(0,this.width,this.width,this.width/2)},fixStyle:{transform:t,webkitTransform:t,mozTransform:t,oTransform:t,msTransform:t}}},watch:{pv(e,t){this.setPv()}}},Ae=(s(7462),(0,M.Z)(Ie,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"v-circle",style:e.circleStyle},[t("div",{staticClass:"mask full",style:[e.maskStyle,e.transitionStyle,e.rotateStyle]},[t("div",{staticClass:"fill",style:[e.fillStyle,e.transitionStyle,e.rotateStyle]})]),e._v(" "),t("div",{staticClass:"mask half",style:[e.maskStyle]},[t("div",{staticClass:"fill",style:[e.fillStyle,e.transitionStyle,e.rotateStyle]}),e._v(" "),t("div",{staticClass:"fill fix",style:[e.fillStyle,e.fixStyle,e.transitionStyle]})])])}),[],!1,null,null,null).exports);var Pe={props:["updatePeriod"],data(){return{enabled:!1,stepTime:this.updatePeriod||50,percentage:100,colorA:a.v.COLOR_A}},methods:{enable(e){const t=Date.now(),s=t+e;this.enabled=!0,function(e){let t=!0;!function s(){t&&(requestAnimationFrame(s),t=e())}()}((e=>{const i=Date.now();return i<s?(this.percentage=100-Math.round((i-t)/(s-t)*100),!0):(this.reset(),this.$emit("completion"),!1)}))},reset(){this.enabled=!1,this.percentage=100}},components:{StopCircle:Ae}},Oe=Pe,Le=(0,M.Z)(Oe,(function(){var e=this,t=e._self._c;return e.enabled?t("stop-circle",{attrs:{pv:e.percentage,width:"18",color:e.colorA}}):e._e()}),[],!1,null,null,null).exports,Ze={data(){return{colorA:a.v.COLOR_A}}},De=(0,M.Z)(Ze,(function(){var e=this,t=e._self._c;return t("svg",{staticStyle:{isolation:"isolate"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 450 450",width:"450",height:"450"}},[t("defs",[t("clipPath",{attrs:{id:"_clipPath_wo9ClZIGKjHvHpVMXeCqii6GB6BHOKIR"}},[t("rect",{attrs:{width:"450",height:"450"}})])]),e._v(" "),t("g",{attrs:{"clip-path":"url(#_clipPath_wo9ClZIGKjHvHpVMXeCqii6GB6BHOKIR)"}},[t("clipPath",{attrs:{id:"_clipPath_ROWIwt9bTcbUGIcktdoM7G3y0nanDy8l"}},[t("path",{attrs:{d:" M 0 0 L 500 0 L 500 500 L 0 500 L 0 0 Z ",fill:"rgb(255,255,255)"}})]),e._v(" "),t("g",{attrs:{"clip-path":"url(#_clipPath_ROWIwt9bTcbUGIcktdoM7G3y0nanDy8l)"}},[t("mask",{attrs:{id:"_mask_6cNs4d9rpLSg2Sqd2I6ULySrZRJw4iNx"}},[t("circle",{attrs:{"vector-effect":"non-scaling-stroke",cx:"225.0224807792666",cy:"225.011700383065",r:"224.99999999999997",fill:"white",stroke:"none"}})]),e._v(" "),t("g",{attrs:{mask:"url(#_mask_6cNs4d9rpLSg2Sqd2I6ULySrZRJw4iNx)"}},[t("path",{attrs:{d:" M 124.8 448.3 L 35 472 L 44.5 385.8 Q -12.2 310.5 -12.2 236 C -12.2 105.2 93.6 -1 224 -1 C 354.4 -1 460.2 105.2 460.2 236 C 460.2 366.8 354.4 473 224 473 Q 194.8 473 124.8 448.3 Z ",fill:e.colorA}}),e._v(" "),t("path",{attrs:{d:" M 109.6 97.5 C 102.5 98.9 94.8 99.9 87.7 99.9 C 80 99.9 72.9 99.4 65.7 97.5 C 67.2 102.3 70 106.1 73.8 109 C 81.8 115.2 93 115.2 101 109 C 105.2 106.3 108.2 102.2 109.6 97.5 Z  M 213.1 60.7 C 203.1 63 193.1 64 183.1 64 C 173.1 64 163.1 63 153 60.7 C 154.9 66.9 159.2 72.6 164.5 76.4 C 175.5 84.6 190.7 84.6 202.2 76.4 C 207.4 72.6 211.2 66.9 213.1 60.7 Z  M 300 78.4 C 282 82.2 263.5 82.2 245.6 78.4 C 247.5 84.1 250.8 88.9 255.6 92.7 C 265.6 100.4 279.5 100.4 289.5 92.7 C 294.7 88.9 298.1 84.1 300 78.4 Z  M 380.6 100.4 C 365.3 103.7 349.6 103.7 334.8 100.4 C 336.2 105.2 339.6 109.5 343.4 112.3 C 351.9 118.6 363.5 118.6 372 112.3 C 375.8 109.5 378.7 105.2 380.6 100.4 L 380.6 100.4 Z  M 452.2 236.3 C 452.2 362.2 350.5 464.1 225.1 464.1 C 188.8 464.1 154.5 455.5 124.4 440.2 L 116.3 443 C 86.7 453.6 61.9 459.8 45.7 461.7 C 55.2 438.2 57.6 412.4 52.4 387.5 L 51.4 382.3 C 18 342.5 -2 291.8 -2 236.3 C -2 211.7 2 187.3 9.9 164 L 47.1 164 C 52.4 144.9 68.6 131 87.7 131 C 103.4 131 117.3 140.6 124.4 154.5 C 129.7 124.8 153.5 102.3 181.7 102.3 C 204.1 102.3 223.6 116.2 233.2 136.7 C 242.7 124.8 257 117.1 272.8 117.1 C 295.2 117.1 314.3 132.4 321.9 154 C 330 142 342.9 134.4 357.7 134.4 C 375.8 134.4 391.6 146.3 398.7 164 L 440.7 164 C 447.9 186.5 452.2 210.9 452.2 236.3 Z  M 389.7 92.7 C 389.7 110.4 375.4 124.8 357.7 124.8 C 340 124.8 325.7 110.4 325.7 92.7 C 325.7 84.2 329.1 76.1 335.1 70 C 341.1 64 349.2 60.7 357.7 60.7 C 375.3 60.2 389.7 75 389.7 92.7 Z  M 310.5 69.3 C 310.5 79.3 306.6 89 299.5 96.1 C 292.4 103.2 282.8 107.1 272.8 107.1 C 262.8 107.1 253.1 103.2 246.1 96.1 C 239 89 235 79.3 235.1 69.3 C 235.1 48.4 252 31.5 272.8 31.5 C 293.6 31.5 310.4 48.4 310.5 69.3 Z  M 225.1 50.6 C 225.1 61.8 220.7 72.5 212.8 80.5 C 205 88.4 194.2 92.8 183.1 92.7 C 171.931 92.803 161.19 88.406 153.3 80.5 C 145.5 72.5 141 61.8 141.1 50.6 C 141 39.4 145.5 28.7 153.3 20.8 C 161.154 12.827 171.909 8.388 183.1 8.5 C 206.5 8.5 225.1 27.6 225.1 50.6 L 225.1 50.6 Z  M 118.2 90.3 C 118.2 107.1 104.4 121 87.7 121 C 71 121 57.1 107.1 57.1 90.3 C 57.1 73.6 71 59.7 87.7 59.7 C 104.4 59.7 118.2 73.6 118.2 90.3 L 118.2 90.3 Z  M 326.7 8 C 294.7 -6.3 259.9 -14 225.1 -14 C 87.7 -13.5 -24 98 -24 235.8 C -24 292.3 -4.9 347.3 30.4 391.8 C 35.2 415.8 31.9 440.6 20.9 462.2 C -1.1 504.8 89.6 476.1 123 464.1 C 248.5 520.6 395.9 464.1 452.2 338.2 C 508.5 212.4 452.2 64.5 326.7 8 L 326.7 8 Z  M 63.6 325.9 L 63.6 260.3 C 63.6 249.1 69.4 242.8 80 242.8 C 90.5 242.8 96.3 249.1 96.3 260.3 L 96.3 325.9 L 124.9 325.9 L 124.9 250.4 C 124.9 226.6 106.6 214.1 80 214.1 C 53.3 214.1 35 226.6 35 250.4 L 35 325.9 L 63.6 325.9 Z  M 193.1 242.8 C 208.9 242.8 219.5 253.1 219.5 271.3 C 219.5 289.5 208.9 299.8 193.1 299.8 C 177.2 299.8 166.6 289.5 166.6 271.3 C 166.6 253.1 177.2 242.8 193.1 242.8 Z  M 193.1 214.1 C 159.3 214.1 138 240.1 138 271.3 C 138 302.5 159.3 328.6 193.1 328.6 C 226.9 328.6 248.1 302.5 248.1 271.3 C 248.1 240.1 226.9 214.1 193.1 214.1 L 193.1 214.1 Z  M 322.3 216.8 L 322.3 282.3 C 322.3 293.6 318 299.8 307.5 299.8 C 297 299.8 291.8 293.6 291.8 282.3 L 291.8 216.8 L 261.8 216.8 L 261.8 289.5 C 261.8 316 281.5 328.6 303 328.6 C 316.4 328.6 328.1 323.2 336.4 310.2 C 346.4 323.2 358.1 328.6 371.5 328.6 C 393 328.6 412.7 316 412.7 289.5 L 412.7 216.8 L 382.7 216.8 L 382.7 282.3 C 382.7 293.6 377.6 299.8 367 299.8 C 356.5 299.8 352.3 293.6 352.3 282.3 L 352.3 216.8 L 322.3 216.8 Z ",fill:"rgb(255,255,255)"}})])])])])}),[],!1,null,null,null).exports,Re={props:{color:{type:String},bgColor:{type:String},sticky:{type:Boolean,default:!1}},data(){return{store:i.Z}},computed:{message(){const e=this.store.PARAMETERS.messageDurationValue,t=this.$lang.data[this.generateTimeUnitKey(e,this.store.PARAMETERS.messageDurationUnit)];return this.$premium&&now4real.config.widget.welcome_message?this.generateCustomMsg(now4real.config.widget.welcome_message,1e3,e,t):this.$lang.complete("k65"+(now4real.config.custom_auth.enabled?"JWT":""),{$N:e,$A:t})},customIcon(){return this.$premium&&now4real.config.widget.welcome_message_img_url?now4real.config.widget.welcome_message_img_url:null}},methods:{generateTimeUnitKey(e,t){return 1===e?{MINUTES:"k5",HOURS:"k7",DAYS:"k9",WEEKS:"k11",MONTHS:"k13",YEARS:"k15"}[t]:{MINUTES:"k5s",HOURS:"k7s",DAYS:"k9s",WEEKS:"k11s",MONTHS:"k13s",YEARS:"k15s"}[t]},generateCustomMsg(e,t,s,i){const n=e.substring(0,t);return(0,l.Xv)(n).replace(/&lt;(?:(?:(?!(&lt;|&gt;)).)+)href="((?!javascript:)[^"]*)"(?:(?:(?!(&lt;|&gt;)).)*)*&gt;((?:(?!&lt;).)+)&lt;\/a&gt;/gm,((e,t,s,i,n)=>`<a href="${s}" target="_blank" rel="noopener noreferrer nofollow ugc">${n}</a>`)).replace(/&lt;br&gt;/gm,(e=>"<br>")).replace(/{{\s*time\s*}}/gm,s).replace(/{{\s*timeUnit\s*}}/gm,i)},messageBubbleStyle(){return{backgroundColor:this.bgColor,color:this.color}}},components:{UserPic:O.Z,NowIcon:De}},Ne=(s(3914),(0,M.Z)(Re,(function(){var e=this,t=e._self._c;return t("div",{class:{sticky:e.sticky},attrs:{id:"welcome-container"}},[t("div",{staticClass:"message-list-item"},[t("div",{staticClass:"message-list-item-row-1 left-message-list-item-row-1"},[t("div",{staticClass:"message-sender-profile-img-container left-message-sender-profile-img-container"},[e.customIcon?t("img",{staticClass:"message-sender-profile-img message-sender-profile-img-left",attrs:{src:e.customIcon}}):t("now-icon",{staticClass:"message-sender-profile-img message-sender-profile-img-left"})],1),e._v(" "),t("div",{staticClass:"message-bubble left-message-bubble",style:e.messageBubbleStyle()},[t("div",{staticClass:"message-bubble-content",domProps:{innerHTML:e._s(e.message)}})])])])])}),[],!1,null,"2761d7f7",null).exports),He=s(2433);var Ue={props:{color:{type:String},bgColor:{type:String}},data(){return{store:i.Z,wantSticky:!1,forceByTimeout:!1,forceByMessage:!1,hided:!1}},computed:{sticky(){return this.wantSticky&&!this.forceInline},forceInline(){return this.forceByTimeout&&this.forceByMessage}},methods:{hide(){this.hided=!0},show(){this.hided=!1},makeSticky(){this.wantSticky=!0},makeInline(){this.wantSticky=!1}},created(){setTimeout((e=>{(0,k.Z)(C.s.Debug,"timeout reached"),this.forceByTimeout=!0}),2e4),setTimeout((e=>{let t,s,i=0;s=this.$watch(`store.${now4real.Subject.LIST_CHAT_MESSAGES}`,(e=>{if(s||(t=e.length?e[e.length-1].time:0,(0,k.Z)(C.s.Debug,"init",t)),s&&e.length){const n=e.filter((e=>e.time>t)).length;if(i+=n,(0,k.Z)(C.s.Debug,"msgsReceivedAccumulator",i,t),i>=10)(0,k.Z)(C.s.Debug,"count reached"),this.forceByMessage=!0,s&&s();else{const s=e[e.length-1].time;s>t&&(t=s)}}}),{immediate:!0})}),2e3)},components:{Portal:He.h_,WelcomeMsg:Ne}},Be=(0,M.Z)(Ue,(function(){var e=this,t=e._self._c;return e.hided?e._e():t("portal",{attrs:{to:"welcome-msg-sticky",slim:"",disabled:!e.sticky}},[t("welcome-msg",{attrs:{color:e.color,"bg-color":e.bgColor,sticky:e.sticky}})],1)}),[],!1,null,null,null).exports,Ve={name:"user-identicon",props:{user:{type:Object,default:null}},data(){return{}},mounted(){this.generateIdenticon()},methods:{generateIdenticon(){this.$refs.identicon.innerHTML=jdenticon.toSvg(this.user.id,16)}}},je=(s(235),(0,M.Z)(Ve,(function(){return(0,this._self._c)("span",{ref:"identicon",staticClass:"identicon-container",attrs:{title:this.$lang.data.k93}})}),[],!1,null,"2e81e75a",null).exports),Ge=s(2837),ze=s(344),Ke=s(9350),We={data(){return{error:!1}},methods:{onError(){(0,k.Z)(C.s.Debug,"error catched"),this.error=!0}}},Fe=(0,M.Z)(We,(function(){var e=this;return(0,e._self._c)("div",[e.error?e._t("error"):e._t("default",null,{error:e.onError})],2)}),[],!1,null,null,null).exports;var Ye={mixins:[m.Z],data(){return{store:i.Z,msg:null,outsideClickListener:e=>{const t=document.querySelector(".msg-options-menu");t&&!t.contains(e.target)&&this.$emit("clickOutside",this.msg)},escClickListener:e=>{if(27==(e.which||e.keyCode)){document.querySelector(".msg-options-menu")&&this.$emit("esc",this.msg)}},siteVerified:now4real._siteStatus>1}},methods:{show(e,t){(0,k.Z)(C.s.Debug,"show",t.clientX,t.clientY),this.msg=e,this.msg.isHidden=!!this.store.hiddenUsers[e.author.id],this.$nextTick((e=>{const s=document.getElementById("head-wrapper"),i=document.querySelector(".msg-options-menu"),n=document.querySelector(".chat-container"),o=Math.min(n.clientWidth-i.clientWidth-10,t.clientX),a=Math.max(15,Math.min(n.clientHeight-i.clientHeight-15,t.clientY-s.clientHeight));i.style.left=`${o}px`,i.style.top=`${a}px`,i.style.visibility="visible",i.style.opacity="1"})),setTimeout((()=>{window.addEventListener("click",this.outsideClickListener),document.addEventListener("touchstart",this.outsideClickListener),document.addEventListener("keydown",this.escClickListener)}),0)},hide(){if((0,k.Z)(C.s.Debug,"hide"),this.msg){const e=document.querySelector(".msg-options-menu");e.style.visibility="hidden",e.style.opacity="0",this.$nextTick((e=>{this.msg=null}))}setTimeout((()=>{window.removeEventListener("click",this.outsideClickListener),document.removeEventListener("touchstart",this.outsideClickListener),document.removeEventListener("keydown",this.escClickListener)}),0)},hideMsg(){this.$emit("hideMsg",this.msg)},showMsg(){this.$emit("showMsg",this.msg)},reportMsg(){this.$emit("reportMsg",this.msg)},deleteMsg(){this.$emit("deleteMsg",this.msg)},replyToMsg(){this.$emit("replyToMsg",this.msg)},muteUser(){this.$emit("muteUser",this.msg)}}},qe=(s(8544),(0,M.Z)(Ye,(function(){var e=this,t=e._self._c;return e.msg?t("div",[t("div",{staticClass:"msg-options-menu-mask"}),e._v(" "),t("div",{staticClass:"msg-options-menu-wrapper"},[t("div",{staticClass:"msg-options-menu"},[t("ul",[e.msg.deleted?e._e():t("li",{staticClass:"focus-el",attrs:{tabindex:"13"}},[t("button",{staticClass:"focus-cont",attrs:{title:e.$lang.data.k87,tabindex:"-1"},on:{click:e.replyToMsg}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z",fill:"currentColor"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k87))])])]),e._v(" "),!e.msg.deleted&&e.msg.isMine?t("li",{staticClass:"focus-el",attrs:{tabindex:"14"}},[t("button",{staticClass:"focus-cont",attrs:{title:e.$lang.data.k88,tabindex:"-1"},on:{click:e.deleteMsg}},[t("svg",{attrs:{viewBox:"0 0 24 24",width:"24",height:"24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k88))])])]):e._e(),e._v(" "),e.msg.isMine||e.moderator?e._e():t("li",{staticClass:"focus-el",attrs:{tabindex:"15"}},[e.msg.isHidden?t("button",{staticClass:"focus-cont",attrs:{title:e.$lang.data.k92,tabindex:"-1"},on:{click:e.showMsg}},[t("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M12 9a3 3 0 00-3 3 3 3 0 003 3 3 3 0 003-3 3 3 0 00-3-3m0 8a5 5 0 01-5-5 5 5 0 015-5 5 5 0 015 5 5 5 0 01-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k92))])]):t("button",{staticClass:"focus-cont",attrs:{title:e.$lang.data.k91,tabindex:"-1"},on:{click:e.hideMsg}},[t("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M11.83 9L15 12.16V12a3 3 0 00-3-3h-.17m-4.3.8l1.55 1.55c-.05.21-.08.42-.08.65a3 3 0 003 3c.22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53a5 5 0 01-5-5c0-.79.2-1.53.53-2.2M2 4.27l2.28 2.28.45.45C3.08 8.3 1.78 10 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.43.42L19.73 22 21 20.73 3.27 3M12 7a5 5 0 015 5c0 .64-.13 1.26-.36 1.82l2.93 2.93c1.5-1.25 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-4 .7l2.17 2.15C10.74 7.13 11.35 7 12 7z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k91))])])]),e._v(" "),!e.msg.isMine&&"BY_AI"!==e.msg.deleted&&e.siteVerified?t("li",{staticClass:"focus-el",attrs:{tabindex:"16"}},[t("button",{staticClass:"focus-cont",attrs:{title:e.$lang.data.k90,tabindex:"-1"},on:{click:e.reportMsg}},[t("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M13 14h-2V9h2m0 9h-2v-2h2M1 21h22L12 2 1 21z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k90))])])]):e._e(),e._v(" "),e.msg.deleted||e.msg.isMine||!e.moderator?e._e():t("li",{staticClass:"focus-el",attrs:{tabindex:"17"}},[t("button",{staticClass:"focus-cont highlighted",attrs:{title:e.$lang.data.k88,tabindex:"-1"},on:{click:e.deleteMsg}},[t("svg",{attrs:{viewBox:"0 0 24 24",width:"24",height:"24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k88))])])]),e._v(" "),e.moderator&&!e.msg.isMine?t("li",{staticClass:"focus-el",attrs:{tabindex:"18"}},[t("button",{staticClass:"focus-cont highlighted",attrs:{title:e.$lang.data.k89,tabindex:"-1"},on:{click:e.muteUser}},[t("svg",{attrs:{viewBox:"0 0 24 24",width:"24",height:"24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M10 4a4 4 0 00-4 4 4 4 0 004 4 4 4 0 004-4 4 4 0 00-4-4m7.5 9C15 13 13 15 13 17.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5M10 14c-4.42 0-8 1.79-8 4v2h9.5a6.5 6.5 0 01-.5-2.5 6.5 6.5 0 01.95-3.36c-.63-.08-1.27-.14-1.95-.14m7.5.5c1.66 0 3 1.34 3 3 0 .56-.15 1.08-.42 1.5L16 14.92c.42-.27.94-.42 1.5-.42M14.92 16L19 20.08c-.42.27-.94.42-1.5.42-1.66 0-3-1.34-3-3 0-.56.15-1.08.42-1.5z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k89))])])]):e._e()])])])]):e._e()}),[],!1,null,null,null).exports),Je=s(3169),Xe={data(){return{animate:!0}}},Qe=(s(9933),(0,M.Z)(Xe,(function(){var e=this,t=e._self._c;return t("svg",{ref:"animatedSvg",class:{animate:e.animate},staticStyle:{width:"24px",height:"24px"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[t("rect",{staticClass:"bar1",attrs:{x:"3",y:"8",width:"4",height:"16"}}),e._v(" "),t("rect",{staticClass:"bar2",attrs:{x:"10",y:"2",width:"4",height:"22"}}),e._v(" "),t("rect",{staticClass:"bar3",attrs:{x:"17",y:"18",width:"4",height:"6"}})])}),[],!1,null,null,null).exports);const et=(0,u.gH)((0,u.xr)(a.v.COLOR_A),.78),tt=(0,u.gH)((0,u.xr)(a.v.COLOR_A),-.78);var st={mixins:[m.Z,Je.Z,f],data(){return{store:i.Z,submitted:!1,openState:!1,seeResultsMode:!1,viewOnlyMode:!1,poll:null,pollID:null,voted:null,answers:[],answerPicked:null,pollQuestion:null,loginUnwatcher:null,logoutUnwatcher:null,signInLnk:null,signInBtn:null,CHECK_DELAY:1e3}},computed:{votes(){const e=this.poll?.votesCount;return`${e} ${this.$lang.data[""+("1"===e?"k167":"k167s")]}`},seeResultsActive(){return(this.moderator||this.guest)&&!this.voted&&!this.seeResultsMode&&!this.viewOnlyMode&&this.store.pollState===this.pollState.Open},hidden(){const e=this.store.PARAMETERS?.chatStatus;return e===r.Z.DISABLED_BY_ADMIN||e===r.Z.DISABLED_BY_MODERATOR},pollPreviewStyle(){const e=this.store.pollState===this.pollState.Open;return{backgroundColor:e?tt:et,color:e?et:tt}},pollIconColor(){return this.store.pollState===this.pollState.Open?tt:et},pollIconBgColor(){return this.store.pollState===this.pollState.Open?et:tt},pollIconWrapperStyle(){return{backgroundColor:this.pollIconBgColor,fill:this.pollIconColor}}},created(){this.subscribe(),this.handleSignIn()},methods:{open(){this.openState||(this.openState=!0,this.subscribePollDetails())},close(){this.openState&&(this.openState=!1,this.seeResultsMode=!1,this.poll&&!this.poll.closed&&!this.voted&&this.answers.some((e=>!!e))&&this.updateAnswers(Array(this.poll.answers.length).fill(!1)),this.unsubscribePollDetails(),this.loginUnwatcher?.(),this.loginUnwatcher=null)},subscribe(){setTimeout((e=>{const t=now4real.Subject.POLL_STATUS;now4real.subscribe(t,(e=>{(0,k.Z)(C.s.Debug,`${t} upd`,e);const s=e.data;s?(this.store.pollState=s.closed?this.pollState.Closed:this.pollState.Open,this.pollQuestion=s.question):(this.store.pollState=this.pollState.Empty,this.pollQuestion=null)})).then((e=>{this.store.pollState=this.pollState.Empty}))}),this.CHECK_DELAY)},handleSignIn(){const e=(e,t)=>t?this.$lang.complete(e,{"<a>":`<a href="${t}" target="_parent">`}):this.$lang.complete(e,{"<a>":"","</a>":""}),t=now4real.config.custom_auth;if(t.enabled){const s=this.authenticated&&!a.v.CHAT_POST;this.viewOnlyMode=s,s||(this.signInLnk=e("k170",t.signin_url))}else this.signInBtn=e("k170")},handlePollVote(){if(null===this.voted){const e=e=>{(0,k.Z)(C.s.Debug,"pollVoteFetcher",e),now4real.getPollVote().then((e=>{let{vote:t}=e;this.store.pollState!==this.pollState.Empty&&(this.voted=t.length>0,this.updateAnswers(this.poll.answers.map(((e,s)=>t.includes(s)))),this.logoutUnwatcher=this.$watch("authenticated",(e=>{e||(this.resetVotes(),this.seeResultsMode=!1,this.logoutUnwatcher?.(),this.logoutUnwatcher=null)})),this.voted||this.$nextTick((e=>{document.querySelector("#poll-answers li:first-child .focus-cont")?.focus()})))})).catch((e=>{(0,k.Z)(C.s.Error,"getPollVote error",e)}))};this.authenticated?e(!1):this.loginUnwatcher||(this.loginUnwatcher=this.$watch("authenticated",(t=>{t&&(e(!0),this.loginUnwatcher?.(),this.loginUnwatcher=null)})))}},resetVotes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,k.Z)(C.s.Debug,"resetVotes",e),this.voted=null,this.answerPicked=null,this.updateAnswers(e)},onSignin(){this.submitted=!0,now4real.login().then((e=>{this.submitted=!1})).catch((e=>{(0,k.Z)(C.s.Error,"login error",e);const t=e.code;if(t===now4real.ErrorCode.ALREADY_STARTED)return;const s=this.$lang.data[t===now4real.ErrorCode.ABORTED?"k79":"k1"];this.$toast(s,{parent:".chat-container",id:"login-error",className:"toast-alert"}),this.submitted=!1}))},onAnswerClick(e){if((0,k.Z)(C.s.Debug,"onAnswerClick",e,this.answers),!this.submitted)if(this.poll.multipleChoice){const t=this.answers;t[e]?t.splice(e,1,!1):t.splice(e,1,!0)}else{const t=Array.from({length:this.answers.length},((t,s)=>s===e&&!this.answers[e]));this.updateAnswers(t),this.answerPicked=this.poll.answers[e].text,this.onSendVote()}},onRevokeVote(){(0,k.Z)(C.s.Debug,"onRevokeVote"),this.sendVote([]).then((e=>{this.voted=!1,this.updateAnswers(Array(this.poll.answers.length).fill(!1)),this.answerPicked=null,this.$nextTick((e=>{document.querySelector("#poll-answers li:first-child .focus-cont")?.focus()}))}))},onSendVote(){(0,k.Z)(C.s.Debug,"onSendVote",this.answers);const e=this.answers.reduce(((e,t,s)=>(t&&e.push(s),e)),[]);this.sendVote(e).then((e=>{this.voted=!0}))},sendVote(e){return this.submitted=!0,now4real.sendVote(e).then((e=>{this.submitted=!1})).catch((e=>{throw(0,k.Z)(C.s.Error,"sendVote error",e),this.$toast(this.$lang.data.k1,{parent:".chat-container",id:"send-vote-error",className:"toast-alert"}),this.submitted=!1,e}))},onSeeResults(){this.seeResultsActive&&(this.updateAnswers(Array(this.answers.length).fill(!1)),this.seeResultsMode=!0)},updateAnswers(e){this.answers.splice(0,this.answers.length,...e)},subscribePollDetails(){const e=now4real.Subject.POLL;now4real.subscribe(e,(t=>{(0,k.Z)(C.s.Debug,`${e} upd`,t);const s=t.data;s?(this.poll=this.decoratePoll(s),(!this.pollID||!s.closed&&s.startDate!==this.pollID||s.closed&&!this.voted&&(this.answers.some((e=>!!e))||this.seeResultsMode))&&(this.resetVotes(Array(s.answers.length).fill(!1)),this.seeResultsMode=!1,this.pollID=s.startDate),this.handlePollVote()):(this.close(),this.logoutUnwatcher?.(),this.logoutUnwatcher=null)}))},decoratePoll(e){if(e){const t=Math.max(...e.answers.map((e=>e.percentage))),s=e.answers.map((e=>({...e,normalizedPercentage:t>0?e.percentage/t*100:0})));e.answers=s}return e},unsubscribePollDetails(){this.poll=null,now4real.unsubscribe(now4real.Subject.POLL)}},components:{Modal:S.Z,Button:x.Z,Spinner:P.Z,PollIcon:Qe}},it=st,nt=(s(1009),(0,M.Z)(it,(function(){var e=this,t=e._self._c;return e.store.pollState!==e.pollState.Empty&&e.store.pollState!==e.pollState.Checking?t("div",{class:{hidden:e.hidden},attrs:{id:"poll-container"}},[t("transition",{attrs:{name:"fade",appear:""}},[t("div",{style:e.pollPreviewStyle,attrs:{id:"poll-preview",title:e.$lang.data[e.store.pollState===e.pollState.Open?"k165":"k165Closed"]},on:{click:e.open}},[t("div",{staticClass:"icon-wrapper",style:e.pollIconWrapperStyle},[t("PollIcon")],1),e._v(" "),t("div",{staticClass:"question",attrs:{title:e.pollQuestion}},[e._v(e._s(e.pollQuestion))]),e._v(" "),t("Button",{key:e.store.pollState,attrs:{"button-class":"btn-open-poll","bg-color":e.pollIconBgColor,color:e.pollIconColor},on:{click:e.open,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.open.apply(null,arguments)}}},[e._v(e._s(e.$lang.data[e.store.pollState===e.pollState.Open?"k171":"k173"]))])],1)]),e._v(" "),e.openState?t("modal",{attrs:{id:"poll-modal"},on:{close:e.close}},[t("template",{slot:"title"},[e._v("\n            "+e._s(e.$lang.data.k165)+"\n        ")]),e._v(" "),e.poll?t("template",{slot:"header"},[t("p",{staticClass:"question",attrs:{title:e.poll.question}},[e._v(e._s(e.poll.question))])]):e._e(),e._v(" "),t("template",{slot:"body"},[e.poll?t("div",[!e.authenticated||e.voted||e.store.pollState!==e.pollState.Open||e.seeResultsMode||e.viewOnlyMode||e.poll.multipleChoice?!e.authenticated||e.voted||e.store.pollState!==e.pollState.Open||e.seeResultsMode||e.viewOnlyMode||!e.poll.multipleChoice?e.authenticated||e.store.pollState===e.pollState.Closed?t("div",[t("ul",{attrs:{id:"results"}},e._l(e.poll.answers,(function(s,i){return t("li",{key:s.text},[t("div",{staticClass:"left"},[t("span",{staticClass:"percentage"},[e._v(e._s(s.percentage)+"%")]),e._v(" "),e.answers[i]?t("svg",{class:"check",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}})]):e._e()]),e._v(" "),t("div",{staticClass:"right"},[t("div",{staticClass:"text",attrs:{title:s.text}},[e._v(e._s(s.text))]),e._v(" "),t("span",{staticClass:"bar",style:{width:s.normalizedPercentage+"%"}})])])})),0)]):e._e():t("div",[t("ul",{attrs:{id:"poll-answers"}},e._l(e.poll.answers,(function(s,i){return t("li",{key:s.text,staticClass:"focus-el",attrs:{tabindex:13+i},on:{click:function(t){return e.onAnswerClick(i)},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onAnswerClick(i)}}},[t("div",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("input",{staticClass:"check",attrs:{type:"checkbox",name:e.poll.answer,disabled:e.submitted,tabindex:"-1"},domProps:{checked:e.answers[i]}}),e._v(" "),t("div",{staticClass:"text",attrs:{title:s.text,tabindex:"-1"}},[e._v(e._s(s.text))])])])})),0),e._v(" "),t("Button",{attrs:{disabled:!e.answers.includes(!0)||e.submitted,submitted:e.submitted,tabindex:"23"},on:{click:e.onSendVote,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSendVote.apply(null,arguments)}}},[e._v(e._s(e.$lang.data.k171))])],1):t("div",[t("ul",{attrs:{id:"poll-answers"}},e._l(e.poll.answers,(function(s,i){return t("li",{key:s.text,staticClass:"focus-el",attrs:{tabindex:13+i},on:{click:function(t){return e.onAnswerClick(i)},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onAnswerClick(i)}}},[t("div",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.answerPicked,expression:"answerPicked"}],staticClass:"radio",attrs:{type:"radio",name:e.poll.question,disabled:e.submitted,tabindex:"-1"},domProps:{value:s.text,checked:e._q(e.answerPicked,s.text)},on:{change:function(t){e.answerPicked=s.text}}}),e._v(" "),t("div",{staticClass:"text",attrs:{title:s.text,tabindex:"-1"}},[e._v(e._s(s.text))])])])})),0)])]):t("Spinner")],1),e._v(" "),e.poll?t("template",{slot:"footer"},[e.authenticated||e.store.pollState!==e.pollState.Open?e.voted&&e.store.pollState===e.pollState.Open&&e.authenticated&&!e.viewOnlyMode?t("Button",{attrs:{disabled:e.submitted,submitted:e.submitted,tabindex:"24"},on:{click:e.onRevokeVote,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onRevokeVote.apply(null,arguments)}}},[e._v(e._s(e.$lang.data.k172))]):e.voted||e.store.pollState!==e.pollState.Open||!e.seeResultsMode||e.viewOnlyMode?e.store.pollState===e.pollState.Closed?t("p",{attrs:{id:"final-results"}},[e._v(e._s(e.$lang.data.k169))]):e._e():t("Button",{attrs:{disabled:e.submitted,tabindex:"24"},on:{click:function(t){e.seeResultsMode=!1},keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.seeResultsMode=!1}}},[e._v(e._s(e.$lang.data.k171))]):t("div",{attrs:{id:"signin-to-vote"}},[e.signInLnk?t("div",{domProps:{innerHTML:e._s(e.signInLnk)}}):e.signInBtn?t("Button",{attrs:{tabindex:"24"},on:{click:e.onSignin,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSignin.apply(null,arguments)}}},[e._v(e._s(e.signInBtn))]):e._e()],1),e._v(" "),e.moderator||e.guest||e.seeResultsMode||e.voted||e.store.pollState===e.pollState.Closed?t("p",{class:{underlined:e.seeResultsActive},attrs:{id:"votes-stats"},on:{click:e.onSeeResults}},[t("span",[e._v(e._s(e.votes))]),e._v(" "),t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M3 22V8.814h3.942V22H3m6.898 0V3.162h3.942V22H9.898m6.898 0v-6.187l3.942.017V22z"}})])]):e._e()],1):e._e()],2):e._e()],1):e._e()}),[],!1,null,null,null)),ot=nt.exports;const at=(0,u.gH)((0,u.xr)(a.v.COLOR_A),.87),rt=(0,u.gH)((0,u.xr)(a.v.COLOR_A),.78),lt="#34495e";var ct={mixins:[p.Z,m.Z,v.Z,f],data(){return{store:i.Z,loading:!0,chatSubject:now4real.Subject.LIST_CHAT_MESSAGES,EMOJI_PICKER:r.Z.EMOJI_PICKER,GIF_PICKER:r.Z.GIF_PICKER,activePicker:r.Z.EMOJI_PICKER,pickerOpen:!1,LOGIN_INTENT:"LOGIN",POST_INTENT:"POST",REPORT_INTENT:"REPORT",HIDE_INTENT:r.Z.HIDE,SHOW_INTENT:r.Z.SHOW,TEXT_TYPE:"TEXT",GIF_TYPE:"GIF",scope:a.v.SCOPE,customAuth:now4real.config.custom_auth,userIdenticon:now4real.config.widget.user_identicon,standardAuthDisabled:now4real._standardAuthDisabled,colorA:a.v.COLOR_A,colorALighter:rt,colorC:lt,message:"",lines:1,chars:0,msgOptions:null,replyTo:null,suggestionsList:[],highlightColor:at,edge:(0,n.un)(),sending:!1,stopping:!1,scrollTop:void 0,scrollToEnd:!0,lastListMouseEvent:null,k1:100,lastListMouseDownEvent:null,lastNavigateEvent:null,consentGiventOnThisSession:!1,linkDomainsMatcherRegex:null,pageProtocol:"http:",signInRequired:!1,viewOnly:!1,signInLink:null,disabled:!1,startedDisabled:!1,forceMobile:!1,welcomeMessageEnabled:!0,welcomeMessageInline:!0,welcomeMessageSticked:!1,welcomeMessageForcedInline:!1}},created(){const e=now4real.config.target;if(this.customAuth.enabled){const e="AUTHENTICATED"===this.store.LOGIN_STATUS.status;this.signInRequired=!e&&a.v.CHAT_VIEW&&!a.v.CHAT_POST,this.viewOnly=e&&a.v.CHAT_VIEW&&!a.v.CHAT_POST,this.customAuth.signin_url?this.signInLink=this.$lang.complete("k85",{"<a>":`<a href="${this.customAuth.signin_url}" target="_parent">`}):this.signInLink=this.$lang.complete("k85",{"<a>":"","</a>":""})}else this.viewOnly=this.standardAuthDisabled;a.v.PAGE_COUNTER_VIEW||a.v.SITE_COUNTER_VIEW||(this.store.PARAMETERS.chatStatus===r.Z.DISABLED_BY_ADMIN?(this.disabled=this.$lang.data.k83,this.startedDisabled=!0):this.store.PARAMETERS.chatStatus===r.Z.DISABLED_BY_MODERATOR&&(this.disabled=this.$lang.data.k84,this.startedDisabled=!0)),this.computelinkEnabledDomains(),a.v.CHAT_VIEW&&(this.startedDisabled||this.store.containerMode||!now4real.config.widget.chat_bubbles||e===r.Z.WIDGET||(e===r.Z.API_AND_WIDGET||e===r.Z.DEMO)&&this.store.notificatorBubbleClosed)?now4real.subscribe(this.chatSubject,(()=>{})).then((e=>{this.store[this.chatSubject]=now4real[this.chatSubject],this.loading=!1})).catch((e=>{e&&e.code===now4real.ErrorCode.INVALID_CALL&&(this.loading=!1)})):this.loading=!1,b.Z.$on(r.Z.TAB_SWITCH_EVENT,((e,t)=>{t===r.Z.CHAT_TAB&&this.closePickers(!0)})),b.Z.$on(r.Z.MINIMIZE_EVENT,(e=>{this.closePickers(!0)})),e===r.Z.API_AND_WIDGET&&(this.suggestionsList=now4real._suggestions||[],b.Z.$on(r.Z.API_SUGGESTIONS_EVENT,(e=>{this.suggestionsList=e||[]}))),this.$watch("store.PARAMETERS",(e=>{if(e){const t=e.chatStatus;if(t===r.Z.DISABLED_BY_ADMIN||t===r.Z.DISABLED_BY_MODERATOR?(this.$refs.input?.clear(),this.disabled=this.$lang.data[""+(t===r.Z.DISABLED_BY_ADMIN?"k83":"k84")],this.closePickers(),this.hideWelcomeMessage(),this.abortReplyToMessage()):t===r.Z.ENABLED&&(this.disabled=!1,this.startedDisabled?this.viewOnly=!0:this.showWelcomeMessage()),e.gifsStatus===r.Z.DISABLED){const e=this.$refs.rcPkr,t=e?.getOpenPicker();t===this.GIF_PICKER&&(e.close(),this.pickerOpen=!1),this.activePicker=this.EMOJI_PICKER}}})),this.forceMobile=this.store.containerMode&&navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile|Opera Mini)/),this.welcomeMessageEnabled=!(this.viewOnly||this.$premium&&""===now4real.config.widget.welcome_message),this.$watch("store.LOGIN_STATUS",((e,t)=>{e&&"NOT_AUTHENTICATED"===e.status&&this.closePickers(!0)})),this.$watch(`store.${this.chatSubject}`,(e=>{e&&this.msgOptions&&!this.findMessage(e,this.msgOptions)&&this.hideMsgOptions(),this.$refs.list&&this.scrollToEnd&&!this.msgOptions&&this.$nextTick().then((e=>{(0,h.Og)(this.$refs.list)}))}))},mounted(){this.signInRequired||this.viewOnly||this.startedDisabled||(this.listenVirtualKeyboardEvents(),this.listenChatListResize()),this.initialScrollToBottom()},methods:{hideWelcomeMessage(){this.$refs.welcomeMsg&&this.$refs.welcomeMsg.hide()},showWelcomeMessage(){this.$refs.welcomeMsg&&this.$refs.welcomeMsg.show()},onGifReady(){(0,k.Z)(C.s.Debug,"onGifReady",this.scrollToEnd),this.scrollToEnd&&!this.msgOptions&&this.scrollToBottom()},sendGif(e){(0,k.Z)(C.s.Debug,"sendGif",e),this.send(e,this.GIF_TYPE)},computelinkEnabledDomains(){let e=[],t=now4real._parentOrigin;t&&!t.startsWith("file://")&&(e.push(t.replace(/https?:\/\//,"")),this.pageProtocol=(0,d.e)(t).protocol);let s=now4real.siteContext;"shared-public-sandbox.test"!==s&&e.push(s);let i=now4real.groupContext;i&&e.push(i),e=e.filter(((t,s)=>e.indexOf(t)==s)),(0,k.Z)(C.s.Debug,"domains",e),e.length&&(this.linkDomainsMatcherRegex=e.map((e=>/:\d{1,5}$/.test(e)?(0,l.hr)(e):(0,l.hr)(e)+"(:(80|443))?")).join("|"))},isScrolledToBottom:h.N2,scrollToBottom(){(0,h.Og)(this.$refs.list),this.scrollTop=this.$refs.list.scrollTop,this.scrollToEnd=!0},listenVirtualKeyboardEvents(){h.i4.init({recentlyFocusedTimeoutDuration:3e3,el:this.$refs.input.$el}),h.i4.on("virtualKeyboardVisible",(()=>{this.$emit("virtualKeyboardVisibilityChange",!0)})),h.i4.on("virtualKeyboardHidden",(()=>{this.$emit("virtualKeyboardVisibilityChange",!1)}))},wheel(e){(0,k.Z)(C.s.Debug,"Chat list wheel",e),this.lastListMouseEvent=(new Date).getTime()},touchmove(e){(0,k.Z)(C.s.Debug,"Chat list touchmove",e),this.lastListMouseEvent=(new Date).getTime()},keydown(e){const t=e.which||e.keyCode;(0,k.Z)(C.s.Debug,"Chat list keydown",e,t),38!==t&&40!==t||(this.lastListMouseEvent=(new Date).getTime())},mousedown(e){(0,k.Z)(C.s.Debug,"Chat list mousedown",e),this.lastListMouseDownEvent=(new Date).getTime()},mouseup(e){(0,k.Z)(C.s.Debug,"Chat list mouseup",e),this.lastListMouseDownEvent=null},listenChatListResize(){const e=()=>{const e=this.$refs.list;this.oldListHeight=e.clientHeight;new ResizeObserver((t=>{e.clientHeight!==this.oldListHeight&&(this.oldListHeight=e.clientHeight,(0,k.Z)(C.s.Debug,"Chat list resized",this.scrollToEnd),this.scrollToEnd&&!this.msgOptions&&(0,h.Og)(e))})).observe(e)};if(this.ready)e();else{const t=this.$watch("ready",(s=>{s&&(t(),e())}))}},initialScrollToBottom(){const e=()=>{this.$nextTick((e=>{this.$refs.list&&this.scrollToEnd&&this.$nextTick().then((e=>{(0,h.Og)(this.$refs.list)}))}))};if(this.ready)e();else{const t=this.$watch("ready",(s=>{s&&(t(),e())}))}},onScroll(e){const t=(new Date).getTime();this.lastNavigateEvent&&t-this.lastNavigateEvent<=this.k1?((0,k.Z)(C.s.Debug,"Navigate scroll"),this.lastNavigateEvent=null,this.scrollToEnd=(0,h.N2)(this.$refs.list)):!this.lastListMouseDownEvent&&(!this.lastListMouseEvent&&!this.edge||this.lastListMouseEvent&&t-this.lastListMouseEvent>this.k1)?((0,k.Z)(C.s.Debug,"Chat list scrolled after resized"),this.scrollToEnd&&!this.msgOptions&&(0,h.Og)(this.$refs.list),this.$refs.list&&((0,h.FX)(this.$refs.list)?this.makeWelcomeMsgSticky():(this.welcomeMessageSticked=!1,this.makeWelcomeMsgInline()))):((0,k.Z)(C.s.Debug,"Chat list scrolled"),this.makeWelcomeMsgInline(),this.scrollToEnd=(0,h.N2)(this.$refs.list)),this.scrollTop=this.$refs.list.scrollTop},onWrite(e,t,s){this.message=e,this.lines=t,this.chars=s,this.$refs.typing.write(e)},onEnter(){this.sendDisabled||this.send()},send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.TEXT_TYPE;(0,k.Z)(C.s.Debug,"send call",this.sending,e,t);const s=e||this.message;if(this.customAuth.enabled&&!this.consentGiventOnThisSession&&!this.authenticatedUser.consentGiven&&(!this.$whiteLabel||now4real.config.widget.consent_message))return(0,k.Z)(C.s.Debug,"legal agreement required"),void this.$refs.jwtModal.show(this.POST_INTENT,{content:s,typeHint:t});if(this.sending)return;this.sending=!0,this.$refs.input&&this.$refs.input.disable();let i=this.replyTo?{replyTo:this.replyTo.id}:null;this.$refs.typing.write(""),(0,c.XD)(["DISCONNECTED"],20,(e=>now4real.post(s,i))).then((e=>{let{suggestions:s,waitPeriod:i}=e,n=this.$refs.stop,o=this.$refs.input;const a=t===this.TEXT_TYPE;a&&(this.message="",this.lines=1,this.chars=0),o&&a&&o.clear(),this.$refs.rcPkr?.storeRecents(),n&&o&&0!==i&&(this.stopping=!0,n.enable(i),o.disableEnter()),this.sending=!1,this.replyTo=null,o&&(o.enable(),this.store.isMobile||o.focus()),this.suggestionsList=s||[],this.$toast.removeToastsById("post-error")})).catch((e=>{let i=this.$refs.stop,n=this.$refs.input;if(e.code===now4real.ErrorCode.NOT_AUTHENTICATED)this.showLoginModal(this.POST_INTENT,{content:s,typeHint:t});else{let t;switch((0,k.Z)(C.s.Error,"Post error",e),e.code){case now4real.ErrorCode.CHAT_DISABLED:t="k81";break;case now4real.ErrorCode.TOO_FREQUENT:t="k77";break;case now4real.ErrorCode.BLOCKED:t="k78";break;case now4real.ErrorCode.CHATBOT:t="k82";break;case now4real.ErrorCode.USER_MUTED:t="k2";break;default:t="k1"}const s="k78"===t,o=s?this.$whiteLabel?now4real.config.widget.moderation_info_url?this.$lang.complete(t,{"<a>":`<a href="${now4real.config.widget.moderation_info_url}" target="_blank" rel="noopener noreferrer nofollow">`}):this.$lang.transform(t,/\s*<a>.*<\/a>/,""):this.$lang.complete(t,{"<a>":'<a href="https://now4real.com/message-blocked/" target="_blank" rel="noopener noreferrer nofollow">'}):this.$lang.data[t],a=s?8e3:5e3;this.$toast(o,{parent:".chat-container",id:"post-error",className:"toast-alert",duration:a}),i&&n&&(this.stopping=!0,i.enable(2e3),n.disableEnter())}this.sending=!1,n&&(n.enable(),this.store.isMobile||n.focus())}))},openEmojiPicker(){this.makeWelcomeMsgInline(),this.welcomeMessageForcedInline=!0,this.$refs.rcPkr.open(this.EMOJI_PICKER),this.activePicker=this.EMOJI_PICKER,this.pickerOpen=!0,this.store.isMobile||this.$nextTick().then((()=>{this.$refs.input&&this.$refs.input.focus()}))},openGifPicker(){this.makeWelcomeMsgInline(),this.welcomeMessageForcedInline=!0,this.$refs.rcPkr.open(this.GIF_PICKER),this.activePicker=this.GIF_PICKER,this.pickerOpen=!0,this.store.isMobile||this.$nextTick().then((()=>{this.$refs.input&&this.$refs.input.focus()}))},closePickers(e){this.$refs.rcPkr.close(e),this.pickerOpen=!1},navigate(e){if(e&&document.getElementById(e)){(0,k.Z)(C.s.Debug,"navigate",e),this.lastNavigateEvent=Date.now();const t=document.getElementById(e);t.scrollIntoView({block:"nearest",inline:"center"});t.parentElement.parentElement.style.backgroundColor=this.highlightColor,setTimeout((t=>{const s=document.getElementById(e);if(s){let e=s.parentElement.parentElement;e&&(e.style.backgroundColor="")}}),2e3)}},onCitedMsgHover(e,t){document.getElementById(t.id)&&(e.style.cursor="pointer")},onCitedMsgBlur(e){e.style.cursor=""},messageBubbleClick(e,t){(0,k.Z)(C.s.Debug,"messageBubbleClick",t.clientX,t.clientY),!this.store.isMobile&&!this.forceMobile||this.viewOnly||e.deleted&&e.isMine||this.customAuth.enabled&&this.signInRequired||this.showMsgOptions(e,t)},showMsgOptions(e,t){(0,k.Z)(C.s.Debug,"showMsgOptions",t.clientX,t.clientY),this.msgOptions=e,this.$refs.msgOptions.show(e,t)},hideMsgOptions(){(0,k.Z)(C.s.Debug,"hideMsgOptions"),this.msgOptions=null,this.$refs.msgOptions.hide()},muteUser(e){this.hideMsgOptions(),this.$refs.muteModal.show(e.author)},reportMsg(e){this.hideMsgOptions(),this.authenticated?this.$refs.reportModal.show(e):this.showLoginModal(this.REPORT_INTENT,g(e))},hideMsg(e){this.hideMsgOptions(),this.authenticated?this.$refs.hideModal.show(e,this.HIDE_INTENT):this.showLoginModal(this.HIDE_INTENT,g(e))},showMsg(e){this.hideMsgOptions(),this.$refs.hideModal.show(e,this.SHOW_INTENT)},deleteMsg(e){this.hideMsgOptions(),now4real.deleteMessage(e.id).catch((e=>{this.$toast(this.$lang.data.k1,{parent:".chat-container",id:"delete-error",className:"toast-alert"})}))},replyToMsg(e){this.hideMsgOptions(),this.$refs.input&&e&&(this.replyTo=g(e),this.replyTo.formattedContent=this.formatMessage(e,!0),this.replyTo.citedMessageStyle=this.citedMessageStyle(!0),this.replyTo.citedMessageContentStyle=this.citedMessageContentStyle(!0),this.$refs.input.focus())},abortReplyToMessage(){(0,k.Z)(C.s.Debug,"abortReplyToMessage"),this.replyTo=null},formatTime(e){let t=this.$lang.data.k4;return 12!==t&&24!==t&&(t=24),(0,o.mr)(e,t)},formatMessageModerated(e){let t;switch(e.deleted){case"BY_AUTHOR":t=e.isMine?"k67":"k68";break;case"BY_MODERATOR":t="k69";break;case"BY_ADMINISTRATOR":t="k70";break;case"BY_NOW4REAL":t="k71";break;case"BY_AI":t="k72";break;default:t="k73"}return this.$lang.data[t]},formatMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=(0,l.Xv)(e.message);if(!t&&this.linkDomainsMatcherRegex)try{const t=e.author.role===r.Z.MODERATOR||e.author.role===r.Z.GUEST,i="ALL"===this.store.PARAMETERS.clickableLinks;s=(0,l.Jr)(s,{pageProtocol:this.pageProtocol,domainRegex:t||i?null:this.linkDomainsMatcherRegex})}catch(e){(0,k.Z)(C.s.Error,"link parse error",e)}return s},insertEmoji(e){this.$refs.input?.insertText(e)},onAuthModalAuth(e,t,s){if(this.closePickers(!0),e.persistent||this.$toast(this.$lang.data.k80,{parent:".chat-container",id:"login-not-persistent",className:"toast-warn",duration:6e3}),s){const i=e.user,n=i&&i.id,o=i&&i.role===r.Z.MODERATOR;if(t===this.POST_INTENT){this.$refs.input&&setTimeout((()=>{this.send(s.content,s.typeHint)}),500)}else if(t===this.REPORT_INTENT){const e=s.author.id;n&&n!==e&&setTimeout((()=>{this.reportMsg(s)}),500)}else if(t===this.HIDE_INTENT){const e=s.author.id,t=this.store.hiddenUsers;!n||n===e||t[e]||o||setTimeout((()=>{this.hideMsg(s)}),500)}}},onAuthModalError(e){const t=e.code;if(t===now4real.ErrorCode.ALREADY_STARTED)return;const s=this.$lang.data[t===now4real.ErrorCode.ABORTED?"k79":"k1"];this.$toast(s,{parent:".chat-container",id:"login-error",className:"toast-alert"})},showLoginModal(e,t){now4real.login().then((s=>{this.onAuthModalAuth(s,e,t)})).catch((e=>{(0,k.Z)(C.s.Error,"login error",e),this.onAuthModalError(e)}))},onStopCompletion(){this.stopping=!1,this.$refs.input&&this.$refs.input.enableEnter()},handleScrollKeeper(){this.scrollTop&&setTimeout((e=>{this.$refs.list.scrollTop=this.scrollTop}),100)},handleInputAreaFocus(){this.store.isMobile||this.store.containerMode||this.store.openAutomatically||setTimeout((e=>{this.store.openedFrameConfig&&((0,k.Z)(C.s.Debug,"focusing input"),this.$refs.input?.focus())}),800)},onJwtModalClose(){this.$refs.jwtModal.hide(),this.$refs.input&&(this.$refs.input.focus(),this.$refs.input.enable())},onJwtModalAccepted(e,t){this.$refs.jwtModal.hide(),this.consentGiventOnThisSession=!0,this.$refs.input&&(this.$refs.input.enable(),t&&setTimeout((()=>{this.send(t.content,t.typeHint)}),500))},messageBubbleStyle(e){return{backgroundColor:e?a.v.COLOR_A:at,color:e?a.v.COLOR_B:lt}},citedMessageStyle(e){return{backgroundColor:e?a.v.COLOR_A:at,borderLeft:`.25em solid ${e?at:a.v.COLOR_A}`,color:e?at:a.v.COLOR_A}},citedMessageContentStyle(e){return{color:e?a.v.COLOR_B:lt}},findMessage(e,t){for(let s=0;s<e.length;s++){let i=e[s];if(i.id===t.id)return i}return null},makeWelcomeMsgInline(){this.welcomeMessageEnabled&&!this.welcomeMessageInline&&this.$refs.welcomeMsg&&((0,k.Z)(C.s.Debug,"make inline"),this.$refs.welcomeMsg.makeInline(),this.welcomeMessageInline=!0)},makeWelcomeMsgSticky(){this.welcomeMessageEnabled&&!this.welcomeMessageSticked&&this.welcomeMessageInline&&!this.welcomeMessageForcedInline&&((0,k.Z)(C.s.Debug,"make sticky"),this.$refs.welcomeMsg.makeSticky(),this.welcomeMessageInline=!1,this.welcomeMessageSticked=!0)},onSuggestionClicked(e){this.sending||this.stopping||this.send(e,this.TEXT_TYPE)}},computed:{enrichedMessageList(){return this.store[this.chatSubject].map((e=>{const t=e.isMine,s=e.repliesTo;let i;i=e.deleted?this.formatMessageModerated(e):this.formatMessage(e);let n=null;return s&&(n=s.deleted?this.formatMessageModerated(s):this.formatMessage(s,!0)),{...e,isGif:this.isGif(e),formattedContent:i,formattedTime:this.formatTime(e.time),signedInWith:(0,_.Z)(e.author.provider,this.$lang.data),bubbleStyle:this.messageBubbleStyle(t),repliesToGif:!!s&&this.isGif(s),formattedContentReply:n,citedMessageStyle:s?this.citedMessageStyle(t):null,citedMessageContentStyle:s?this.citedMessageContentStyle(t):null}}))},landscaped(){return this.store.isLandscape},messageMaxLength(){return this.store.PARAMETERS?this.moderator?this.store.PARAMETERS.messageMaxLengthModerator:this.guest?this.store.PARAMETERS.messageMaxLengthGuest:this.store.PARAMETERS.messageMaxLength:140},ready(){return!this.loading},replyToWrapperStyle(){return{backgroundColor:a.v.COLOR_A}},composeContainerStyle(){return{backgroundColor:a.v.COLOR_A}},scrollerEnabled(){const e=this.$refs.list;return this.store[this.chatSubject].length>0&&void 0!==this.scrollTop&&e&&e.scrollHeight-e.scrollTop-e.clientHeight>50},sendDisabled(){return this.sending||this.stopping||!this.connected||0===this.message.trim().length||this.disabled||this.chars>this.messageMaxLength},counterEnabled(){return this.lines>1},timeFrame(){const e=this.store[this.chatSubject].map((e=>(0,o.p6)(e.time,this.$lang.currentLang))).map(((e,t,s)=>t>0&&s[t]===s[t-1]?null:s[t]));return e[0]===(0,o.p6)(Date.now(),this.$lang.currentLang)?e.map((e=>null)):e},bubble(){let e=this.enrichedMessageList,t=[],s=!1;for(let i=e.length-1;i>=0;i--){const n=e[i].isMine;i===e.length-1?(t.unshift(!0),n&&(s=!0)):s&&n?t.unshift(!1):(t.unshift(e[i].author.id!==e[i+1].author.id),n&&(s=!0))}return t}},watch:{"store.isLandscape"(e){e&&this.closePickers()},"store.isMobile"(){this.msgOptions&&this.hideMsgOptions()},"store.LOGIN_STATUS"(){this.msgOptions&&this.hideMsgOptions()}},activated(){this.handleScrollKeeper(),this.handleInputAreaFocus()},components:{AutoresizeArea:E,JwtModal:A,MuteModal:R,ReportModal:U,HideModal:V,Typing:ie,Spinner:P.Z,Stopper:Le,UserPic:O.Z,UserBadge:Ge.Z,UserIdenticon:je,CloseIcon:ze.Z,Gif:Ke.Z,Fallback:Fe,WelcomeMessage:Be,MessageOptions:qe,RichContentPicker:xe,Poll:ot,ChatSuggestions:F,PortalTarget:He.YC}},dt=ct,ht=(s(8858),(0,M.Z)(dt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"chat-container"},[t("message-options",{ref:"msgOptions",on:{hideMsg:e.hideMsg,showMsg:e.showMsg,reportMsg:e.reportMsg,muteUser:e.muteUser,deleteMsg:e.deleteMsg,replyToMsg:e.replyToMsg,clickOutside:e.hideMsgOptions,esc:e.hideMsgOptions}}),e._v(" "),t("jwt-modal",{ref:"jwtModal",on:{close:e.onJwtModalClose,accept:e.onJwtModalAccepted}}),e._v(" "),t("mute-modal",{ref:"muteModal"}),e._v(" "),t("report-modal",{ref:"reportModal"}),e._v(" "),t("hide-modal",{ref:"hideModal"}),e._v(" "),e.$premium?t("poll",{ref:"poll"}):e._e(),e._v(" "),t("portal-target",{attrs:{name:"welcome-msg-sticky"}}),e._v(" "),e.ready?t("div",{ref:"list",staticClass:"message-list-container smooth-scroll focus-el",attrs:{tabindex:"1000"},on:{scroll:function(t){return e.onScroll(t)},wheel:function(t){return e.wheel(t)},touchmove:function(t){return e.touchmove(t)},keydown:function(t){return e.keydown(t)},mousedown:function(t){return e.mousedown(t)},mouseup:function(t){return e.mouseup(t)}}},[t("keep-alive",[e.welcomeMessageEnabled?t("welcome-message",{ref:"welcomeMsg",attrs:{color:e.colorC,"bg-color":e.colorALighter}}):e._e()],1),e._v(" "),t("transition-group",{attrs:{name:"message-fade-out",tag:"div"}},e._l(e.enrichedMessageList,(function(s,i){return t("div",{key:s.id,staticClass:"message-list-item",class:{"message-list-separator-item":e.bubble[i]&&i<e.enrichedMessageList.length-1}},[e.timeFrame[i]?t("div",{staticClass:"message-day"},[e._v(e._s(e.timeFrame[i]))]):e._e(),e._v(" "),t("div",{staticClass:"message-list-item-row-1",class:{"left-message-list-item-row-1":!s.isMine,"right-message-list-item-row-1":s.isMine,mobile:e.store.isMobile}},[e.bubble[i]?t("div",{staticClass:"message-sender-profile-img-container",class:{"left-message-sender-profile-img-container":!s.isMine,"right-message-sender-profile-img-container":s.isMine}},[t("user-pic",{staticClass:"message-sender-profile-img",class:{"message-sender-profile-img-left":!s.isMine,"message-sender-profile-img-right":s.isMine},attrs:{user:s.author,title:s.signedInWith}})],1):e._e(),e._v(" "),t("div",{class:{"message-bubble":e.bubble[i],"left-message-bubble":e.bubble[i]&&!s.isMine,"right-message-bubble":e.bubble[i]&&s.isMine,"message-old-bubble":!e.bubble[i],"left-message-old-bubble":!e.bubble[i]&&!s.isMine,"right-message-old-bubble":!e.bubble[i]&&s.isMine,highlight:e.msgOptions&&e.msgOptions.id===s.id},style:s.bubbleStyle,attrs:{id:s.id,"data-ec":s.emojisCount},on:{click:function(t){return t.stopPropagation(),e.messageBubbleClick(s,t)}}},[!s.repliesTo||!e.moderator&&e.store.hiddenUsers[s.author.id]?e._e():t("div",{key:"1",staticClass:"cited-message",class:{gif:s.isGif},style:s.citedMessageStyle,on:{click:function(t){return t.stopPropagation(),e.navigate(s.repliesTo.id)},mouseover:function(t){return e.onCitedMsgHover(e.$el,s.repliesTo)},mouseleave:function(t){return e.onCitedMsgBlur(e.$el)}}},[!e.moderator&&e.store.hiddenUsers[s.repliesTo.author.id]?t("div",{staticClass:"message-bubble-content-hidden"},[t("svg",{attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M2 5.27L3.28 4 20 20.72 18.73 22l-3.08-3.08c-1.15.38-2.37.58-3.65.58-5 0-9.27-3.11-11-7.5.69-1.76 1.79-3.31 3.19-4.54L2 5.27M12 9a3 3 0 013 3 3 3 0 01-.17 1L11 9.17A3 3 0 0112 9m0-4.5c5 0 9.27 3.11 11 7.5a11.79 11.79 0 01-4 5.19l-1.42-1.43A9.862 9.862 0 0020.82 12 9.821 9.821 0 0012 6.5c-1.09 0-2.16.18-3.16.5L7.3 5.47c1.44-.62 3.03-.97 4.7-.97M3.18 12A9.821 9.821 0 0012 17.5c.69 0 1.37-.07 2-.21L11.72 15A3.064 3.064 0 019 12.28L5.6 8.87c-.99.85-1.82 1.91-2.42 3.13z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k74))])]):s.repliesToGif?[t("div",{staticClass:"cited-gif-wrapper"},[t("div",{staticClass:"left-col"},[t("div",{staticClass:"name"},[e._v(e._s(s.repliesTo.author.name))]),e._v(" "),t("div",{staticClass:"type"},[e._v("GIF")])]),e._v(" "),t("gif",{staticClass:"gif-content",attrs:{url:s.repliesTo.message,width:40,thumbnail:"","accent-color":s.citedMessageStyle.color}})],1)]:s.repliesTo.deleted?[t("div",{staticClass:"name"},[e._v(e._s(s.repliesTo.author.name))]),e._v(" "),t("div",{staticClass:"content-moderated",style:s.citedMessageContentStyle},[t("svg",{attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12 6.5 2 12 2m0 2c-1.9 0-3.6.6-4.9 1.7l11.2 11.2c1-1.4 1.7-3.1 1.7-4.9 0-4.4-3.6-8-8-8m4.9 14.3L5.7 7.1C4.6 8.4 4 10.1 4 12c0 4.4 3.6 8 8 8 1.9 0 3.6-.6 4.9-1.7z"}})]),e._v(" "),t("span",[e._v(e._s(s.formattedContentReply))])])]:[t("div",{staticClass:"name"},[e._v(e._s(s.repliesTo.author.name))]),e._v(" "),t("div",{staticClass:"content",style:s.citedMessageContentStyle,domProps:{innerHTML:e._s(s.formattedContentReply)}})]],2),e._v(" "),!e.moderator&&e.store.hiddenUsers[s.author.id]?t("div",{staticClass:"message-bubble-content-hidden"},[t("svg",{attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M2 5.27L3.28 4 20 20.72 18.73 22l-3.08-3.08c-1.15.38-2.37.58-3.65.58-5 0-9.27-3.11-11-7.5.69-1.76 1.79-3.31 3.19-4.54L2 5.27M12 9a3 3 0 013 3 3 3 0 01-.17 1L11 9.17A3 3 0 0112 9m0-4.5c5 0 9.27 3.11 11 7.5a11.79 11.79 0 01-4 5.19l-1.42-1.43A9.862 9.862 0 0020.82 12 9.821 9.821 0 0012 6.5c-1.09 0-2.16.18-3.16.5L7.3 5.47c1.44-.62 3.03-.97 4.7-.97M3.18 12A9.821 9.821 0 0012 17.5c.69 0 1.37-.07 2-.21L11.72 15A3.064 3.064 0 019 12.28L5.6 8.87c-.99.85-1.82 1.91-2.42 3.13z"}})]),e._v(" "),t("span",[e._v(e._s(e.$lang.data.k74))])]):s.isGif?t("fallback",{scopedSlots:e._u([{key:"default",fn:function(i){return[t("gif",{staticClass:"gif-content",attrs:{width:175,url:s.message,"accent-color":s.bubbleStyle.color},on:{"~ready":function(t){return e.onGifReady.apply(null,arguments)},"~error":function(e){return i.error.apply(null,arguments)}}})]}}],null,!0)},[e._v(" "),t("template",{slot:"error"},[t("div",{staticClass:"message-bubble-content",domProps:{innerHTML:e._s(s.formattedContent)}})])],2):s.deleted?t("div",{staticClass:"message-bubble-content-moderated"},[t("svg",{attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{fill:"currentColor",d:"M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12 6.5 2 12 2m0 2c-1.9 0-3.6.6-4.9 1.7l11.2 11.2c1-1.4 1.7-3.1 1.7-4.9 0-4.4-3.6-8-8-8m4.9 14.3L5.7 7.1C4.6 8.4 4 10.1 4 12c0 4.4 3.6 8 8 8 1.9 0 3.6-.6 4.9-1.7z"}})]),e._v(" "),t("span",[e._v(e._s(s.formattedContent))])]):t("div",{staticClass:"message-bubble-content",domProps:{innerHTML:e._s(s.formattedContent)}})],1),e._v(" "),e.forceMobile||e.viewOnly||s.deleted&&s.isMine||e.customAuth.enabled&&e.signInRequired?e._e():t("div",{staticClass:"message-options",class:{"message-options-right":!s.isMine,"message-options-left":s.isMine}},[t("button",{staticClass:"btn hoverable-btn",on:{click:function(t){return e.showMsgOptions(s,t)}}},[t("span",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}})])])])])]),e._v(" "),e.bubble[i]?t("div",{staticClass:"message-list-item-row-2",class:{"left-message-list-item-row-2":!s.isMine,"right-message-list-item-row-2":s.isMine}},[e.userIdenticon||e.moderator?t("user-identicon",{attrs:{user:s.author}}):e._e(),e._v(" "),t("span",{staticClass:"message-sender-name"},[e._v(e._s(s.author.name))]),e._v(" "),s.author.badge&&s.author.badge.label?t("user-badge",{staticClass:"msg-badge",attrs:{user:s.author}}):e._e(),e._v(" "),t("span",[e._v(" • ")]),e._v(" "),t("span",[e._v(e._s(s.formattedTime))])],1):e._e()])})),0)],1):t("spinner"),e._v(" "),t("div",{staticClass:"suggestions"},[t("ChatSuggestions",{attrs:{suggestions:e.suggestionsList,color:e.colorA},on:{"suggestion-clicked":e.onSuggestionClicked}}),e._v(" "),t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.scrollerEnabled,expression:"scrollerEnabled"}],staticClass:"scroller",on:{click:e.scrollToBottom,mousedown:function(e){e.preventDefault()}}},[t("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42z"}})])])])],1),e._v(" "),e.startedDisabled?e._e():t("div",{staticClass:"typing"},[t("typing",{ref:"typing"})],1),e._v(" "),e.replyTo?t("div",{staticClass:"reply-to-wrapper",style:e.replyToWrapperStyle},[t("div",{key:"2",staticClass:"cited-message",style:e.replyTo.citedMessageStyle},[e.replyTo.isGif?[t("div",{staticClass:"cited-gif-wrapper"},[t("div",{staticClass:"left-col"},[t("div",{staticClass:"name"},[e._v(e._s(e.replyTo.author.name))]),e._v(" "),t("div",{staticClass:"type"},[e._v("GIF")])]),e._v(" "),t("gif",{staticClass:"gif-content",attrs:{url:e.replyTo.message,width:40,thumbnail:"","accent-color":e.replyTo.citedMessageStyle.color}})],1)]:[t("div",{staticClass:"name"},[e._v(e._s(e.replyTo.author.name))]),e._v(" "),t("div",{staticClass:"content",style:e.replyTo.citedMessageContentStyle,domProps:{innerHTML:e._s(e.replyTo.formattedContent)}})]],2),e._v(" "),t("button",{staticClass:"btn close-btn hoverable-btn",attrs:{title:e.$lang.data.k25},on:{"~click":function(t){return t.stopPropagation(),e.abortReplyToMessage.apply(null,arguments)}}},[t("span",[t("close-icon")],1)])]):e._e(),e._v(" "),t("div",{staticClass:"compose-container",style:e.composeContainerStyle},[t("rich-content-picker",{ref:"rcPkr",attrs:{"gif-rating":e.store.PARAMETERS.gifsStatus},on:{"emoji-selection":e.insertEmoji,"gif-selection":e.sendGif}}),e._v(" "),e.signInRequired||e.viewOnly||e.disabled?e.disabled?t("div",{staticClass:"chat-disabled"},[e._v(e._s(e.disabled))]):e.viewOnly?t("div",{staticClass:"read-only"},[e._v(e._s(e.$lang.data.k86))]):e.signInRequired?t("div",{staticClass:"auth-required",domProps:{innerHTML:e._s(e.signInLink)}}):e._e():t("div",{staticClass:"input-container"},[t("div",{staticClass:"picker-btn-container",class:{"disabled-picker-btn":e.landscaped}},[e.pickerOpen?t("button",{staticClass:"btn hoverable-btn focus-el",attrs:{title:e.$lang.data.k25,tabindex:"1001"},on:{click:function(t){return e.closePickers()},mousedown:function(e){e.preventDefault()}}},[t("span",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42z"}})])])]):e.activePicker===e.EMOJI_PICKER?t("button",{staticClass:"btn hoverable-btn focus-el",attrs:{title:"Emoticon",tabindex:"1001"},on:{click:e.openEmojiPicker,mousedown:function(e){e.preventDefault()}}},[t("span",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M12 17.5c2.33 0 4.3-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5M8.5 11A1.5 1.5 0 0010 9.5 1.5 1.5 0 008.5 8 1.5 1.5 0 007 9.5 1.5 1.5 0 008.5 11m7 0A1.5 1.5 0 0017 9.5 1.5 1.5 0 0015.5 8 1.5 1.5 0 0014 9.5a1.5 1.5 0 001.5 1.5M12 20a8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8 8 8 0 01-8 8m0-18C6.47 2 2 6.5 2 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"}})])])]):e.activePicker===e.GIF_PICKER?t("button",{staticClass:"btn hoverable-btn focus-el",attrs:{title:"GIF",tabindex:"1001"},on:{click:e.openGifPicker,mousedown:function(e){e.preventDefault()}}},[t("span",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 467.88 300.62",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M90.5 121.62v57.375c0 21.037 17.212 38.25 38.25 38.25h57.375v-76.5H128.75v19.125H167v38.25h-38.25c-11.475 0-19.125-7.65-19.125-19.125V121.62c0-11.475 7.65-19.125 19.125-19.125h57.375V83.37H128.75c-21.038 0-38.25 17.212-38.25 38.25zM205.25 217.25h57.375v-19.125H243.5V102.5h19.125V83.375H205.25V102.5h19.125v95.625H205.25z"}}),t("path",{attrs:{d:"M400.5 0H67.38C34.867 0 .005 46.862.005 79.375v143.88c0 32.513 34.862 77.375 67.375 77.375H400.5c32.513 0 67.375-46.862 67.375-79.375V79.375C467.875 46.862 433.013 0 400.5 0zm32.25 217.25c0 21.037-15.213 48.25-36.25 48.25H71.38c-21.038 0-36.25-27.213-36.25-48.25V83.37c0-21.038 15.212-48.25 36.25-48.25H396.5c21.037 0 36.25 27.212 36.25 48.25z"}}),t("path",{attrs:{d:"M377.38 102.5V83.375h-95.625v133.88h19.125V159.88h57.375v-19.125H300.88v-38.25z"}})])])]):e._e()]),e._v(" "),t("div",{staticClass:"picker-btn-container",class:{"disabled-picker-btn":e.landscaped}},[e.pickerOpen&&e.activePicker===e.GIF_PICKER?t("button",{staticClass:"btn hoverable-btn focus-el",attrs:{title:"Emoticon",tabindex:"1002"},on:{click:e.openEmojiPicker,mousedown:function(e){e.preventDefault()}}},[t("span",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M12 17.5c2.33 0 4.3-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5M8.5 11A1.5 1.5 0 0010 9.5 1.5 1.5 0 008.5 8 1.5 1.5 0 007 9.5 1.5 1.5 0 008.5 11m7 0A1.5 1.5 0 0017 9.5 1.5 1.5 0 0015.5 8 1.5 1.5 0 0014 9.5a1.5 1.5 0 001.5 1.5M12 20a8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8 8 8 0 01-8 8m0-18C6.47 2 2 6.5 2 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"}})])])]):e.pickerOpen&&e.gifsEnabled&&e.activePicker===e.EMOJI_PICKER?t("button",{staticClass:"btn hoverable-btn focus-el",attrs:{title:"GIF",tabindex:"1002"},on:{click:e.openGifPicker,mousedown:function(e){e.preventDefault()}}},[t("span",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 467.88 300.62",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[t("path",{attrs:{d:"M90.5 121.62v57.375c0 21.037 17.212 38.25 38.25 38.25h57.375v-76.5H128.75v19.125H167v38.25h-38.25c-11.475 0-19.125-7.65-19.125-19.125V121.62c0-11.475 7.65-19.125 19.125-19.125h57.375V83.37H128.75c-21.038 0-38.25 17.212-38.25 38.25zM205.25 217.25h57.375v-19.125H243.5V102.5h19.125V83.375H205.25V102.5h19.125v95.625H205.25z"}}),t("path",{attrs:{d:"M400.5 0H67.38C34.867 0 .005 46.862.005 79.375v143.88c0 32.513 34.862 77.375 67.375 77.375H400.5c32.513 0 67.375-46.862 67.375-79.375V79.375C467.875 46.862 433.013 0 400.5 0zm32.25 217.25c0 21.037-15.213 48.25-36.25 48.25H71.38c-21.038 0-36.25-27.213-36.25-48.25V83.37c0-21.038 15.212-48.25 36.25-48.25H396.5c21.037 0 36.25 27.212 36.25 48.25z"}}),t("path",{attrs:{d:"M377.38 102.5V83.375h-95.625v133.88h19.125V159.88h57.375v-19.125H300.88v-38.25z"}})])])]):e._e()]),e._v(" "),t("div",{staticClass:"input-area-container"},[t("autoresize-area",{ref:"input",attrs:{"max-lines":4,"max-length":e.messageMaxLength},on:{input:e.onWrite,enter:e.onEnter}})],1),e._v(" "),t("div",{staticClass:"post-btn-container"},[t("stopper",{ref:"stop",staticClass:"stopper",attrs:{"update-period":100},on:{completion:e.onStopCompletion}}),e._v(" "),e.stopping?e._e():t("div",[e.counterEnabled?t("div",{staticClass:"chars-counter",class:{"limit-reached":e.chars>=e.messageMaxLength}},[e._v(e._s(e.chars)+"/"+e._s(e.messageMaxLength))]):e._e(),e._v(" "),e.sending?t("spinner",{staticClass:"chat-spinner",attrs:{circleColor:"#fff",circleSize:"9"}}):t("button",{staticClass:"btn post-btn hoverable-btn focus-el",attrs:{tabindex:"1004",title:e.$lang.data.k76,disabled:e.sendDisabled},on:{click:function(t){return e.send()},mousedown:function(e){e.preventDefault()}}},[t("span",{staticClass:"focus-cont",attrs:{tabindex:"-1"}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"}})])])])],1)],1)])],1)],1)}),[],!1,null,null,null)),ut=ht.exports},4962:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var i=s(896),n=s(4053),o=s(491),a=s(2138),r=s(2358);function l(e){return e||"-"}var c={name:"presence",props:{context:{type:String,default:i.Z.PAGE},hideTotal:{type:Boolean,default:!1}},data(){return{store:n.Z,pageCounter:void 0,siteCounter:void 0}},created(){(0,r.Z)(a.s.Debug,"created"),this.handleCounters()},computed:{summary(){return this.showTotal?"1"===this.pageCounter?this.$lang.complete("k94",{$N:l(this.siteCounter)}):this.$lang.complete("k95",{$N:l(this.pageCounter),$M:l(this.siteCounter)}):this.context===i.Z.PAGE?"1"===this.pageCounter?this.$lang.data.k96:this.$lang.complete("k97",{$N:l(this.pageCounter)}):"1"===this.siteCounter?this.$lang.data.k98:this.$lang.complete("k99",{$N:l(this.siteCounter)})},show(){return!(this.context===i.Z.PAGE&&!o.v.PAGE_COUNTER_VIEW||this.context===i.Z.SITE&&!o.v.SITE_COUNTER_VIEW)},showTotal(){return this.show&&!this.hideTotal&&this.context===i.Z.PAGE&&o.v.SITE_COUNTER_VIEW}},watch:{context(e){(0,r.Z)(a.s.Debug,"newContext ->",e),this.handleCounters()}},methods:{handleCounters(){if(!this.show)return;const e=now4real.Subject.COUNTER_PAGE_VIEWERS,t=now4real.Subject.COUNTER_SITE_VIEWERS;this.context===i.Z.PAGE&&void 0===this.pageCounter&&((0,r.Z)(a.s.Debug,"init page counter"),void 0!==this.store[e]?(this.pageCounter=null,this.$watch(`store.${e}`,(e=>{this.pageCounter=e}),{immediate:!0})):(this.store[e]=null,now4real.subscribe(e,(t=>{this.store[e]=t.data.value,this.pageCounter=t.data.value})))),(this.context===i.Z.SITE||this.showTotal)&&void 0===this.siteCounter&&((0,r.Z)(a.s.Debug,"init site counter"),void 0!==this.store[t]?(this.siteCounter=null,this.$watch(`store.${t}`,(e=>{this.siteCounter=e}),{immediate:!0})):(this.store[t]=null,now4real.subscribe(t,(e=>{this.store[t]=e.data.value,this.siteCounter=e.data.value}))))}}},d=(s(2059),(0,s(1900).Z)(c,(function(){var e=this,t=e._self._c;return e.show?t("div",{attrs:{id:"presence-container"}},[t("div",{staticClass:"presence-summary"},[e._v("\n        "+e._s(e.summary)+"\n    ")])]):e._e()}),[],!1,null,null,null).exports)},235:function(e,t,s){var i=s(7005);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("916980ec",i,!0,{})},4810:function(e,t,s){var i=s(84);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("8fe49570",i,!0,{})},6875:function(e,t,s){var i=s(5200);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("4c4c57f9",i,!0,{})},8858:function(e,t,s){var i=s(1005);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("78dbb4ac",i,!0,{})},9757:function(e,t,s){var i=s(5338);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("1829faaa",i,!0,{})},6446:function(e,t,s){var i=s(5254);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("4be421ea",i,!0,{})},9506:function(e,t,s){var i=s(3042);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("d370d5ca",i,!0,{})},8544:function(e,t,s){var i=s(3025);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("331b4034",i,!0,{})},9716:function(e,t,s){var i=s(3282);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("a15d1564",i,!0,{})},9933:function(e,t,s){var i=s(5068);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("136c45aa",i,!0,{})},1009:function(e,t,s){var i=s(2615);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("6cf2eb32",i,!0,{})},2090:function(e,t,s){var i=s(6904);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("51aba2b4",i,!0,{})},1484:function(e,t,s){var i=s(7529);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("a5c8c5fa",i,!0,{})},7462:function(e,t,s){var i=s(6758);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("46ee4e3f",i,!0,{})},8094:function(e,t,s){var i=s(4087);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("7a40de71",i,!0,{})},1207:function(e,t,s){var i=s(8592);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("13684cde",i,!0,{})},3970:function(e,t,s){var i=s(9531);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("307860e4",i,!0,{})},1502:function(e,t,s){var i=s(4794);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("b0cd2804",i,!0,{})},8357:function(e,t,s){var i=s(5903);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("574b1858",i,!0,{})},3914:function(e,t,s){var i=s(5354);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("03328cdd",i,!0,{})},2059:function(e,t,s){var i=s(6851);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,s(5346).Z)("2d65ca4c",i,!0,{})},4409:function(e,t,s){"use strict";e.exports=s.p+"imgs/powered-by-tenor.d3d9643721ed1c253d11.png"}}]);