!function e(r,s,o){function u(n,t){if(!s[n]){if(!r[n]){var i="function"==typeof require&&require;if(!t&&i)return i(n,!0);if(a)return a(n,!0);throw(t=new Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",t}i=s[n]={exports:{}},r[n][0].call(i.exports,function(t){return u(r[n][1][t]||t)},i,i.exports,e,r,s,o)}return s[n].exports}for(var a="function"==typeof require&&require,t=0;t<o.length;t++)u(o[t]);return u}({1:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});t=t(3);function e(){}e.i="CORE",e.o=t.u.Warn,e.h=Number("5"),e.p=Number("6"),e.S=void 0,e.O=void 0,e.P=void 0,e.T=void 0,e.C="https",e.N="443",e._="FELS",e.D="n4rCommon",e.I=["now4real.com","localhost:3000","localtest.me:3000"],e.R="shared-public-sandbox.test",e.A=!0,e.M=140,e.U=0,e.L=1500,e.j=18e4,e.F=3e5,e.G=15e3,e.H=8e3,e.J=1e3,e.V="n4rSitePreferences",e.W="noRe",e.B="noReMain",e.q="email",e.Y="emailMain",i.default=e},{3:3}],2:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.K=i.X=i.$=i.Z=void 0;t=t(3),i.Z=t.u.Debug,i.$=t.u.Info,i.X=t.u.Warn,i.K=t.u.Error,e.tt="presenceForeground",e.nt="presenceTyping",e.it="messageUserList",e.et="events",e.rt="key",e.st="command",e.ot="ADD",e.UPDATE="UPDATE",e.ut="DELETE",e.ct="http",e.ht="https",e.lt="localhost",e.ft="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.dt="DISCONNECTED:WILL-RETRY",e.vt="DISCONNECTED:TRYING-RECOVERY",e.wt="code",e.bt="message",e.Et="on",e.gt="off",e.St="yes",e.Ot="no",e.Pt="page",e.Tt="site",e.Ct="\t",e.Nt="/",e._t="g.invalid",e.Dt="n4rAuth",e.yt="n4rFels",e.It="translate.goog",e.Rt="MODERATOR",e.At="GUEST",e.EMAIL="EMAIL",e.Mt="group.invalid",e.Ut="master.invalid",e.kt="resolve",e.xt="reject",e.Lt="SITE_CONFIGURATION_CHANGED",e.jt="SITE_NOT_ACTIVE",t=e;function e(){}i.default=t},{3:3}],3:[function(t,n,i){var e;Object.defineProperty(i,"t",{value:!0}),i.Ft=i.Gt=i.Ht=i.Jt=i.Vt=i.u=i.Wt=void 0,(e=i.Wt||(i.Wt={}))[e.FACEBOOK=0]="FACEBOOK",e[e.GOOGLE=1]="GOOGLE",e[e.LINKEDIN=2]="LINKEDIN",e[e.TWITTER=3]="TWITTER",(e=i.u||(i.u={}))[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Off=5]="Off",(e=i.Vt||(i.Vt={}))[e.MESSAGE_SEND=0]="MESSAGE_SEND",e[e.MESSAGE_DELETE=1]="MESSAGE_DELETE",e[e.CHAT_FLUSH=2]="CHAT_FLUSH",e[e.CHAT_ENABLE=3]="CHAT_ENABLE",e[e.MUTE_USER_GET=4]="MUTE_USER_GET",e[e.MUTE_USER_SET=5]="MUTE_USER_SET",e[e.DELETE_PASSWORD=6]="DELETE_PASSWORD",e[e.GET_AUTH_INFO=7]="GET_AUTH_INFO",e[e.REPORT_CHAT_MESSAGE=8]="REPORT_CHAT_MESSAGE",e[e.USER_PREFERENCE_SET=9]="USER_PREFERENCE_SET",e[e.LOG=10]="LOG",e[e.USER_CONSENT_SET=11]="USER_CONSENT_SET",e[e.JWT_REFRESH=12]="JWT_REFRESH",e[e.POLL_NEW=13]="POLL_NEW",e[e.POLL_CLOSE=14]="POLL_CLOSE",e[e.POLL_VOTE_SET=15]="POLL_VOTE_SET",e[e.POLL_VOTE_GET=16]="POLL_VOTE_GET",(e=i.Jt||(i.Jt={}))[e.Success=0]="Success",e[e.Generic=-1]="Generic",e[e.Unauthorized=-2]="Unauthorized",e[e.IllegalArgument=-3]="IllegalArgument",e[e.TemporarilyUnavailable=-4]="TemporarilyUnavailable",e[e.UnsupportedClient=-5]="UnsupportedClient",e[e.UnsupportedBrowser=-6]="UnsupportedBrowser",e[e.AuthenticationExpired=-7]="AuthenticationExpired",(e=i.Ht||(i.Ht={}))[e.WrongCredentials=1]="WrongCredentials",e[e.AllowedSessionCountReached=7]="AllowedSessionCountReached",e[e.SessionCountLimitReached=8]="SessionCountLimitReached",e[e.ServerTooBusy=9]="ServerTooBusy",e[e.ServerBlocked=10]="ServerBlocked",(e=i.Gt||(i.Gt={})).SOCIAL="Social",e.JWT="JWT",e.READ_ONLY="Read-only",e.N4R="N4R",e.NO_REGISTRATION="NoRe",e.EMAIL="Email",(e=i.Ft||(i.Ft={})).PageShowing="page_showing",e.PageHiding="page_hiding",e.ConnectionStatus="connection_status",e.Authentication="authentication",e.Load="load",e.LoadError="load_error",e.UserUpdated="user_updated"},{}],4:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.Bt=void 0;var e=t(43),t=t(44);i.Bt=new e.default(t.qt.CREDIT_EXHAUSTED,"The credits for this site have been exhausted or this site was disabled. Please check your Now4real dashboard at dashboard.now4real.com to upgrade your plan and/or re-enable Now4real")},{43:43,44:44}],5:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});t=t(40);i.default=new t.default},{40:40}],6:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var o=t(35),u=t(2),a=t(43),c=t(44),e=t(29),r=t(39),h=t(4);function s(t,n,i){void 0===i&&(i=!1),this.Yt=t,this.zt=n,this.Kt=i}s.prototype.parse=function(t){t=JSON.parse(t);return{status:t.s,master:t.m,group:t.g,logo:t.l,version:t.v,siteKey:t.k,auth:t.a,whiteLabel:t.w,conf:t.c}},s.prototype.check=function(){var s=this;return new Promise(function(e,r){s.fetch(s.Yt).then(function(t){var n=t.Xt,t=t.responseText;o.default(u.Z,"Obtained",n,t);try{var i=s.parse(t);0===i.status?r(h.Bt):(s.current=i,e(i))}catch(t){r(new a.default(c.qt.TECHNICAL_PROBLEM,t.message))}}).catch(function(t){o.default(u.Z,t.statusCode),403!==t.statusCode||s.Kt?r(t):(t=s.parse('{"s":1,"v":-1}'),s.current=t,e(t))})})},s.prototype.$t=function(t){var n=this;return t?(t=this.parse(JSON.stringify(t)),this.current=t,Promise.resolve(t)):r.retry(function(){return n.check()},{Qt:"statusCode",Zt:"*",tn:3,delay:5e3}).catch(function(t){throw t.statusCode?new a.default(c.qt.TECHNICAL_PROBLEM,t.statusCode.toString()):t})},s.prototype.fetch=function(t){return e.default.nn(this.zt+"/conf/"+encodeURIComponent(t)+"/json")},s.prototype.get=function(){return this.current},s.prototype.en=function(){var t=this.current;return{s:t.status,m:t.master,g:t.group,l:t.logo,v:t.version,k:t.siteKey,a:t.auth,w:t.whiteLabel,c:t.conf}},s.prototype.update=function(t){try{return this.current=this.parse(t),this.current}catch(t){o.default(u.K,"Conf update error",t)}},i.default=s},{2:2,29:29,35:35,39:39,4:4,43:43,44:44}],7:[function(t,n,i){function e(){}Object.defineProperty(i,"t",{value:!0}),e.rn=!1,e.sn=null,e.on=null,i.default=e},{}],8:[function(t,n,i){var r=this&&this.__spreadArrays||function(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var e=Array(t),r=0,n=0;n<i;n++)for(var s=arguments[n],o=0,u=s.length;o<u;o++,r++)e[r]=s[o];return e},s=(Object.defineProperty(i,"t",{value:!0}),t(41));function e(t){if(this.un=!1,this.an=[],this.prefix=t.prefix,this.context=t.context,this.category=t.category,this.cn=t.hn,this.mode=t.ln,this.dn=t.dn,this.hidden=t.vn||!1,this.wn=t.wn||!1,this.mn=t.mn||!1,void 0!==this.context){var n="";switch(this.context){case 0:n="p";break;case 1:n="s";break;case 2:n=2===this.category?"w|"+this.cn[0]:"w";break;case 3:n=this.dn}this.id=this.prefix+"|"+n}else this.id=this.prefix;this.mn&&(this.id=this.id+="|"+this.cn.join(",")),this.pn=t.pn?s.bn(t.pn):null}e.prototype.toString=function(){return this.id},e.prototype.En=function(){return this.an},e.prototype.gn=function(t){-1===this.an.indexOf(t)&&this.an.push(t)},e.prototype.Sn=function(t){t=this.an.indexOf(t);-1<t&&this.an.splice(t,1)},e.prototype.On=function(t){this.snapshot=s.bn(this.pn),t[this.name]=this.snapshot,this.un=!0},e.prototype.Pn=function(t,n){var i=this.snapshot;if(null==t)i=t;else if(s.isArray(t))s.isArray(i)?i.splice.apply(i,r([0,i.length],t)):i=t;else if(s.Tn(t))if(s.Tn(i)){for(var e in t)i[e]=t[e];for(var e in i)e in t||delete i[e]}else i=t;else i=t;this.snapshot=i,n[this.name]=i},e.prototype.Cn=function(t){this.Pn(void 0,t),this.un=!1},e.prototype.Nn=function(t){this.Pn(this.pn,t)},e.prototype._n=function(t){this.listener=t},e.prototype.Dn=function(){this.listener=void 0},e.prototype.yn=function(){return this.hidden},e.prototype.In=function(){return this.un},e.prototype.Rn=function(){return this.wn},e.prototype.An=function(){return void 0!==this.dn},e.prototype.Mn=function(){return 3===this.context},i.default=e},{41:41}],9:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var r=t(8),e=t(2),s=t(44),o=t(35),u=t(2);function a(){var t;this.Un=["p"],this.kn=["ml","md","mlm","cd","mh","gr"],this.xn=["t"],this.Ln=[e.default.rt,e.default.st,"u","i","p","r","s","d"],this.jn=[e.default.rt,e.default.st,"n","i","p","r","b","bf","bb"],this.Fn=["c"],this.Gn=[e.default.rt,e.default.st,"i","t","c","p"],this.Hn=["c","h"],this.Jn=[e.default.rt,e.default.st],this.Vn=["q","o","v","t","m","b"],this.Wn=["q","m"],this.Bn={value:null},this.qn=[],this.Yn={},this.zn=[],this.Kn=[],this.Xn=null,this.$n={status:null},this.Qn={status:"NOT_AUTHENTICATED"},this.Zn={messageMaxLength:null,messageMaxLengthModerator:null,messageMaxLengthGuest:null,messageDurationValue:null,messageDurationUnit:null,chatStatus:null,clickableLinks:null,gifsStatus:null},this.ti=[s.ni.COUNTER_PAGE_VIEWERS,s.ni.COUNTER_PAGE_CHATTERS,s.ni.COUNTER_CHAT_TYPING],this.ii=((t={})[s.ni.CONNECTION_STATUS]=new r.default({category:0,pn:this.$n,prefix:"_cs",wn:!0}),t[s.ni.LOGIN_STATUS]=new r.default({category:0,pn:this.Qn,prefix:"_ls",wn:!0}),t[s.ni.AUTHORIZATION]=new r.default({category:0,pn:{},prefix:"_a",wn:!0}),t[s.ni.PARAMETERS]=new r.default({category:8,pn:this.Zn,prefix:"Par",wn:!0,hn:this.kn,ln:"MERGE"}),t[e.default.et]=new r.default({category:9,prefix:"E",wn:!1,hn:this.xn,ln:"DISTINCT"}),t[e.default.tt]=new r.default({category:1,context:0,vn:!0,prefix:"PF",hn:this.Un,ln:"RAW"}),t[e.default.nt]=new r.default({category:1,context:0,vn:!0,prefix:"PT",hn:this.Un,ln:"RAW"}),t[e.default.it]=new r.default({category:7,vn:!0,prefix:"Mu",hn:this.jn,ln:"COMMAND"}),t[s.ni.RANKING_PAGE_VIEWERS]=new r.default({category:4,context:0,pn:this.qn,prefix:"RF",hn:this.Gn,ln:"COMMAND"}),t[s.ni.RANKING_PAGE_CHATTERS]=new r.default({category:4,context:0,pn:this.qn,prefix:"RA",hn:this.Gn,ln:"COMMAND"}),t.RANKING_SITE_VIEWERS=new r.default({category:4,context:2,vn:!0,pn:this.qn,prefix:"RsF",hn:this.Gn,ln:"COMMAND"}),t.RANKING_SITE_CHATTERS=new r.default({category:4,context:2,vn:!0,pn:this.qn,prefix:"RsA",hn:this.Gn,ln:"COMMAND"}),t[s.ni.LIST_CHAT_TYPING]=new r.default({category:6,context:0,pn:this.Kn,prefix:"LT",hn:this.Jn,ln:"COMMAND"}),t[s.ni.LIST_CHAT_MESSAGES]=new r.default({category:3,context:0,pn:this.zn,prefix:"M",hn:this.Ln,ln:"COMMAND"}),t[s.ni.COUNTER_PAGE_VIEWERS]=new r.default({category:2,context:0,pn:this.Bn,prefix:"CF",hn:this.Fn,ln:"MERGE"}),t[s.ni.COUNTER_PAGE_CHATTERS]=new r.default({category:2,context:0,pn:this.Bn,prefix:"CA",hn:this.Fn,ln:"MERGE"}),t[s.ni.COUNTER_SITE_VIEWERS]=new r.default({category:2,context:1,pn:this.Bn,prefix:"CF",hn:this.Fn,ln:"MERGE"}),t[s.ni.COUNTER_SITE_CHATTERS]=new r.default({category:2,context:1,pn:this.Bn,prefix:"CA",hn:this.Fn,ln:"MERGE"}),t[s.ni.COUNTER_CHAT_MESSAGES]=new r.default({category:2,context:0,pn:this.Bn,prefix:"CM",hn:this.Fn,ln:"MERGE"}),t[s.ni.COUNTER_CHAT_TYPING]=new r.default({category:2,context:0,pn:this.Bn,prefix:"CT",hn:this.Fn,ln:"MERGE"}),t.COUNTER_DOMAINS_GLOBAL=new r.default({category:2,context:2,vn:!0,pn:this.Bn,prefix:"Ga",hn:["hc"],ln:"MERGE"}),t.COUNTER_CHAT_MESSAGES_GLOBAL=new r.default({category:2,context:2,vn:!0,pn:this.Bn,prefix:"Ga",hn:["mc"],ln:"MERGE"}),t.COUNTER_USERS_GLOBAL=new r.default({category:2,context:2,vn:!0,pn:this.Bn,prefix:"Ga",hn:["uc"],ln:"MERGE"}),t.PEAK_SITE_VIEWERS=new r.default({category:2,context:1,vn:!0,pn:this.Bn,prefix:"CpF",hn:this.Fn,ln:"MERGE"}),t.PEAK_SITE_CHATTERS=new r.default({category:2,context:1,vn:!0,pn:this.Bn,prefix:"CpA",hn:this.Fn,ln:"MERGE"}),t[s.ni.HEATMAP_PAGE_VIEWERS]=new r.default({category:5,context:0,pn:this.Yn,prefix:"HF",hn:this.Hn,ln:"MERGE"}),t[s.ni.HEATMAP_SITE_VIEWERS]=new r.default({category:5,context:1,pn:this.Yn,prefix:"HF",hn:this.Hn,ln:"MERGE"}),t[s.ni.POLL]=new r.default({category:11,pn:this.Xn,prefix:"Po",hn:this.Vn,ln:"MERGE",mn:!0}),t[s.ni.POLL_STATUS]=new r.default({category:10,pn:this.Xn,prefix:"Po",hn:this.Wn,ln:"MERGE",mn:!0}),t)}a.ei=function(){return a.ri=a.ri?a.ri:new a},a.prototype.si=function(t){t=t.id;o.default(u.Z,"Destroying: "+t),delete this.ii[t]},a.prototype.find=function(t){var n=t.split(":"),i=n[0],n=n[1],e=this.ii[i];return e&&void 0===e.name&&(this.ii[i].name=i),void 0!==n&&-1<this.ti.indexOf(i)?(o.default(u.Z,"Custom page context founded: "+n),i=e.prefix+"|"+n,this.ii[i]||(o.default(u.Z,"Generating: "+t),(n=new r.default({category:e.category,pn:e.pn,prefix:e.prefix,hn:e.cn,ln:e.mode,context:3,dn:n})).name=t,this.ii[i]=n)):e},a.prototype.oi=function(){var n=this;return Object.keys(this.ii).filter(function(t){return!0===n.ii[t].wn}).map(function(t){return n.find(t)})},a.prototype.ui=function(t){for(var n in this.ii)if(this.ii[n].toString()===t)return this.ii[n]},a.prototype.ai=function(){var n=this;return Object.keys(this.ii).filter(function(t){return!0!==n.ii[t].yn()})},i.default=a},{2:2,35:35,44:44,8:8}],10:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.ci=i.hi=i.li=i.fi=i.di=i.vi=i.wi=i.mi=i.pi=i.test=void 0;var e=t(35),r=t(2);function s(){var t,n;return void 0!==document.hidden?(t="hidden",n="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",n="mozvisibilitychange"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),{hidden:t,visibilityChange:n}}function o(){return"postMessage"in window}function u(){return window.storageAvailable}function a(t,n){var i=(t="on"+t)in n;return i||(n=n.setAttribute?n:document.createElement("div")).setAttribute&&n.removeAttribute&&(n.setAttribute(t,""),i="function"==typeof n[t],void 0!==n[t]&&(n[t]=void 0),n.removeAttribute(t)),i}i.test=function(t){switch(t){case 1:return a("message",window)&&o();case 0:return a("storage",window)&&u();case 2:var n=s().hidden;return void 0!==document[n];default:return e.default(r.X,"Unsupported feature",t),!1}},i.pi=s,i.mi=o,i.wi=u,i.vi=a,i.di=function(){return-1!==(t=navigator.userAgent,n=-1,"Microsoft Internet Explorer"===navigator.appName?null!==new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(n=parseFloat(RegExp.$1)):"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&(n=parseFloat(RegExp.$1)),n);var t,n},i.fi=function(){return 0<=navigator.userAgent.indexOf("Edge")},i.li=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},i.hi=function(){return/Version\/.{1,300}Chrome\/\d+\.\d+\.\d+\.\d+|; wv\).{1,300}Chrome\/\d+\.\d+\.\d+\.\d+|(?:iPod|iPod touch|iPhone|iPad);.{0,30}CPU.{0,30}OS[ +]\d+_\d+(?:_\d+|).{0,30} AppleNews\/\d+\.\d+(?:\.\d+|)|(?:iPod|iPhone|iPad).{1,200}Version\/\d+\.\d+(?:\.\d+|)(?!.{0,200} Safari)|(?:iPod|iPod touch|iPhone|iPad)(?!.{0,200} Safari)/.test(navigator.userAgent)},i.ci=function(){return e.default(r.Z,"UA: "+navigator.userAgent),/bot|crawler|spider/i.test(navigator.userAgent)}},{2:2,35:35}],11:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.default=function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)}),String.prototype.bi||(String.prototype.bi=function(){return this.charAt(0).toUpperCase()+this.slice(1)})}},{}],12:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(1),o=t(43),r=t(7),u=t(2),s=t(41);function a(t){this.Ei=0,this.gi={},this.Si=s.Oi(8),this.destination=t,this.origin=t!==a.Pi||void 0!==e.default.P.file_name?"*":r.default.Ti,this.Ci()}a.prototype.Ni=function(){return this.Si+this.Ei++},a.prototype.Ci=function(){function t(t){var n,i,e,r;(t.origin||t.originalEvent.origin)!==s.origin||(n=(t=t.data).cmd)!==u.default.kt&&n!==u.default.xt||(i=t.id,e=t.payload,n===u.default.xt&&(r=t.code,t=t.message,r)&&t&&(e=new o.default(r,t)),null!=(r=s.gi[i])&&r[n](e),delete s.gi[i])}var s=this;window.addEventListener("message",t,!1),this._i=t},a.prototype.send=function(t){var i=this,e=this.Ni();return this.destination.postMessage({id:e,cmd:t.cmd,payload:t.payload},this.origin),new Promise(function(t,n){i.gi[e]={resolve:t,reject:n}})},a.prototype.reset=function(){for(var t=this.Ei=0,n=Object.keys(this.gi);t<n.length;t++){var i=n[t];this.gi[i].reject(new o.default("ABORTED","broken channel")),delete this.gi[i]}window.removeEventListener("message",this._i)},a.Pi=window.parent,a.Di=window,i.default=a},{1:1,2:2,41:41,43:43,7:7}],13:[function(t,n,i){function e(t,n){this.cmd=t,this.payload=n}var r,s,o=this&&this.__extends||(r=function(t,n){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}))(t,n)},function(t,n){function i(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),u=(Object.defineProperty(i,"t",{value:!0}),i.yi=i.Ii=i.Ri=i.Ai=i.Mi=void 0,o(a,s=i.Mi=e),a);function a(t){return s.call(this,"verify",t)||this}i.Ai=u;o(h,c=e);var c,u=h;function h(t,n,i){return c.call(this,"reload",{startOpen:t,updatedSiteConf:n,reloadScriptConf:i})||this}i.Ri=u;o(f,l=e);var l,u=f;function f(){return l.call(this,"getUpdatedJWT",null)||this}i.Ii=u;o(v,d=e);var d,u=v;function v(t){return d.call(this,"updateConfig",{c:t})||this}i.yi=u},{}],14:[function(t,n,i){function e(t,n){this.cmd=t,this.payload=n}var r,s,o=this&&this.__extends||(r=function(t,n){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}))(t,n)},function(t,n){function i(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),u=(Object.defineProperty(i,"t",{value:!0}),i.Ui=i.ki=i.xi=i.Li=i.ji=i.Fi=i.Gi=i.Hi=void 0,o(a,s=i.Hi=e),a);function a(t){return s.call(this,"load",t)||this}i.Gi=u;o(h,c=e);var c,u=h;function h(t){return c.call(this,"error",t)||this}i.Fi=u;o(f,l=e);var l,u=f;function f(t){return l.call(this,"subjectUpdate",t)||this}i.ji=u;o(v,d=e);var d,u=v;function v(t){return d.call(this,"response",t)||this}i.Li=u;o(m,w=e);var w,u=m;function m(t){return w.call(this,"loggerEdit",t)||this}i.xi=u;o(b,p=e);var p,u=b;function b(t){return p.call(this,"siteStatusUpdate",t)||this}i.ki=u;o(g,E=e);var E,u=g;function g(t){return E.call(this,"suggestionsUpdate",t)||this}i.Ui=u},{}],15:[function(t,n,i){function e(t,n){this.type=t,this.data=n,this.timestamp=Date.now()}var r,s,o=this&&this.__extends||(r=function(t,n){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}))(t,n)},function(t,n){function i(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),u=(Object.defineProperty(i,"t",{value:!0}),i.Ji=i.Vi=i.Wi=i.Bi=i.qi=i.Yi=i.zi=i.Ki=i.Xi=i.$i=i.Qi=i.Zi=void 0,t(44)),t=(i.Zi=e,o(a,s=e),a);function a(t){return s.call(this,u.ni.CONNECTION_STATUS,t)||this}i.Qi=t;o(h,c=e);var c,t=h;function h(t){return c.call(this,u.ni.LOGIN_STATUS,t)||this}i.$i=t;o(f,l=e);var l,t=f;function f(t){return l.call(this,u.ni.AUTHORIZATION,t)||this}i.Xi=t;o(v,d=e);var d,t=v;function v(t){return d.call(this,u.ni.LIST_CHAT_MESSAGES,t)||this}i.Ki=t;o(m,w=e);var w,t=m;function m(t){return w.call(this,u.ni.PARAMETERS,t)||this}i.zi=t;o(b,p=e);var p,t=b;function b(t){return p.call(this,u.ni.LIST_CHAT_TYPING,t)||this}i.Yi=t;o(g,E=e);var E,t=g;function g(t){return E.call(this,u.ni.POLL,t)||this}i.qi=t;o(O,S=e);var S,t=O;function O(t){return S.call(this,u.ni.POLL_STATUS,t)||this}i.Bi=t;o(T,P=e);var P,t=T;function T(t,n){return P.call(this,t,n)||this}i.Wi=t;o(N,C=e);var C,t=N;function N(t,n){return C.call(this,t,n)||this}i.Vi=t;o(D,_=e);var _,t=D;function D(t,n){return _.call(this,t,n)||this}i.Ji=t},{44:44}],16:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),new(t(17).te)},{17:17}],17:[function(V,t,W){!function(J){!function(){var l=this&&this.__assign||function(){return(l=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},f=(Object.defineProperty(W,"t",{value:!0}),W.te=void 0,V(1)),d=V(2),h=V(7),v=V(3),w=V(41),t=V(34),n=V(42),m=V(21),c=V(26),p=V(27),b=V(28),E=V(25),e=V(37),r=V(36),s=V(32),o=V(9),g=V(18),u=V(11),S=V(15),a=V(14),O=V(13),i=V(23),P=V(10),T=V(5),x=V(30),L=V(31),C=V(6),N=V(19),j=V(20),F=V(24),_=V(12),G=V(39),D=V(43),y=V(45),I=V(44),R=V(35),A=V(3),M=V(2),U="undefined"!=typeof window?window.LS:void 0!==J?J.LS:null,H=(k.prototype.start=function(){R.default(M.$,U.LightstreamerClient.LIB_VERSION);try{this.ne();for(var t=this.ii.oi(),n=0,i=t;n<i.length;n++)i[n].On(this);this.ee.ie()&&this.load()}catch(t){throw new D.default(I.qt.TECHNICAL_PROBLEM,t.message)}},k.prototype.re=function(t){R.default(M.Z,"updateIntegratorStatus",t);var n=t.status,i=t.logo,t=t.whiteLabel;this.se=n,this._siteStatus=n,this._customLogo=void 0!==i?!!i:3===n,this._whiteLabel=void 0!==t&&t},k.prototype.oe=function(t){var n=f.default.S.target;"api"!==n&&"api+widget"!==n&&"demo"!==n||this.notify(new a.Fi(t),"p"),"widget"!==n&&"api+widget"!==n&&"demo"!==n||w.ue(this.onerror)&&this.onerror.call(this,t),this.ae(),T.default.publish(v.Ft.LoadError,t)},k.prototype.ae=function(){this.notify(new a.Hi("destroy",{}),"p")},k.prototype.ce=function(){var t,n=f.default.S.target;"api"!==n&&"api+widget"!==n&&"demo"!==n||((t=JSON.parse(f.default.O)).technicalConfig=f.default.P,t={cc:JSON.stringify(t),as:this.ii.ai(),ll:f.default.o,ago:f.default.he,co:f.default.le,uau:f.default.fe,ss:this.se,lv:this.version,pc:this.context.de,sc:this.context.Yt,gc:this.context.ve,wv:this.we,nrm:this.me,em:this.pe,sk:null==(t=this.be.get())?void 0:t.siteKey,wll:this._whiteLabel,pars_snap:this.ii.find(I.ni.PARAMETERS).snapshot},this.notify(new a.Gi(t),"p")),"widget"!==n&&"api+widget"!==n&&"demo"!==n||(this._fromFile=void 0!==f.default.P.file_name,this._standardAuthDisabled=this.we,this.Ee)||this.onload.call(this),T.default.publish(v.Ft.Load,null)},k.prototype.ge=function(t){t=window[t];this.onload=t&&w.ue(t.onload)?t.onload:function(){R.default(M.K,"onload not setted")},this.onerror=t?t.onerror:null},k.prototype.Se=function(){if("file:"===location.protocol)return!0;for(var t=f.default.I,n=w.Oe(window.location.href).host,i=0,e=t;i<e.length;i++){var r=e[i];if(n.endsWith(r))return!0}return R.default(M.K,"the domain is not enabled",n,t,window.location.href),!1},k.prototype.Pe=function(t){var n=this;N.default.init(t),this.Te(),N.default.Ce(function(t){n._e.Ne(N.default.De()),n.Te()}),this._e.Ne(N.default.De())},k.prototype.ye=function(t){var i,e,n,r=this,s=f.default.S,o=t.status,u=t.master,a=t.group,c=t.auth,u=((u||a)&&(this.context=this.Ie.update(u,a)),s.context_check),a=this.context.Yt;u&&a!==f.default.R&&u!==a?this.oe(new D.default(I.qt.INVALID_CALL,"the expected context_check had to be equal to: "+a+", got: "+u)):(this.re(t),this.siteContext=this.context.Yt,this.pageContext=this.context.de,this.groupContext=this.context.ve,this.me=2===c,this.pe=3===c,this.Ee||(i=function(t){t.then(function(t){return r.Ae.Re().then(function(t){return g.default.Me(t)})}).then(function(t){r.Ue(t)}).catch(function(t){g.default.ke(null),r.xe(t)})},e=function(t,n){t.then(function(t){g.default.Le()}).then(function(t){return r.Ae.Re().then(function(t){return g.default.Me(t)})}).then(function(t){r.je(!1)}).catch(function(t){g.default.ke(n),r.xe(t)})},this.me?(n=h.default.Fe.watch(f.default.W,function(t){g.default.state.Ge(2),t?(g.default.ke(t.id),i(r._e.He(v.Gt.NO_REGISTRATION,t.token))):(g.default.ke(null),e(r._e.Je(),g.default.Ve()))}))&&this.We.push(n):this.pe?(n=h.default.Fe.watch(f.default.q,function(t){g.default.state.Ge(2),t?(g.default.ke(t.id),i(r._e.He(v.Gt.EMAIL,t))):(g.default.ke(null),e(r._e.Je(),g.default.Ve()))}))&&this.We.push(n):this.Be||(a=m.default.watch(d.default.Dt,function(t,n){t?(null==n?void 0:n.id)===t.id?(R.default(M.Z,"onCredentialUpdated call"),r.Ue(t)):(R.default(M.Z,"onCredentialStored call"),g.default.state.Ge(2),g.default.ke(t.id),i(r._e.He(v.Gt.SOCIAL,t))):(R.default(M.Z,"onCredentialDeleted call"),g.default.state.Ge(2),g.default.ke(null),e(r._e.Je(),g.default.Ve()))}))&&this.We.push(a)),f.default.P.our_origin=this.context.zt,f.default.A=s.local_persistence||!(null!=(u=null==s?void 0:s.custom_auth)&&u.enabled)||3!==o,this.browserPreferences=new j.default(this.context.ve||this.context.Yt),this._e.qe(),1!==o||this.Ee||R.default(M.X,"Verify "+this.siteContext+" for free in the Now4real Dashboard to get analytics, notifications, and more. Go to https://dashboard.now4real.com and follow the instructions."),this.Ye=t)},k.prototype.ze=function(t,n){R.default(M.Z,"Auth info",t,n),g.default.Me(t),this.Pe(t)},k.prototype.load=function(){var i=this;R.default(M.Z,"Loading NOW4REAL",this.version),this.Ke=!0,this.we=P.hi(),this.Xe(),this.$e(this.Qe),this.userPreferences=new F.default(this.Ae,function(){return i.ii},function(t){i.Ue(t)}),this.Ze(),this.tr();this.nr(),h.default.sn=new _.default(_.default.Pi),this.We.push(function(t){h.default.sn.reset()}),this.Be&&h.default.rn&&this.ir(),!this.Ee&&this.ee.ie()&&this.er(),this.rr(),this._e.sr().then(function(t){return Promise.all([i.Ae.Re(),t])}).then(function(t){var n=t[0],t=t[1];i.ye(i.be.get()),i.ze(n,t),i.ur(t)}).then(function(t){i.ce()}).catch(function(t){t.code===I.qt.RELOAD_REQUIRED?i.reload({updatedSiteConf:JSON.parse(t.message),reloadScriptConf:!1}):i.oe(t)})},k.prototype.rr=function(){this.Subject=I.ni,this.ErrorCode=I.qt},k.prototype.ur=function(t){var n;0===g.default.state.ar&&(n=g.default.getUser(),t!==v.Gt.READ_ONLY&&t!==v.Gt.N4R&&(t!==v.Gt.JWT&&t!==v.Gt.NO_REGISTRATION&&t!==v.Gt.EMAIL||n)?this.Ue(n):this.je(!1))},k.prototype.cr=function(){window.n4rConfig||window.n4rTechnicalConfig?(t=window.n4rConfig,n=window.n4rTechnicalConfig,i=window.n4rConfig,r=e=null,this.Ee=!window.n4rNoAnalytics):(o=w.hr(),t=(s=y.lr(o)).config,n=s.technicalConfig,i=s.scriptConfig,e=s.updatedConfig,r=o),f.default.S=t,f.default.O=r,f.default.P=n,f.default.T=i;var t,n,i,e,r,s=t.logger,o=(s&&(f.default.o=A.u[s.bi()]),f.default.he=w.dr(f.default.P.env_subdom),f.default.le=w.vr(f.default.P.env_subdom),f.default.fe=w.wr(f.default.P.env_subdom),t.custom_auth);return this.Be=null==o?void 0:o.enabled,h.default.rn="fn"===(null==o?void 0:o.jwt),R.default(M.Z,"Extracted configuration",f.default.S,f.default.P,f.default.T),e},k.prototype.mr=function(t){var t=decodeURIComponent(t.substring(1)),n=y.lr(t),i=n.config,e=n.technicalConfig,n=n.scriptConfig,t=(f.default.S=i,f.default.O=t,f.default.P=e,f.default.T=n,i.logger);t&&(f.default.o=A.u[t.bi()]),R.default(M.Z,"Updated configuration",f.default.S,f.default.P,f.default.T)},k.prototype.pr=function(){var t=this.Ee&&f.default.P.global_name?f.default.P.global_name:"now4real";this.ge(t),window[t]=this},Object.defineProperty(k.prototype,"config",{get:function(){return f.default.S},br:!1,Er:!0}),k.prototype.ne=function(){var l=this;this.ee=new n.default({gr:function(){R.default(M.Z,"onPageHiding call",document.visibilityState),localStorage.setItem("onPageHiding",""+new Date),T.default.publish(v.Ft.PageHiding,null)},Sr:function(){R.default(M.Z,"onPageShowing call"),l.Ke?T.default.publish(v.Ft.PageShowing,null):l.load()},Or:function(){R.default(M.Z,"onPageTerminated call"),l.Qe.disconnect()}}),this.We.push(function(){l.ee.reset()}),t.default.init({Pr:function(n,i,t){R.default(M.Z,"onProxyCommand call",n,i,t);function e(t){t.then(function(t){l.Tr(n,i,r,t)}).catch(function(t){l.Tr(n,i,s,t)})}var r="resolve",s="reject",o="subject";switch(i){case"startProxyLogin":e(l.Cr());break;case"stopProxyLogin":l.Nr();break;case"reload":l.reload(t[0]);break;case"subscribe":var u=t[0];l.subscribe(u,null,t[1],!0).then(function(t){t[o]=u,l.Tr(n,i,r,t)}).catch(function(t){t[o]=u,l.Tr(n,i,s,t)});break;case"unsubscribe":var a=t[0];l.unsubscribe(a,!0).then(function(t){t[o]=a,l.Tr(n,i,r,t)}).catch(function(t){t[o]=a,l.Tr(n,i,s,t)});break;case"post":e(l.post(t[0],t[1],!0));break;case"logout":case"deleteMessage":case"flushChat":case"setChatEnabled":case"getMute":case"setMute":case"startTyping":case"stopTyping":case"reportMessage":case"registerUserConsent":case"createPoll":case"closePoll":case"sendVote":case"getPollVote":case"setLoggerLevel":e(l[i].apply(l,t));break;case"browserPreferences.getItem":case"browserPreferences.setItem":case"browserPreferences.removeItem":var c=i.split("."),h=l[c[0]];e(h[c[1]].apply(h,t));break;default:R.default(M.X,"Unsupported message",n,i,t)}}},this.context.Ti,this.context.zt),this.We.push(function(){t.default.reset()})},k.prototype.xe=function(t){var n;-1<t.message.indexOf("client")?n="DISCONNECTED:UNSUPPORTED_CLIENT":-1<t.message.indexOf("browser")?n="DISCONNECTED:UNSUPPORTED_BROWSER":t.code===I.qt.CREDIT_EXHAUSTED&&(n="DISCONNECTED:CREDIT_EXHAUSTED"),n&&(this._r(n),this.Dr())},k.prototype.Xe=function(){var n=this,t=r.default.ei(),i=t.init(this.version,this.be,this.context.Yt,"demo"===f.default.S.target,this.Ee,this.Be,this.we);t.yr({Ir:function(t){n._r(t),T.default.publish(v.Ft.ConnectionStatus,t)},Rr:function(){n._r("DISCONNECTED:JWT_EXPIRED"),n.Dr(),n.Ar(!1)},Mr:function(){n._r("DISCONNECTED:CONFIG_CHANGED"),n.Dr(),n.Ar(!1)},Ur:function(){n._r("DISCONNECTED:CREDIT_EXHAUSTED"),n.Dr(),n.Ar(!1)},kr:function(){n._r("DISCONNECTED:UNSUPPORTED_CLIENT"),n.Dr(),n.Ar(!1)},Lr:function(){g.default.state.Ge(2),g.default.ke(null),t.Je().then(function(t){g.default.Le()}).then(function(t){return n.Ae.Re().then(function(t){return g.default.Me(t)})}).then(function(t){n.je()})},jr:function(t){n.mr(t)}}),this._e=t,this.Qe=i,this.Fr=i.connectionDetails},k.prototype.$e=function(t){var n=this,i=e.default.ei();i.init(t,function(){return n.Ie.context}),this.Ae=i,g.default.Ae=i},k.prototype.Ze=function(){var t=this,n=new x.default(T.default,this.ee);n.init(function(){t._e.Gr()},function(){0!==t.se&&t._e.Hr()}),h.default.on=n},k.prototype.tr=function(){var t=this;this.Jr=new L.default(T.default,function(){t.Vr(t.ii.find(I.ni.LIST_CHAT_MESSAGES)),R.default(M.Z,"chat snapshot cleared")})},k.prototype.er=function(){this.Wr(this.ii.find(d.default.tt)),T.default.subscribe(v.Ft.PageHiding,this.Br.bind(this)),T.default.subscribe(v.Ft.PageShowing,this.qr.bind(this))},k.prototype.Yr=function(t,n){var i=this;w.zr(function(){i.Kr(t,n||null)})},k.prototype.Kr=function(t,n){var i,e=this.ii.find(t.type),n=n||e.En();if(R.default(M.Z,"notifyEvent for subject: "+this.ii.find(t.type).name,t,n),-1<n.indexOf(1)&&(i=new a.ji({lsn:t.type,data:t}),this.notify(i,"p")),-1<n.indexOf(0)&&w.ue(e.listener)){t.data&&delete t.data._snap;try{e.listener(t)}catch(t){R.default(M.K,t.message)}}},k.prototype.notify=function(t,n){var i,e;!this.context||this.Ee&&"p"===n||(e=i=void 0,e="p"===n?(i=window.parent,void 0!==f.default.P.file_name?"*":this.context.Ti):(i=window,"*"),i.postMessage({cmd:t.cmd,payload:w.bn(t.payload)},e))},k.prototype.Xr=function(t){t=new S.$i(t);this.Yr(t,[0,1])},k.prototype.$r=function(t){t=new S.$i(t);this.Yr(t,[0,1])},k.prototype._r=function(t){var n=this.ii.find(I.ni.CONNECTION_STATUS),i=n.snapshot.status;t!==i&&("DISCONNECTED"!==t||"DISCONNECTED:CREDIT_EXHAUSTED"!==i&&"DISCONNECTED:CONFIG_CHANGED"!==i&&"DISCONNECTED:UNSUPPORTED_CLIENT"!==i&&"DISCONNECTED:JWT_EXPIRED"!==i)&&(n.Pn(i={status:t},this),this.Yr(new S.Qi(i),[0,1]))},k.prototype.Te=function(){this.ii.find(I.ni.AUTHORIZATION).Pn(N.default.state,this),this.Kr(new S.Xi(N.default.state),[0,1])},k.prototype.Qr=function(i){var t=this,n=this.Zr.get(i);return void 0===n?(R.default(M.Z,i+" not found in cache"),new Promise(function(n){t.Zr.watch(i,function(t){R.default(M.Z,"Resolved "+i,t),n(t)})})):Promise.resolve(n)},k.prototype.Wr=function(e,t,n,r){var s,o,u,a=this,c=e.toString(),i=e.category,h=!1,l=new Promise(function(n,i){o=function(){var t="onSubscription call: "+c;h&&(t="re-".concat(t)),R.default(M.Z,t),h?a.Dr(e):(n({}),r&&w.ue(r.onAfterFirstSub)&&r.onAfterFirstSub(),h=!0)},u=function(t,n){h?R.default(M.K,"Automatic "+c+" subscription recovery error",t,n):(delete a.ts[c],t===v.Jt.Unauthorized?i(new D.default(I.qt.NOT_AUTHORIZED,'not authorized to perform the "'+e.id+'" subscription')):i(new D.default(I.qt.TECHNICAL_PROBLEM,t.toString())))}}),f={ns:o,es:u,rs:function(t,n,i){R.default(M.X,c+" itemLostUpdates call",t,n,i),a.Dr(e),a.Qe.unsubscribe(s),a.Qe.subscribe(s)},os:function(t,n){R.default(M.Z,c+" onClearSnapshot call",t,n),a.Dr(e)}};if(n)for(var d in n)f[d]=n[d];switch(i){case 3:s=this.us(e,f,t);break;case 6:s=this.cs(e,f);break;case 1:s=this.hs(e,f);break;case 9:s=this.ls(e,f);break;case 2:s=this.fs(e,f);break;case 4:s=this.ds(e,f);break;case 5:s=this.vs(e,f);break;case 8:s=this.ws(e,f);break;case 7:s=this.ps(e,f);break;case 11:s=this.bs(e,f);break;case 10:s=this.Es(e,f)}return this.Qe.subscribe(s),this.ts[c]=s,l},k.prototype.bs=function(a,t){var c=this,n=a.prefix+":"+(f.default.S.scope===d.default.Tt?this.context.gs||this.context.Ss:this.context.Os),n=(R.default(M.Z,"Computed item: "+n),new U.Subscription(a.mode,n,a.cn));return n.setRequestedSnapshot("yes"),n.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemUpdate:function(t){var i,t=w.Ps(t.getValue,t),n=t("b"),e=t("q"),r=t("o"),s=t("v"),o=t("t"),t=t("m"),u=(R.default(M.Z,a.id+" update ("+c.Fr.getSessionId()+")",n,e,r,s,o,t),null),s=(e&&(r=r.split("\t"),i=w.Ts(s),u={closed:null===t,question:e,answers:r.map(function(t,n){return{text:t,percentage:i[n]}}),votesCount:o,multipleChoice:1<Number(t),startDate:w.Cs(n)}),a.Pn(u,c),new S.qi(u));c.Yr(s)}}),n},k.prototype.Es=function(e,t){var r=this,n=e.prefix+":"+(f.default.S.scope===d.default.Tt?this.context.gs||this.context.Ss:this.context.Os),n=(R.default(M.Z,"Computed item: "+n),new U.Subscription(e.mode,n,e.cn));return n.setRequestedSnapshot("yes"),n.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemUpdate:function(t){var t=w.Ps(t.getValue,t),n=t("q"),t=t("m"),i=(R.default(M.Z,e.id+" update ("+r.Fr.getSessionId()+")",n,t),null),n=(e.Pn(i=n?{question:n,closed:null===t}:i,r),new S.Bi(i));r.Yr(n)}}),n},k.prototype.ls=function(n,t){var i=this,e=n.prefix+":"+d.default._t,e=(R.default(M.Z,"Computed item: "+e),new U.Subscription(n.mode,e,n.cn));return e.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemUpdate:function(t){t=w.Ps(t.getValue,t)("t");R.default(M.Z,n.prefix+" update ("+i.Fr.getSessionId()+")",t),"e"===t&&G.timeout(f.default.H,h.default.sn.send(new O.Ii)).then(function(t){R.default(M.Z,"obtained new JWT",t);try{i._e.Ns(t),i.Ae._s(t)}catch(t){throw t}}).catch(function(t){R.default(M.K,t.message)})}}),e.setRequestedSnapshot("no"),e.setDataAdapter("EVENT"),e},k.prototype.ps=function(c,t){var h=this,n=c.prefix+":"+(f.default.S.scope===d.default.Tt?this.context.gs||this.context.Ss:this.context.Os),n=(R.default(M.Z,"Computed item: "+n),new U.Subscription(c.mode,n,c.cn));return n.setRequestedSnapshot(d.default.St),n.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemUpdate:function(t){var n,i,e,r,s,o,u,a=w.Ps(t.getValue,t),t=(R.default(M.Z,c.prefix+" update ("+h.Fr.getSessionId()+", "+t.isSnapshot()+")",a(d.default.st)+"-"+a(d.default.rt)+"-"+a("n")+"-"+a("i")+"-"+a("p")+"-"+a("r")+"-"+a("b")+"-"+a("bf")+"-"+a("bb")),a(d.default.st));t!==d.default.ot&&t!==d.default.UPDATE||(t=a(d.default.rt),n=a("n"),i=a("i"),e=a("p"),r=a("r"),o=a("b"),u=a("bf"),a=a("bb"),s=null,r&&(s=w.Ds(r,o,u,a)),u=w.ys(o={id:t,nick:n,icon:i,provider:e},s?s.role:null,s?s.badge:null),h.Zr.set(u),(a=h.ii.find(I.ni.LOGIN_STATUS).snapshot.user)&&a.id===u.id&&(h.me||h.pe||m.default.Is(n,i),g.default.Rs(r?s.role:null,r?s.badge:null),h.Ue(o)))}}),n},k.prototype.hs=function(t,n){var i=f.default.S.scope===d.default.Tt&&t.name===d.default.nt?d.default.Mt+"/":""+d.default.Ut+this.context.de,i=t.prefix+":"+i,i=(R.default(M.Z,"Computed item: "+i),new U.Subscription(t.mode,i,t.cn));return i.addListener({onSubscription:n.ns,onSubscriptionError:n.es}),i},k.prototype.us=function(i,t,n){var e=this,r=i.toString(),s=i.prefix+":"+(f.default.S.scope===d.default.Tt?this.context.gs||this.context.Ss:this.context.Os),s=(R.default(M.Z,"Computed item: "+s),new U.Subscription(i.mode,s,i.cn));return s.setRequestedSnapshot(!n||n.snapshot?d.default.St:d.default.Ot),s.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemLostUpdates:t.rs,onClearSnapshot:t.os,onItemUpdate:function(t){var n=w.Ps(t.getValue,t);R.default(M.Z,r+" update ("+e.Fr.getSessionId()+", "+t.isSnapshot()+")",n(d.default.rt),n("u"),n("i"),n("p"),n("r"),n("s"),n("d")),e.Ms.As(t).then(function(t){t&&(R.default(M.Z,"CHAT upds",t),i.Pn(e.Ms.get(),e),t.forEach(function(t){t._snap=i.snapshot;t=new S.Ki(t);e.Yr(t)}))}).catch(function(t){R.default(M.Z,t)})}}),s},k.prototype.ws=function(c,t){var h=this,n=f.default.S.scope===d.default.Tt?d.default.Mt+"/":""+d.default.Ut+this.context.de,n=c.prefix+":"+n,n=(R.default(M.Z,"Computed item: "+n),new U.Subscription(c.mode,n,c.cn));return n.setRequestedSnapshot(d.default.St),n.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemLostUpdates:t.rs,onItemUpdate:function(t){var n=w.Ps(t.getValue,t),i=n("ml"),e=n("mlm"),r=n("md"),s=n("cd"),o=n("mh"),n=n("gr");if(R.default(M.Z,c.toString()+" update ("+h.Fr.getSessionId()+", "+t.isSnapshot()+")",i,e,r,s,o,n),null!==i&&null!==e&&null!==r&&null!==s){var t=Number(i),i=Number(e),e=w.Us(r),u=void 0;switch(s){case"M":u="DISABLED_BY_MODERATOR";break;case"A":u="DISABLED_BY_ADMINISTRATOR";break;default:u="ENABLED"}var a=void 0;switch(n){case"1":a="G";break;case"2":a="PG";break;case"3":a="PG-13";break;case"4":a="R";break;default:a="DISABLED"}NaN!==t&&NaN!==i&&(r={messageMaxLength:t,messageMaxLengthModerator:i,messageMaxLengthGuest:i,messageDurationValue:e.value,messageDurationUnit:e.unit,chatStatus:u,clickableLinks:"a"===o?"ALL":"INTERNALS",gifsStatus:a},c.Pn(r,h),s=new S.zi(r),h.Yr(s,[0,1]))}}}),n},k.prototype.fs=function(i,t){var n,e=this,r=i.prefix,s=i.name,o=i.context,u=i.toString();switch(o){case 0:n=s!==I.ni.COUNTER_CHAT_TYPING&&s!==I.ni.COUNTER_CHAT_MESSAGES||f.default.S.scope!==d.default.Tt?r+":"+this.context.Os:r+":"+(this.context.gs||this.context.Ss);break;case 1:n=r+":"+(this.context.ve||this.context.Yt);break;case 2:n=r+":"+d.default._t;break;case 3:n=r+":"+(this.context.Yt+i.dn)}R.default(M.Z,"Computed item: "+n);o=new U.Subscription(i.mode,n,i.cn);return o.setRequestedSnapshot(d.default.St),o.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemLostUpdates:t.rs,onItemUpdate:function(t){var n=(n=w.Ps(t.getValue,t)(i.cn[0]))&&n.toString();R.default(M.Z,u+" update ("+e.Fr.getSessionId()+", "+t.isSnapshot()+")",n),n!==i.snapshot.value?(i.Pn(t={value:n},e),n=new S.Wi(s,t),e.Yr(n)):R.default(M.Z,"Discarded counter update",i)}}),o},k.prototype.ds=function(s,t){var o=this,u=s.toString(),a=s.name,n=s.prefix+":"+(2===s.context?d.default._t:this.context.ve||this.context.Yt),i=(R.default(M.Z,"Computed item: "+n),!1),e=w.bn(s.cn),e=this.Ee?e.concat(["f"]):e,n=new U.Subscription(s.mode,n,e);return n.setRequestedSnapshot(d.default.St),n.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemLostUpdates:t.rs,onClearSnapshot:t.os,onEndOfSnapshot:function(){var t;R.default(M.Z,u+" endOfSnapshot call"),i||(i=!0,t=new S.Vi(a,o.xs.ks()),o.Yr(t))},onItemUpdate:function(t){var n=w.Ps(t.getValue,t),n=(R.default(M.Z,u+" update ("+o.Fr.getSessionId()+", "+t.isSnapshot()+")",n(d.default.rt),n(d.default.st),n("i"),n("t"),n("c"),n("p")),o.xs.As(s,t));if(n){s.Pn(o.xs.get(u,!0),o);for(var i=0,e=n;i<e.length;i++){var r=e[i],r=(r._snap=s.snapshot,new S.Vi(a,r));o.Yr(r)}}else R.default(M.Z,"Discarded "+u+" ranking update")}}),n},k.prototype.cs=function(i,t){var e=this,r=i.toString(),n=i.prefix+":"+(f.default.S.scope===d.default.Tt?this.context.gs||this.context.Ss:this.context.Os),n=(R.default(M.Z,"Computed item: "+n),new U.Subscription(i.mode,n,i.cn));return n.setRequestedSnapshot(d.default.St),n.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemLostUpdates:t.rs,onClearSnapshot:t.os,onItemUpdate:function(t){var n=w.Ps(t.getValue,t);R.default(M.Z,r+" update ("+e.Fr.getSessionId()+", "+t.isSnapshot()+")",n(d.default.rt),n(d.default.st)),e.Ls.As(t).then(function(t){i.Pn(e.Ls.get(),e),t._snap=i.snapshot;t=new S.Yi(t);e.Yr(t)}).catch(function(t){R.default(M.Z,t)})}}),n},k.prototype.vs=function(s,t){var n,o=this,u=s.id,i=s.prefix,a=s.name;switch(s.context){case 0:n=i+":"+this.context.Os;break;case 1:n=i+":"+(this.context.ve||this.context.Yt);break;default:R.default(M.K,"H sub unsupported context")}R.default(M.Z,"Computed item: "+n);var e=new U.Subscription(s.mode,n,s.cn);return e.setRequestedSnapshot(d.default.St),e.addListener({onSubscription:t.ns,onSubscriptionError:t.es,onItemLostUpdates:t.rs,onItemUpdate:function(t){var n=w.Ps(t.getValue,t),n=(R.default(M.Z,u+" update ("+o.Fr.getSessionId()+", "+t.isSnapshot()+")",n("c"),n("h")),o.js.As(u,t));if(n){s.Pn(o.js.get(u),o);for(var i=0,e=n;i<e.length;i++){var r=e[i],r=(r._snap=s.snapshot,new S.Ji(a,r));o.Yr(r)}}else R.default(M.Z,"Discarded "+u+" update")}}),e},k.prototype.qr=function(){var t=this.ii.find(d.default.tt).id,n=this.ts[t];n?(this.Qe.subscribe(n),R.default(M.Z,"Subscribe "+t)):R.default(M.X,"Undefined "+t)},k.prototype.Br=function(){localStorage.setItem("unsubPF",""+new Date);var t=this.ii.find(d.default.tt).id,n=this.ts[t];n?(this.Qe.unsubscribe(n),R.default(M.Z,"Unsubscribe "+t)):R.default(M.X,"Undefined "+t)},k.prototype.Fs=function(){var t=this.ii.find(d.default.nt);return R.default(M.Z,"Subscribe "+t.id),this.Wr(t)},k.prototype.Gs=function(){var t=this.ii.find(d.default.nt).id;this.Hs(t),R.default(M.Z,"Unsubscribe "+t)},k.prototype.nr=function(){var t=this.ii.find(I.ni.PARAMETERS);this.Wr(t),R.default(M.Z,"Subscribe "+t.id)},k.prototype.ir=function(){var t=this.ii.find(d.default.et);this.Wr(t),R.default(M.Z,"Subscribe "+t.id)},k.prototype.Tr=function(t,n,i,e){t=new a.Li({id:t,fn:n,res:i,data:e});this.notify(t,"p")},k.prototype.Js=function(){this.Zr||(this.Zr=new i.default,this.Wr(this.ii.find(d.default.it)))},k.prototype.Hs=function(t){this.ts[t]?(this.ts[t].isActive()?this.Qe.unsubscribe(this.ts[t]):R.default(M.Z,"Already unsubscribed",t),delete this.ts[t]):R.default(M.X,"Subscription flow sync error",t,this.ts)},k.prototype.Vs=function(e,t,n,i){var r=this,s=null,o=e.category,u=e.toString(),a=e.Rn()?void 0===e.listener:void 0===this.ts[u];switch(e.gn(i.Ws?1:0),o){case 3:this.Js(),this.Ms||(this.Ms=E.default.ei()),a&&(R.default(M.Z,"Initilize subject: "+e),this.Ms.init(this.Qr.bind(this)),this.Bs||(this.Bs=this.Zr.watch(v.Ft.UserUpdated,function(t){t=r.Ms.Is(t);if(t.length){R.default(M.Z,"chat list user updates",t),e.Pn(r.Ms.get(),r);for(var n=t.map(function(t){return l(l({},t),{_snap:e.snapshot})}),i=0;i<n.length;i++)r.Yr(new S.Ki(n[i]))}})),this.Jr.qs(),s=this.Wr(e,n,null));break;case 6:this.Js(),this.Ls||(this.Ls=b.default.ei()),a&&(R.default(M.Z,"Initilize subject: "+e),this.Ls.init(this.Qr.bind(this)),s=this.Wr(e,null,null));break;case 2:case 11:case 10:a&&(R.default(M.Z,"Initilize subject: "+e),s=this.Wr(e,null,null));break;case 4:void 0===this.xs&&(this.xs=p.default.ei()),a&&(R.default(M.Z,"Initilize subject: "+e),this.xs.init(u,this.Ie,this.Ee),s=this.Wr(e,null,null));break;case 5:void 0===this.js&&(this.js=c.default.ei()),a&&(R.default(M.Z,"Initilize subject: "+e),this.js.init(u),s=this.Wr(e,null,null))}return a&&!e.Rn()&&e.On(this),i.Ws&&(i.Ws,w.ue(e.listener))||e._n(t),null!==s?s:new Promise(function(t){t({}),w.zr(function(){r.Ys(e,i.Ws)})})},k.prototype.zs=function(t,n){var i=t.toString(),e=t.En().length,n=n.Ws?1:0;return 1===e?(t.Sn(n),t.Rn()||(this.Hs(i),t.Cn(this)),t.Mn()?this.ii.si(t):t.Dn(),t.name===I.ni.LIST_CHAT_MESSAGES?(this.Jr.Ks(),this.Bs&&(this.Zr.unwatch(v.Ft.UserUpdated,this.Bs),this.Bs=null),this.Ms.Xs()):t.name===I.ni.LIST_CHAT_TYPING&&this.Ls.Xs(),new Promise(function(t){t({})})):(t.Sn(n),0==n&&t.Dn(),Promise.resolve({}))},k.prototype.Dr=function(t){if(t)this.Vr(t);else for(var n in R.default(M.Z,"Reset snapshot"),this.ts)this.Vr(this.ii.ui(n))},k.prototype.Ys=function(n,t){R.default(M.Z,"notifySnapshot",n,t);var i=n.category,e=n.name,r=n.id,s=[t?1:0];if(n.Rn())this.Yr(new S.Zi(n.name,n.snapshot),s);else switch(i){case 3:var o=this.Ms.snapshot().map(function(t){return l(l({},t),{_snap:n.snapshot})});if(0<o.length)for(var u=0;u<o.length;u++)this.Yr(new S.Ki(o[u]),s);break;case 4:var a=this.xs.snapshot(r);if(a.push(this.xs.ks()),a.map(function(t){return l(l({},t),{_snap:n.snapshot})}),0<a.length)for(u=0;u<a.length;u++)this.Yr(new S.Vi(e,a[u]),s);break;case 5:var c=this.js.snapshot(r).map(function(t){return l(l({},t),{_snap:n.snapshot})});if(0<c.length)for(u=0;u<c.length;u++)this.Yr(new S.Ji(e,c[u]),s);break;case 6:var h=this.Ls.snapshot().map(function(t){return l(l({},t),{_snap:n.snapshot})});if(0<h.length)for(u=0;u<h.length;u++)this.Yr(new S.Yi(h[u]),s);break;case 2:null!==n.snapshot.value&&this.Yr(new S.Wi(e,n.snapshot),s)}},k.prototype.Vr=function(e){var r=this,t=e.category,n=e.name,s=e.toString();switch(t){case 3:this.Ms.$s().then(function(t){var n=t.map(function(t){return l(l({},t),{_snap:e.pn})});if(0<n.length){for(var i=0;i<n.length;i++)r.Yr(new S.Ki(n[i]));e.Nn(r),R.default(M.Z,"Reset "+s+" subscription")}});break;case 4:var i=this.xs.$s(s).map(function(t){return l(l({},t),{_snap:e.pn})});if(0<i.length){for(var o=0;o<i.length;o++)this.Yr(new S.Vi(n,i[o]));e.Nn(this),R.default(M.Z,"Reset "+s+" subscription")}break;case 5:var u=this.js.$s(s).map(function(t){return l(l({},t),{_snap:e.pn})});if(0<u.length){for(o=0;o<u.length;o++)this.Yr(new S.Ji(n,u[o]));e.Nn(this),R.default(M.Z,"Reset "+s+" subscription")}break;case 6:this.Ls.$s().then(function(t){var n=t.map(function(t){return l(l({},t),{_snap:e.pn})});if(0<n.length){for(var i=0;i<n.length;i++)r.Yr(new S.Yi(n[i]));e.Nn(r),R.default(M.Z,"Reset "+s+" subscription")}});break;case 2:null!==e.snapshot.value&&(this.Yr(new S.Wi(n,e.pn)),e.Nn(this),R.default(M.Z,"Reset "+s+" subscription"))}},k.prototype.je=function(t){R.default(M.Z,"handleLogout call",t=void 0===t?!0:t),4!==g.default.state.ar&&(g.default.state.Ge(4),t&&(this.me||this.pe?((t=h.default.Fe).removeItem(this.me?f.default.W:f.default.q),t.removeItem(this.me?f.default.B:f.default.Y)):m.default.Qs()),t={status:"NOT_AUTHENTICATED"},this.ii.find(I.ni.LOGIN_STATUS).Pn(t,this),this.$r(t),T.default.publish(v.Ft.Authentication,{authorization:g.default.Zs()}))},k.prototype.Ue=function(t){R.default(M.Z,"handleLogin call",t),3!==g.default.state.ar&&g.default.state.Ge(3);var n=this.ii.find(I.ni.LOGIN_STATUS),i=n.snapshot,e=!this.Be||(null==(e=g.default.getUser())?void 0:e.consent),r=!this.Be&&(this.me?h.default.Fe.no():!m.default.io()),s=g.default.getDetails(),e={status:"AUTHENTICATED",user:w.eo(t,e,s?s.role:null,s?s.badge:null,s?s.preferences:null),persistent:r};w.ro(i,e)||(n.Pn(e,this),this.Xr(e),T.default.publish(v.Ft.Authentication,{user:t,authorization:g.default.Zs()}))},k.prototype.Ar=function(t){var n;for(void 0===t&&(t=!0);this.We.length;)null!=(n=this.We.shift())&&n();t&&this.ae()},k.prototype._load=function(i){var s,o=this;return R.default(M.$,"_load call",arguments),(i=i||location.href)&&w.so(i)?(s=function(t){return t.startsWith(d.default.ct)?t:d.default.ct+"://"+t},new Promise(function(e,n){var r=o.Ie.oo(s(i));(t=>(o.be=new C.default(t,o.Ie.uo()),("now4real.com"===(t=t)?Promise.resolve('{"s":3,"v":3}'):o.be.fetch(t).then(function(t){return t.responseText})).then(function(t){return o.be.update(t).status})))(r).then(function(t){0!==t?(t=i,document.customReferrer=s(t),o.context=o.Ie.update(null,null),T.default.subscribe(v.Ft.Load,function(t){var n=o.Ye,i=n.master;e({siteContext:r,master:i,group:n.group})}),T.default.subscribe(v.Ft.LoadError,function(t){n(t)}),o.start()):(t=new D.default(I.qt.CURRENTLY_DISABLED,"the site is currently disabled"),o.oe(t),n(t))}).catch(function(t){t=403===t.statusCode?new D.default(I.qt.INVALID_CALL,"the site is not registered yet"):new D.default(I.qt.TECHNICAL_PROBLEM,t.statusCode);o.oe(t),n(t)})})):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,""))},k.prototype.setLoggerLevel=function(t){if(R.default(M.$,"setLoggerLevel call",arguments),!t)return Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid level argument"));if(!w.so(t))return Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"level must be a string"));t=t.toLowerCase().bi();if(void 0===A.u[t])return Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid level name"));f.default.o=A.u[t];t=new a.xi({level:A.u[t]});return this.notify(t,"p"),this.notify(t,"s"),Promise.resolve({})},k.prototype.subscribe=function(t,n,i,e){var r;return void 0===e&&(e=!1),R.default(M.$,"subscribe call",arguments),w.so(t)?(r=this.ii.find(t))?!r.An()&&r.name===t||3===this.se?11!==r.category&&10!==r.category||3===this.se?r.name!==t?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"not customizable subject")):e||w.ue(n)?!e&&-1<r.En().indexOf(0)?Promise.reject(new D.default(I.qt.INVALID_CALL,"already subscribed subject")):this.Vs(r,n,i,{Ws:e}):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"callback must be a function")):Promise.reject(new D.default(I.qt.INVALID_CALL,"poll is a Premium feature")):(r.An()&&this.ii.si(r),Promise.reject(new D.default(I.qt.INVALID_CALL,"custom context is a Premium feature"))):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"subject not exists")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"subject must be a string"))},k.prototype.unsubscribe=function(t,n){return void 0===n&&(n=!1),R.default(M.$,"unsubscribe call",arguments),w.so(t)?(t=this.ii.find(t))?!t.Rn()&&!t.In()||t.Rn()&&void 0===t.listener?Promise.reject(new D.default(I.qt.INVALID_CALL,"not subscribed subject")):this.zs(t,{Ws:n}):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"subject not exists")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"subject must be a string"))},k.prototype.get=function(t){R.default(M.$,"get call",arguments);var n=this.ii.find(t);if(!n||n.name!==t)throw new D.default(I.qt.INVALID_ARGUMENTS,"invalid subject");if(n.In())return n.snapshot;throw new D.default(I.qt.INVALID_CALL,"not subscribed subject")},k.prototype.editUserProfile=function(){var t,n,i,e;return R.default(M.$,"editUserProfile call",arguments),this.Be?Promise.reject(new D.default(I.qt.INVALID_CALL,"not supported using custom auth")):(t=this.ii.find(I.ni.LOGIN_STATUS).snapshot.user)?(n=this.Ie.context.Yt,i=this._whiteLabel,e=null==(e=this.be.get())?void 0:e.siteKey,g.default.editUserProfile(n,e,t.id,i)):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated"))},k.prototype.login=function(t){R.default(M.$,"login call",arguments);var n,i,e,r,s=this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status;return/^DISCONNECTED:/.test(s)?Promise.reject(new D.default(I.qt.INVALID_CALL,"the client is on an unrecoverable disconnection status")):this.we?Promise.reject(new D.default(I.qt.INVALID_CALL,"not supported on this browser")):this.Be?Promise.reject(new D.default(I.qt.INVALID_CALL,"not supported using custom auth")):3===g.default.state.ar?Promise.reject(new D.default(I.qt.INVALID_CALL,"the user is already authenticated")):(s=this.me,n=this.pe,i=this._whiteLabel,s||n||!t||w.so(t)?s||n||!t||void 0!==v.Wt[t]||t===d.default.EMAIL?void 0!==g.default.window?(g.default.window.focus(),Promise.reject(new D.default(I.qt.ALREADY_STARTED,"already opened authentication window"))):(e=this.Ie.context.Yt,r=null==(r=this.be.get())?void 0:r.siteKey,this.ao(s?g.default.ho(e,r,i):g.default.lo(e,t,r,n,i),n,s)):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid provider name")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"provider must be a string")))},k.prototype.Cr=function(){R.default(M.Z,"startProxyLogin");var t=this.me,n=this.pe;return this.ao(g.default.fo(t),n,t)},k.prototype.Nr=function(){R.default(M.Z,"stopProxyLogin"),g.default.do()},k.prototype.ao=function(t,i,e){var n=this;return t.then(function(t){return i||e?h.default.Fe.setItem(i?f.default.q:f.default.W,t):m.default.vo(t),g.default.ke(t.id),t}).then(function(t){return n._e.He(e?v.Gt.NO_REGISTRATION:i?v.Gt.EMAIL:v.Gt.SOCIAL,e?t.token:t)}).then(function(t){return g.default.reset(),n.Ae.Re().then(function(t){return g.default.Me(t)})}).then(function(t){return n.Ue(t),t}).then(function(t){var n=g.default.getDetails();return{user:w.eo(t,!0,n?n.role:null,n?n.badge:null,n?n.preferences:null),persistent:e||i?h.default.Fe.no():!m.default.io()}}).catch(function(t){throw g.default.reset(),g.default.ke(null),n.xe(t),t})},k.prototype.logout=function(){var e,r=this,t=(R.default(M.$,"logout call",arguments),this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status);return/^DISCONNECTED:/.test(t)?Promise.reject(new D.default(I.qt.INVALID_CALL,"the client is on an unrecoverable disconnection status")):this.Be?Promise.reject(new D.default(I.qt.INVALID_CALL,"not supported using custom auth")):3!==g.default.state.ar?Promise.reject(new D.default(I.qt.INVALID_CALL,"already in readOnly state")):(e=g.default.Ve(),new Promise(function(n,i){var t;g.default.state.Ge(2),g.default.ke(null),(r.me?Promise.resolve():(t=r.pe?h.default.Fe.getItem(f.default.q).secret:m.default.mo().wo,r.Ae.po(t))).then(function(t){return r._e.Je()}).then(function(t){g.default.Le()}).then(function(t){return r.Ae.Re().then(function(t){return g.default.Me(t)})}).then(function(t){r.je(!0),n({})}).catch(function(t){r.xe(t),g.default.ke(e),i(t)})}))},k.prototype.post=function(t,n,s){var i,e,o=this;return void 0===s&&(s=!1),R.default(M.$,"post call",arguments),w.so(t)?""===t?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"message can't be empty")):(e=this.ii.find(I.ni.PARAMETERS),i=(i=g.default.getDetails())?i.role:null,e=w.bo(e,i),R.default(M.Z,"using pars: "+e+", "+this.Eo),w.So(t)>e?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"message too long")):"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?null!==this.Eo?Promise.reject(new D.default(I.qt.TOO_FREQUENT,"posting rate exceeded, please wait for the required interval")):!this.Be||g.default.getUser().consent||this._whiteLabel?new Promise(function(r,i){o.Ae.Oo(t,n).then(function(t){var n=t.w||0,t=t.s,i=1e3*n,e={waitPeriod:i};t&&(e.suggestions=t),0!==n&&(o.Eo=window.setTimeout(function(t){o.Eo=null,R.default(M.Z,"Posting re-enabled")},i)),"api+widget"===f.default.S.target&&(o._suggestions=n=t||null,s)&&(i=new a.Ui({suggestions:n}),o.notify(i,"s")),r(e)}).catch(function(t){var n=t;t instanceof D.default||(n="MUTED"===t?new D.default(I.qt.USER_MUTED,"the user is muted"):"SEND_RATE"===t?new D.default(I.qt.TOO_FREQUENT,"the message was posted before resendTimeout has expired"):"MODERATION"===t?new D.default(I.qt.CANNOT_MODERATE,"the automatic content filtering system doesn't respond"):"CHAT_DISABLED"===t?new D.default(I.qt.CHAT_DISABLED,"the chat is currently disabled"):"FILTERED"===t?new D.default(I.qt.BLOCKED,"the message was blocked by an automatic moderation filter as it was deemed inappropriate"):"CHATBOT"===t?new D.default(I.qt.CHATBOT,"an error occurred with the site's chatbot. Please try again"):new D.default(I.qt.TECHNICAL_PROBLEM,"")),i(n)})}):Promise.reject(new D.default(I.qt.INVALID_CALL,"the consent of the current user has not been recorded")):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated"))):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"message must be a string"))},k.prototype.deleteMessage=function(t){return t?w.so(t)?this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.Po(t):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"msgId must be a string")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"msgId is required"))},k.prototype.flushChat=function(){var t;return this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?(t=g.default.getDetails())&&t.role===d.default.Rt?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.To().then(function(t){return{}}):Promise.reject(new D.default(I.qt.INVALID_CALL,"the user is not a MODERATOR")):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated"))},k.prototype.setChatEnabled=function(t){var n;return void 0!==t&&w.Co(t)?this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?(n=g.default.getDetails())&&n.role===d.default.Rt?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.No(t).then(function(t){return{}}):Promise.reject(new D.default(I.qt.INVALID_CALL,"the user is not a MODERATOR")):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid enabled argument"))},k.prototype.getMute=function(t){return R.default(M.$,"getMute call",arguments),void 0!==t&&w.so(t)?this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae._o(t).then(function(t){return t?{expiration:(t=t.expiration)?new Date(t).getTime():null}:null}):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid userId argument"))},k.prototype.setMute=function(t,n){var i;return R.default(M.$,"setMute call",arguments),void 0!==t&&w.so(t)?void 0===n||null!==n&&!w.Do(n)?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid duration argument")):this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?(i=g.default.getDetails())&&i.role===d.default.Rt?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.yo(t,n).then(function(t){return t?{expiration:(t=t.expiration)?new Date(t).getTime():null}:null}):Promise.reject(new D.default(I.qt.INVALID_CALL,"the user is not a MODERATOR")):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid userId argument"))},k.prototype.startTyping=function(){var i=this;return R.default(M.$,"startTyping call",arguments),this.ts[this.ii.find(d.default.nt).toString()]?Promise.reject(new D.default(I.qt.INVALID_CALL,"the user has already started to type")):new Promise(function(t,n){i.Fs().then(function(){t({})}).catch(function(t){n(t)})})},k.prototype.stopTyping=function(){return R.default(M.$,"stopTyping call",arguments),this.ts[this.ii.find(d.default.nt).toString()]?(this.Gs(),Promise.resolve({})):Promise.reject(new D.default(I.qt.INVALID_CALL,"the user has already stopped to type"))},k.prototype.reload=function(t){if(this.Ee)throw new Error("Unsupported feature");var n=null!=(n=null==t?void 0:t.startOpen)&&n,i=null!=(i=null==t?void 0:t.updatedSiteConf)?i:null,t=null==(t=null==t?void 0:t.reloadScriptConf)||t;this.notify(new O.Ri(n,i,t),"p")},k.prototype.reportMessage=function(t,n,i){R.default(M.$,"reportMessage call",arguments);var e="invalid msgId argument",r="invalid reason argument";return void 0!==t&&w.so(t)?void 0!==n&&w.so(n)?i&&!w.so(i)?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid comment argument")):i&&500<i.length?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"comment too long")):this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.Io(t,n,i).catch(function(t){var n=t;throw n=t instanceof D.default?n:"INVALID_MESSAGE_ID"===t?new D.default(I.qt.INVALID_ARGUMENTS,e):"INVALID_REASON"===t?new D.default(I.qt.INVALID_ARGUMENTS,r):"DUPLICATED"===t?new D.default(I.qt.ALREADY_REPORTED,"the user has already reported the msg"):"MUTED"===t?new D.default(I.qt.USER_MUTED,"the user is muted"):new D.default(I.qt.TECHNICAL_PROBLEM,"")}):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,r)):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,e))},k.prototype.registerUserConsent=function(){var t,n=this;return R.default(M.$,"registerUserConsent call",arguments),this.Be?(t=g.default.getUser())?t.consent?Promise.resolve({}):"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.Ro().then(function(t){return g.default.Ao(),n.Ue(g.default.getUser()),{}}):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_CALL,"feature not supported in the current authentication mode"))},k.prototype.createPoll=function(t,n,i){var e;return R.default(M.$,"createPoll call",arguments),!t||!w.so(t)||100<w.So(t)?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid question argument")):!n||!w.isArray(n)||n.length<2||10<n.length||n.some(function(t){return!w.so(t)||25<w.So(t)})?Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid answers argument")):void 0===(i=null==i?void 0:i.multipleChoice)||w.Co(i)?3!==this.se?Promise.reject(new D.default(I.qt.INVALID_CALL,"poll is a Premium feature")):this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?!(e=g.default.getDetails())||e.role!==d.default.Rt&&e.role!==d.default.At?Promise.reject(new D.default(I.qt.INVALID_CALL,"the user is not a MODERATOR or GUEST")):"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):(n=n.map(function(t){return t.trim()}),this.Ae.Mo(t,n,i?n.length:1).catch(function(t){var n=t;throw n=t instanceof D.default?n:"ALREADY_PRESENT"===t?new D.default(I.qt.ALREADY_PRESENT,"there is already an active poll"):"DISABLED"===t?new D.default(I.qt.CHAT_DISABLED,"the chat was disabled by the Administrator"):new D.default(I.qt.TECHNICAL_PROBLEM,"")})):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid options argument"))},k.prototype.closePoll=function(t){var n;return void 0===t&&(t=!1),R.default(M.$,"closePoll call",arguments),void 0===t||w.Co(t)?3!==this.se?Promise.reject(new D.default(I.qt.INVALID_CALL,"poll is a Premium feature")):this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?!(n=g.default.getDetails())||n.role!==d.default.Rt&&n.role!==d.default.At?Promise.reject(new D.default(I.qt.INVALID_CALL,"the user is not a MODERATOR or GUEST")):"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.Uo(t).catch(function(t){var n=t;throw n=t instanceof D.default?n:"NOT_FOUND"===t?new D.default(I.qt.NOT_FOUND,"there is no active poll"):new D.default(I.qt.TECHNICAL_PROBLEM,"")}):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid remove argument"))},k.prototype.sendVote=function(i){return R.default(M.$,"sendVote call",arguments),i&&w.isArray(i)&&!i.some(function(t){return!w.Do(t)||!i.every(function(t,n){return i.indexOf(t)===n})})?3!==this.se?Promise.reject(new D.default(I.qt.INVALID_CALL,"poll is a Premium feature")):this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.ko(i).catch(function(t){var n=t;throw n=t instanceof D.default?n:"INVALID_VOTE"===t?new D.default(I.qt.INVALID_ARGUMENTS,"invalid votes argument"):"NOT_FOUND"===t?new D.default(I.qt.NOT_FOUND,"there is no active poll"):"CLOSED"===t?new D.default(I.qt.CLOSED,"the current poll has already been closed"):"DISABLED"===t?new D.default(I.qt.CHAT_DISABLED,"the chat is currently disabled"):new D.default(I.qt.TECHNICAL_PROBLEM,"")}):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new D.default(I.qt.INVALID_ARGUMENTS,"invalid votes argument"))},k.prototype.getPollVote=function(){return R.default(M.$,"getPollVote call",arguments),3!==this.se?Promise.reject(new D.default(I.qt.INVALID_CALL,"poll is a Premium feature")):this.ii.find(I.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===this.ii.find(I.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new D.default(I.qt.DISCONNECTED,"the client is disconnected from the server")):this.Ae.xo().then(function(t){return{vote:t.vote||[]}}).catch(function(t){var n=t;throw n=t instanceof D.default?n:"NOT_FOUND"===t?new D.default(I.qt.NOT_FOUND,"there is no active poll"):new D.default(I.qt.TECHNICAL_PROBLEM,"")}):Promise.reject(new D.default(I.qt.NOT_AUTHENTICATED,"the user is not authenticated"))},k);function k(){var n,i=this;this.version="0.106.0-66-g7e5ee94",this.ts={},this.Eo=null,this.Ke=!1,this.ii=o.default.ei(),this.Ee=!1,this.Be=!1,this.me=!1,this.pe=!1,this.we=!1,this.We=[],u.default(),this.Se()&&(n=this.cr(),this.pr(),this.Ie=s.default.ei(),this.Ee||top===self||this.Ie.init().then(function(t){if(R.default(M.Z,"Retrieved context",t),i.context=t,i._ourOrigin=i.context.zt,i._parentOrigin=i.context.Ti,h.default.Ti=i.context.Ti,P.ci())throw new D.default(I.qt.TECHNICAL_PROBLEM,"Unsupported browser");i.be=new C.default(i.context.Yt,i.context.zt,i.context.Kt),i.be.$t(n).then(function(t){i.start()}).catch(function(t){R.default(M.K,t),i.oe(t)})}).catch(function(t){i.oe(t)}))}W.te=H}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,10:10,11:11,12:12,13:13,14:14,15:15,18:18,19:19,2:2,20:20,21:21,23:23,24:24,25:25,26:26,27:27,28:28,3:3,30:30,31:31,32:32,34:34,35:35,36:36,37:37,39:39,41:41,42:42,43:43,44:44,45:45,5:5,6:6,7:7,9:9}],18:[function(t,n,i){var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},r=(Object.defineProperty(i,"t",{value:!0}),t(41)),u=t(1),e=t(7),a=t(2),s=t(43),c=t(45),h=t(44),l=t(35),f=t(2),t=(d.prototype.Lo=function(t){this.mode=t?"nore":"oauth",window.addEventListener("message",this.jo,!1)},d.prototype.Fo=function(){this.mode=null,window.removeEventListener("message",this.jo)},d.prototype.onError=function(t){this.promise.Go(t),this.state.Ge(this.state.Ho),this.state.Ho=void 0,this.reset()},d.prototype.Zs=function(){return this.authorization},d.prototype.reset=function(){this.Jo&&(clearInterval(this.Jo),this.Jo=void 0),void 0!==this.window&&(this.window.close(),this.window=void 0),this.promise.reset(),this.Fo()},d.prototype.fo=function(i){var e=this;return new Promise(function(t,n){e.promise.set(t,n),e.state.Ho=e.state.ar,e.state.Ge(1),e.Lo(i)})},d.prototype.do=function(){var t,n;null!=(n=(t=this.promise).Go)&&n.call(t),this.reset()},d.prototype.Vo=function(t,n,i){var e=this,t=(void 0===n&&(n=!1),void 0===i&&(i=!0),window.open(t,"login"));return r.Wo(t)?Promise.reject(new s.default(h.qt.BLOCKED,"authentication popup was blocked")):i?(this.window=t,this.state.Ho=this.state.ar,this.state.Ge(1),this.Lo(n),new Promise(function(t,n){e.promise.set(t,n),e.Jo=window.setInterval(function(t){try{e.window&&!e.window.opener&&void 0!==u.default.P.file_name?(l.default(f.Z,"Found communication issue",e.window,e.window.opener),1===e.state.ar&&e.onError(new s.default(h.qt.TECHNICAL_PROBLEM,"cannot access authentication page"))):e.window&&e.window.closed&&(l.default(f.Z,"Auth window closed"),1===e.state.ar)&&e.onError(new s.default(h.qt.ABORTED,"closed authentication window"))}catch(t){l.default(f.K,t)}},u.default.L)})):Promise.resolve({})},d.prototype.Bo=function(t,n){var i=u.default.S.widget,t={site:t,lang:i.language};return!1!==n&&(t.wl=n,t.logo=i.logo_url,t.bgColor=i.color_internal_background),t},d.prototype.editUserProfile=function(t,n,i,e){i=c.wr(u.default.fe,"email-signin/step1",o({action:"EDIT_PROFILE",userId:i,siteKey:n},this.Bo(t,e)));return this.Vo(i,!1,!1)},d.prototype.lo=function(t,n,i,e,r){var s=u.default.S.widget,n=c.wr(u.default.fe,"oauth-signin",o({provider:e?a.default.EMAIL:n,siteKey:e?i:null,cm:e?s.consent_message:null},this.Bo(t,r)));return this.Vo(n)},d.prototype.ho=function(t,n,i){var e=u.default.S.widget,n=c.wr(u.default.fe,"no-registration-signin",o({siteKey:n,cm:e.consent_message},this.Bo(t,i)));return this.Vo(n,!0)},d.prototype.Ao=function(){this.qo=o(o({},this.getUser()),{consent:!0})},d.prototype.ke=function(t){this.Yo=t},d.prototype.Me=function(t){l.default(f.Z,"storeDetails",t);var n=t.authentication,i=t.authorization,i=(n&&(this.qo=o({icon:null,consent:!0},n),this.Yo=n.id),i&&(this.authorization=i),null),e=t.role,n=(e&&(i={role:(e=r.Ds(e,n&&n.badge,n&&n.badgeFg,n&&n.badgeBg)).role,badge:e.badge}),t.preference);if(n)try{(i=i||{}).preferences=JSON.parse(n)}catch(t){l.default(f.K,t)}return i&&(this.details=i),this.getUser()},d.prototype.Le=function(){l.default(f.Z,"resetDetails"),this.qo=null,this.details=null,this.authorization=null,this.Yo=null},d.prototype.Rs=function(t,n){l.default(f.Z,"updateRole",t,n);var i=this.details||{};t?(i.role=t,i.badge=n):(delete i.role,delete i.badge),Object.keys(i).length?this.details=i:this.details=null},d.prototype.zo=function(t){l.default(f.Z,"updatePreferences",t);var n=this.details||{};t?n.preferences=t:delete n.preferences,Object.keys(n).length?this.details=n:this.details=null},d.prototype.getUser=function(){return this.qo&&r.bn(this.qo)},d.prototype.Ve=function(){return this.Yo},d.prototype.getDetails=function(){return this.details&&r.bn(this.details)},d);function d(){var i=this;this.state={Ho:void 0,ar:0,Ge:function(t){this.ar=t}},this.Ae=void 0,this.on=void 0,this.window=void 0,this.Jo=void 0,this.promise={Ko:void 0,Go:void 0,set:function(t,n){this.Ko=t,this.Go=n},reset:function(){this.Go=this.Ko=void 0}},this.Yo=null,this.jo=function(t){var n=u.default.P.our_origin;t.origin===n&&t&&t.data&&t.data.fn===i.mode+".callback"&&t.data.payload&&(l.default(f.Z,"userAppResponseListener",t.data),i.state.Ge(2),e.default.on.Xo()&&e.default.on.$o(),i.Jo&&(clearInterval(i.Jo),i.Jo=void 0),i.promise.Ko(t.data.payload))}}i.default=new t},{1:1,2:2,35:35,41:41,43:43,44:44,45:45,7:7}],19:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(1),r=t(41),s=t(5),o=t(3),u=t(35),a=t(2),t=(c.prototype.init=function(t){var n=this,t=t.authorization;this.state=this.Qo(t),(null==(t=null==(t=e.default.S)?void 0:t.custom_auth)?void 0:t.enabled)||s.default.subscribe(o.Ft.Authentication,function(t){t=n.Qo((null==t?void 0:t.authorization)||{});r.ro(n.state,t)||(n.state=t,r.ue(n.Zo)&&n.Zo(t))})},c.prototype.Ce=function(t){this.Zo=t},c.prototype.De=function(){return r.bn(this.perms)},c.prototype.tu=function(t,n,i,e){var r=[];t&&r.push("chatR"),n&&r.push("chatW"),i&&r.push("siteR"),e&&r.push("pageR"),this.perms=r},c.prototype.Qo=function(t){function n(t){return!1!==t}u.default(a.Z,"computeState",t);var i=n(t.chatR),e=n(t.chatW),r=n(t.siteR),t=n(t.pageR);return this.tu(i,e,r,t),{chatView:i,chatPost:e,siteCounterView:r,pageCounterView:t}},c);function c(){}i.default=new t},{1:1,2:2,3:3,35:35,41:41,5:5}],20:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(1),r=t(10),a=t(41),c=t(43),h=t(44),l=e.default.V,f=t(35),d=t(2);function s(t){this.site=t,this.nu()}s.prototype.iu=function(){return e.default.A&&r.wi()},s.prototype.eu=function(){try{return JSON.parse(localStorage.getItem(l)||"{}")}catch(t){return f.default(d.K,"error parsing browser preferences",t),{}}},s.prototype.nu=function(){if(this.iu()){var t=this.eu(),n=Object.keys(t);if(n.length){for(var i=0,e=n;i<e.length;i++){var r=e[i],s=t[r]||{},o=Object.keys(s);if(o.length){for(var u=0,a=o;u<a.length;u++){var c=a[u],h=s[c];h.exp&&Date.now()>h.exp&&delete s[c]}Object.keys(s).length||delete t[r]}}Object.keys(t).length?localStorage.setItem(l,JSON.stringify(t)):localStorage.removeItem(l)}}},s.prototype.getItem=function(r){var s=this;return new Promise(function(t,n){if(r&&a.so(r)){if(s.iu()){var i=s.eu(),e=i[s.site];if(f.default(d.Z,"browserPreferences.getItem",i,e),e){i=e[r];if(i){e=i.exp,i=i.val;if(!e||Date.now()<=e)return void t(i)}}}t(null)}else n(new c.default(h.qt.INVALID_ARGUMENTS,"key must be a string"))})},s.prototype.setItem=function(r,s,o){var u=this;return new Promise(function(t,n){var i,e;r&&a.so(r)?void 0!==s&&(a.so(s)||a.Do(s)||a.Co(s))?void 0===o||a.Do(o)?(u.iu()&&(i=u.eu(),e={val:s},o&&(e.exp=Date.now()+o),f.default(d.Z,"browserPreferences.setItem",i,i[u.site],e),i[u.site]=i[u.site]||{},i[u.site][r]=e,localStorage.setItem(l,JSON.stringify(i))),t()):n(new c.default(h.qt.INVALID_ARGUMENTS,"expirationInMs must be a number")):n(new c.default(h.qt.INVALID_ARGUMENTS,"value must be a string, a number or a boolean")):n(new c.default(h.qt.INVALID_ARGUMENTS,"key must be a string"))})},s.prototype.removeItem=function(r){var s=this;return new Promise(function(t,n){var i,e;r&&a.so(r)?s.iu()?(e=(i=s.eu())[s.site],f.default(d.Z,"browserPreferences.removeItem",i,e),e&&void 0!==e[r]&&(delete e[r],Object.keys(e).length||delete i[s.site],Object.keys(i).length?localStorage.setItem(l,JSON.stringify(i)):localStorage.removeItem(l),t())):t():n(new c.default(h.qt.INVALID_ARGUMENTS,"key must be a string"))})},i.default=s},{1:1,10:10,2:2,35:35,41:41,43:43,44:44}],21:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(2),r=t(10),s=t(41),o=t(35),u=t(2),t=(a.prototype.io=function(){return this.ru},a.prototype.su=function(){this.ru=!0,o.default(u.Z,"SwitchToSessionMode call")},a.prototype.ou=function(){return r.wi()||this.ru?this.ru?null!==this.uu:!!localStorage.getItem(e.default.Dt):null},a.prototype.mo=function(){if(this.ru)return{userId:this.uu.id,wo:this.uu.secret||null};try{var t=JSON.parse(localStorage.getItem(e.default.Dt));return{userId:t.id,wo:t.secret}}catch(t){return null}},a.prototype.vo=function(t,n){void 0===n&&(n=!1),this.ru||r.wi()&&!n||this.su(),this.ru?this.uu=t:localStorage.setItem(e.default.Dt,JSON.stringify(t)),o.default(u.Z,"User information stored (for_session="+this.ru+")",t)},a.prototype.au=function(t){r.wi()&&(localStorage.setItem(e.default.yt,JSON.stringify({val:t,exp:Date.now()+36e5})),o.default(u.Z,"control link stored",t))},a.prototype.cu=function(){if(r.wi())try{var t=localStorage.getItem(e.default.yt),n=t&&JSON.parse(t);if(n){if(Date.now()<n.exp)return n.val;this.hu()}}catch(t){o.default(u.K,"error parsing control link",t),this.hu()}return null},a.prototype.hu=function(){r.wi()&&localStorage.removeItem(e.default.yt)},a.prototype.Qs=function(){this.ru?this.uu=null:localStorage.removeItem(e.default.Dt),o.default(u.Z,"DeleteCredential call")},a.prototype.getUser=function(){return this.ou()?this.ru?this.uu:JSON.parse(localStorage.getItem(e.default.Dt)):null},a.prototype.Is=function(t,n){if(this.ou()){var i=void 0;if((i=this.ru?this.uu:JSON.parse(localStorage.getItem(e.default.Dt)))&&(i.nick!==t||i.icon!==n))return i.nick=t,i.icon=n,this.vo(i),o.default(u.Z,"User info updated",i),!0}return!1},a.prototype.watch=function(i,e){var t;return this.ru?null:(t=function(t){var n;t.key===i&&(n=JSON.parse(t.newValue||null),t=JSON.parse(t.oldValue||null),s.ro(n,t)||null!=e&&e(n,t))},window.addEventListener("storage",t),function(){window.removeEventListener("storage",t)})},a);function a(){this.ru=!1,this.uu=null}i.default=new t},{10:10,2:2,35:35,41:41}],22:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var s=t(41),e=t(1),r=t(10),o=t(35),u=t(2);function a(t){this.siteKey=t,this.iu()||(this.lu={}),o.default(u.Z,"StoragePerSite init",t,!!this.lu)}a.prototype.iu=function(){return e.default.A&&r.wi()},a.prototype.eu=function(){if(this.lu)return this.lu;try{return JSON.parse(localStorage.getItem(this.siteKey)||"{}")}catch(t){return o.default(u.K,"error parsing bucket for: "+this.siteKey,t),{}}},a.prototype.fu=function(){return this.siteKey},a.prototype.getItem=function(t){return this.eu()[t]},a.prototype.setItem=function(t,n){var i=this.eu();return i[t]=n,this.lu||localStorage.setItem(this.siteKey,JSON.stringify(i)),n},a.prototype.removeItem=function(t){var n=this.eu();delete n[t],this.lu||(Object.keys(n).length?localStorage.setItem(this.siteKey,JSON.stringify(n)):localStorage.removeItem(this.siteKey))},a.prototype.watch=function(i,e){var t,r=this;return this.lu?null:(t=function(t){var n;t.key===r.siteKey&&(n=null==(n=JSON.parse(t.newValue||null))?void 0:n[i],t=null==(t=JSON.parse(t.oldValue||null))?void 0:t[i],s.ro(n,t)||null!=e&&e(n,t))},window.addEventListener("storage",t),function(){window.removeEventListener("storage",t)})},a.prototype.no=function(){return!this.lu},i.default=a},{1:1,10:10,2:2,35:35,41:41}],23:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(40),r=t(3),s=t(41),o=t(35),u=t(2);function a(){this.du={},this.vu=new e.default}a.prototype.get=function(t){return this.du[t]},a.prototype.set=function(t){var n=t.id,i=!!this.du[n],e=i&&s.ro(t,this.du[n]);this.du[n]=t,this.vu.publish(n,t),i?e||(this.vu.publish(r.Ft.UserUpdated,t),o.default(u.Z,"Updated details for user with id: "+n)):o.default(u.Z,"Saved details for user with id: "+n)},a.prototype.watch=function(t,n){return this.vu.subscribe(t,n),o.default(u.Z,"Suscribed "+t+" topic"),n},a.prototype.unwatch=function(t,n){this.vu.unsubscribe(t,n),o.default(u.Z,"Unsuscribed "+n+" from "+t+" topic")},i.default=a},{2:2,3:3,35:35,40:40,41:41}],24:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var s=t(41),o=t(18),u=t(43),a=t(44),c=t(35),h=t(2);function e(t,n,i){this.Ae=t,this.wu=n,this.mu=i}e.prototype.pu=function(t){var n=o.default.getDetails();return n&&n.preferences?t?n.preferences[t]||null:n.preferences:null},e.prototype.bu=function(){var t=o.default.getUser();s.ue(this.mu)&&this.mu(t)},e.prototype.getItem=function(t){var n;return c.default(h.$,"userPreferences.getItem call",arguments),void 0===t?Promise.reject(new u.default(a.qt.INVALID_ARGUMENTS,"invalid key argument")):s.so(t)?(n=this.wu()).find(a.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===n.find(a.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new u.default(a.qt.DISCONNECTED,"the client is disconnected from the server")):Promise.resolve(this.pu(t)):Promise.reject(new u.default(a.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new u.default(a.qt.INVALID_ARGUMENTS,"key must be a string"))},e.prototype.setItem=function(t,n){var i,e,r=this;return c.default(h.$,"userPreferences.setItem call",arguments),void 0===t?Promise.reject(new u.default(a.qt.INVALID_ARGUMENTS,"invalid key argument")):s.so(t)?void 0===n?Promise.reject(new u.default(a.qt.INVALID_ARGUMENTS,"invalid value argument")):(i=this.wu()).find(a.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===i.find(a.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new u.default(a.qt.DISCONNECTED,"the client is disconnected from the server")):((e=this.pu()||{})[t]=n,this.Ae.Eu(JSON.stringify(e)).then(function(t){o.default.zo(e),r.bu()}).catch(function(t){var n=t;throw n=t instanceof u.default?n:"VALUE_TOO_LONG"===t?new u.default(a.qt.QUOTA_EXCEEDED,"not enough remaining space for writing this key"):new u.default(a.qt.TECHNICAL_PROBLEM,"")})):Promise.reject(new u.default(a.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new u.default(a.qt.INVALID_ARGUMENTS,"key must be a string"))},e.prototype.removeItem=function(t){var n,i,e=this;return c.default(h.$,"userPreferences.removeItem call",arguments),void 0===t?Promise.reject(new u.default(a.qt.INVALID_ARGUMENTS,"invalid key argument")):s.so(t)?(n=this.wu()).find(a.ni.LOGIN_STATUS).snapshot.user?"DISCONNECTED"===n.find(a.ni.CONNECTION_STATUS).snapshot.status?Promise.reject(new u.default(a.qt.DISCONNECTED,"the client is disconnected from the server")):(delete(i=this.pu()||{})[t],this.Ae.Eu(Object.keys(i).length?JSON.stringify(i):null).then(function(t){o.default.zo(Object.keys(i).length?i:null),e.bu()})):Promise.reject(new u.default(a.qt.NOT_AUTHENTICATED,"the user is not authenticated")):Promise.reject(new u.default(a.qt.INVALID_ARGUMENTS,"key must be a string"))},i.default=e},{18:18,2:2,35:35,41:41,43:43,44:44}],25:[function(t,n,i){var c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},d=(Object.defineProperty(i,"t",{value:!0}),t(35)),v=t(2),w=t(41),l=t(2),e=t(1),m=t(18),r=t(40),s=t(38);function o(){this.gu=new s.default(!0,1e4,"cm")}o.ei=function(){return o.ri=o.ri?o.ri:new o},o.prototype.init=function(n){if(this.Su=[],this.Qr=n,this.Ou={},this.Pu=new r.default,"api"!==e.default.S.target){n="(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}.{1,10}\\u{E007F}|(?:[\\p{Emoji_Presentation}\\p{Other_Symbol}]\\uFE0F?|[\\p{Letter}\\p{Number}\\p{Symbol}\\p{Punctuation}]\\uFE0F)[\\p{Emoji_Modifier}\\p{Enclosing_Mark}]*(?:\\u200D[\\p{Emoji}\\p{Number}\\p{Symbol}\\p{Punctuation}\\p{Enclosing_Mark}]\\uFE0F?\\p{Emoji_Modifier}*)*)";try{this.Tu=new RegExp(n+"(?<!\\uFE0E)","gu")}catch(t){d.default(v.K,"Error parsing emoji regex",t),this.Tu=new RegExp(n,"gu")}}},o.prototype.get=function(){return this.Su},o.prototype.Cu=function(i){var e=this;return new Promise(function(n){for(var t=0;t<e.Su.length;t++)if(e.Su[t].id===i)return d.default(v.Z,"msg resolved from snapshot",e.Su[t]),void n(e.Su[t]);e.Ou[i]?(d.default(v.Z,"msg resolved from outdates",e.Ou[i]),n(e.Ou[i])):e.Pu.subscribe(i,function(t){d.default(v.Z,"msg resolved",t),n(t)})})},o.prototype.As=function(t){var n,i=this,t=w.Ps(t.getValue,t),e=t(l.default.st),r=t(l.default.rt),s=t("i"),o=t("u"),u=t("p"),a=t("s"),c=t("r"),h=t("d");switch(d.default(v.Z,"Chat handle "+e+" "+r,this.gu.Nu()),e){case l.default.ot:return"o"!==a?(n=[this.Qr(o)],c&&n.push(this.Cu(c)),this.gu.add(function(t){return Promise.all(n)}).then(function(t){return i._u(r,s,u,h,t[0],t[1])})):this.gu.add(function(t){return i.Qr(o)}).then(function(t){return i.Du(r,s,u,h,t)});case l.default.ut:return this.gu.add(function(t){return i.Cu(r)}).then(function(t){return i.yu(r,!0)});case l.default.UPDATE:return"o"===a?this.gu.add(function(t){return i.Cu(r)}).then(function(t){return i.yu(r,!1)}):this.gu.add(function(t){return i.Cu(r)}).then(function(t){return i.Iu(t,h,u)})}},o.prototype.Ru=function(t,n,i,e,r,s){var o,u=m.default.Ve();if(!i)switch(e){case"u":o="BY_AUTHOR";break;case"d":o="BY_ADMINISTRATOR";break;case"m":o="BY_MODERATOR";break;case"n":o="BY_NOW4REAL";break;case"r":o="BY_AI";break;default:o="UNKNOWN"}e={id:t,author:r||null,message:i||null,time:w.Cs(n),isMine:r?r.id===u:null};if(o&&(e.deleted=o),s&&(e.repliesTo=s),i&&this.Tu)try{for(var a=i.matchAll(this.Tu),c=i,h=0,l=a.next();!l.done;){var f=l.value[0];if(h+=1,c=c.replace(f,""),3<h)break;l=a.next()}0<h&&h<4&&!c.trim().length&&(e.emojisCount=h)}catch(t){d.default(v.K,"match error",t)}return e},o.prototype.Du=function(t,n,i,e,r){n=this.Ru(t,n,i,e,r);return this.Ou[t]=n,this.Pu.publish(t,n),this.Pu.Au(t),null},o.prototype._u=function(t,n,i,e,r,s){var o=this.Ru(t,n,i,e,r,s);if(0===this.Su.length)d.default(v.Z,"insert "+t+" at head",this.Su.length),this.Su.push(o);else for(var u=this.Su.length-1;0<=u;u--){if(o.time>=this.Su[u].time){d.default(v.Z,"insert "+t+" at index "+(u+1),this.Su.length),this.Su.splice(u+1,0,o);break}0===u&&(d.default(v.Z,"insert "+t+" at head",this.Su.length),this.Su.unshift(o))}return this.Pu.publish(t,o),this.Pu.Au(t),[c({action:"ADD"},o)]},o.prototype.Mu=function(t){var n=t,i=n.id;if(0===this.Su.length)d.default(v.Z,"reinsert "+i+" at head",this.Su.length),this.Su.push(n);else for(var e=this.Su.length-1;0<=e;e--){if(n.time>=this.Su[e].time){d.default(v.Z,"reinsert "+i+" at index "+(e+1),this.Su.length),this.Su.splice(e+1,0,n);break}0===e&&(d.default(v.Z,"reinsert "+i+" at head",this.Su.length),this.Su.unshift(n))}return this.Pu.publish(i,n),this.Pu.Au(i),delete this.Ou[i],[c({action:"ADD"},n)]},o.prototype.yu=function(t,n){for(var i=0;i<this.Su.length;i++){var e=this.Su[i];if(t===e.id){n?delete this.Ou[t]:this.Ou[t]=e,this.Su.splice(i,1);break}}var r=this.Ru(t,null,null,null,null);return[c({action:"REMOVE"},r)]},o.prototype.Iu=function(t,n,i){for(var e=-1,r=0;r<this.Su.length;r++)if(t.id===this.Su[r].id){e=r;break}if(-1===e)return this.Mu(t);if(t.moderated||i)return[];for(var s=this.Su[e],o=this.Ru(s.id,s.time.toString(16),null,n,s.author,null),u=(this.Su.splice(e,1,o),[c({action:"UPDATE"},o)]),r=0;r<this.Su.length;r++){var a=this.Su[r];a.repliesTo&&a.repliesTo.id===s.id&&(a.repliesTo=o,this.Su.splice(r,1,a),u.push(c({action:"UPDATE"},a)))}return u},o.prototype.Is=function(t){for(var n=[],i=0;i<this.Su.length;i++){var e=this.Su[i],r=w.bn(e),s=!1;e.author.id===t.id&&(r.author=t,s=!0),e.repliesTo&&e.repliesTo.id===t.id&&(r.repliesTo.author=t,s=!0),s&&(this.Su.splice(i,1,r),n.push(c({action:"UPDATE"},r)))}return n},o.prototype.$s=function(){var r=this;this.gu.Xs();return this.gu.add(function(t){return Promise.resolve((()=>{for(var t=r.get(),n=[],i=0;i<t.length;i++){var e=r.Ru(t[i].id,null,null,null,null);n.push(c({action:"REMOVE"},e))}return r.Su=[],r.Ou={},n})())})},o.prototype.snapshot=function(){for(var t=this.get(),n=[],i=0;i<t.length;i++)n.push(c({action:"ADD"},t[i]));return n},o.prototype.Xs=function(){this.gu.Xs()},i.default=o},{1:1,18:18,2:2,35:35,38:38,40:40,41:41}],26:[function(t,n,i){var a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},c=(Object.defineProperty(i,"t",{value:!0}),t(35)),h=t(2),l=t(41);function e(){this.Uu={}}e.ei=function(){return e.ri=e.ri?e.ri:new e},e.prototype.init=function(t){this.Uu[t]={},c.default(h.Z,"Initialized "+t+" heatmap")},e.prototype.get=function(t){return this.Uu[t]},e.prototype.As=function(n,t){var i,e,r,s=this,t=l.Ps(t.getValue,t),o=t("c"),t=t("h"),u=[];return o&&t?(i=a({},this.Uu[n]),e=l.ku(o,t),c.default(h.Z,"handle "+n+" heatmap",o,t,e),(r=Object.keys(e)).length&&r.forEach(function(t){s.Uu[n][t]=e[t],u.push({country:t,intensity:e[t]}),delete i[t]}),(o=Object.keys(i)).length&&(c.default(h.Z,"missing on "+n+" heatmap",o),o.forEach(function(t){delete s.Uu[n][t],u.unshift({country:t,intensity:0})}))):(r=Object.keys(this.Uu[n])).length&&r.forEach(function(t){delete s.Uu[n][t],u.push({country:t,intensity:0})}),u},e.prototype.$s=function(t){var n,i=[];for(n in this.get(t))i.push({country:n,intensity:null});return this.Uu[t]={},i},e.prototype.snapshot=function(t){var n,i=this.get(t),e=[];for(n in i)e.push({country:n,intensity:i[n]});return e},i.default=e},{2:2,35:35,41:41}],27:[function(t,n,i){var h=this&&this.__assign||function(){return(h=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},l=(Object.defineProperty(i,"t",{value:!0}),t(35)),f=t(2),d=t(41),a=t(2),u=t(1);function e(){this.xu={}}e.ei=function(){return e.ri=e.ri?e.ri:new e},e.prototype.init=function(t,n,i){this.xu[t]={map:{},buffer:{}},l.default(f.Z,"Initialized "+t+" ranking"),this.Ie=n,this.Ee=i},e.prototype.get=function(t,n){void 0===n&&(n=!1);var i,e=[],r=this.xu[t].map;for(i in r){var s=d.bn(r[i]);n&&delete s.position,e[r[i].position-1]=s}return e},e.prototype.As=function(t,n){var i=d.Ps(n.getValue,n),e=t.id,r=i(a.default.st),s=i(a.default.rt),o=this.Lu(n,t),u=this.xu[e].buffer;switch(r){case a.default.ot:u[s]=o,l.default(f.Z,s+" ranking: adding "+s);break;case a.default.UPDATE:u[s]=o,l.default(f.Z,s+" ranking: updating "+s);break;case a.default.ut:delete u[s],l.default(f.Z,s+" ranking: deleting "+s)}if(this.ju(e)){i=this.Fu(e);if(i)return this.xu[e].map=d.bn(u),i}return null},e.prototype.Fu=function(t){var n,i=this.xu[t].buffer,e=this.xu[t].map,r=0,s=0,o=0,u=[];for(n in e)void 0===i[n]&&(r++,u.push(h({action:"LEAVE",key:e[n].key,position:null,users:e[n].users,title:e[n].title,url:e[n].url,isCurrentPage:e[n].isCurrentPage},this.Ee&&{favicon:e[n].favicon})));for(n in i){var a=d.bn(i[n]),c=e[n];void 0===c?(s++,a.action="ENTER",u.push(a)):d.ro(c,a)||(o++,a.action="UPDATE",u.push(a))}return l.default(f.Z,"Diff "+t+" ranking: "+s+" add, "+o+" upd, "+r+" del",i,e),u},e.prototype.ju=function(t){for(var n=this.xu[t].buffer,t=Object.keys(n),i=t.length,e=t.map(function(t){return n[t].position}),r=1;r<=i;r++)if(-1===e.indexOf(r))return!1;return!0},e.prototype.Lu=function(t,n){var i,t=d.Ps(t.getValue,t),e=t(a.default.st),r=t(a.default.rt),s=t("i")?Number(t("i"))+1:"",o={};return(o[a.default.rt]=r).startsWith(u.default.R)?(o.url=null,o.title=2===n.context?"Now4real Shared Public Sandbox":"Now4real Sandbox: "+r.substring(u.default.R.length)):(n=("s"===t("p")?"https":"http")+"://"+r,i=t("t"),o.url=n,i?o.title=i:(i=d.Oe(n),o.title=i.pathname+i.search+i.hash)),o.users=t("c"),o.position=s,o.isCurrentPage=this.Ie.Gu(r),this.Ee&&(o.favicon=t("f")),e===a.default.ut&&(o.url=o.title=o.users="",this.Ee)&&(o.favicon=""),o},e.prototype.ks=function(){return h({action:"INIT",key:null,position:null,users:null,title:null,url:null,isCurrentPage:null},this.Ee&&{favicon:null})},e.prototype.$s=function(t){for(var n=this.get(t),i=[],e=0;e<n.length;e++)i.push(h({action:"LEAVE",key:n[e].key,position:null,users:null,title:null,url:null,isCurrentPage:null},this.Ee&&{favicon:null}));return this.xu[t]={map:{},buffer:{}},i},e.prototype.snapshot=function(t){for(var n=this.get(t),i=[],e=0;e<n.length;e++)i.push(h({action:"ENTER"},n[e]));return i},i.default=e},{1:1,2:2,35:35,41:41}],28:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var r=t(35),s=t(2),o=t(41),u=t(2),e=t(38);function a(){this.gu=new e.default(!0,1e4,"tm"),this.Hu={}}a.ei=function(){return a.ri=a.ri?a.ri:new a},a.prototype.init=function(t){this.Qr=t,this.Hu={},r.default(s.Z,"Initialized typing")},a.prototype.get=function(){var n=this;return Object.keys(this.Hu).map(function(t){return n.Hu[t]})},a.prototype.As=function(t){var n=this,t=o.Ps(t.getValue,t),i=t(u.default.st),e=t(u.default.rt);switch(r.default(s.Z,"Typing handle "+i+" "+e,this.gu.Nu()),i){case u.default.ot:return this.gu.add(function(t){return n.Qr(e)}).then(function(t){return r.default(s.Z,"Adding "+e+" to typing"),n.Hu[e]=t}).then(function(t){return{action:"START",user:t}});case u.default.ut:return this.gu.add(function(t){return n.Qr(e)}).then(function(t){return r.default(s.Z,"Deleting "+e+" from typing"),delete n.Hu[e],t}).then(function(t){return{action:"STOP",user:t}});default:return Promise.reject("Unsupported typing command")}},a.prototype.$s=function(){var r=this;this.gu.Xs();return this.gu.add(function(t){return Promise.resolve((()=>{for(var t=[],n=0,i=r.get();n<i.length;n++){var e=i[n];t.push({action:"STOP",user:e})}return r.Hu={},t})())})},a.prototype.snapshot=function(){for(var t=[],n=0,i=this.get();n<i.length;n++){var e=i[n];t.push({action:"START",user:e})}return t},a.prototype.Xs=function(){this.gu.Xs()},i.default=a},{2:2,35:35,38:38,41:41}],29:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var r=t(35),s=t(2);function o(){}o.Ju=function(t){var i={},t=t.getAllResponseHeaders();return t&&t.trim().split(/[\r\n]+/).forEach(function(t){var t=t.split(": "),n=t.shift(),t=t.join(": ");i[n]=t}),i},o.nn=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status||304===i.status?t({responseText:i.responseText,Xt:o.Ju(i)}):n(o.Vu(i.status,i.statusText)))},i.ontimeout=function(){n(o.Vu(408,"client timeout"))},i.open("GET",e,!0),i.timeout=6e4,i.send(),r.default(s.Z,"GET: "+e)})},o.Vu=function(t,n){return{statusCode:t,statusText:n}},i.default=o},{2:2,35:35}],30:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(35),r=t(2),s=t(1),o=t(18),u=t(3),a=t(41);function c(t,n){var i=this;this.Wu=void 0,this.Bu=!1,this.qu=!0,this.Yu=function(t){"DISCONNECTED"!==t||i.ee.ie()||i.Xo()||2===o.default.state.ar||i.zu(void 0!==i.Wu)},this.Ku=t,this.ee=n,this.Ku.subscribe(u.Ft.PageHiding,this.reduce.bind(this)),this.Ku.subscribe(u.Ft.PageShowing,this.reset.bind(this)),this.Ku.subscribe(u.Ft.ConnectionStatus,function(t){i.qu="DISCONNECTED"===t})}c.prototype.init=function(t,n){this.Xu=t,this.$u=n},c.prototype.Xo=function(){return this.Bu},c.prototype.$o=function(){this.Xo()&&(this.Bu=!1,this.Qu())},c.prototype.Qu=function(){var n=this;e.default(r.Z,"startListening"),this.Ku.subscribe(u.Ft.ConnectionStatus,this.Yu),this.Wu=window.setTimeout(function(t){n.zu(void 0!==n.Wu)},s.default.j)},c.prototype.Zu=function(){e.default(r.Z,"stopListening"),clearTimeout(this.Wu),this.Wu=void 0,this.Ku.unsubscribe(u.Ft.ConnectionStatus,this.Yu)},c.prototype.zu=function(t){e.default(r.Z,"fire",t),this.Bu=!0,a.ue(this.Xu)&&this.Xu(),t&&this.Zu()},c.prototype.reduce=function(){this.Bu=!1,this.qu?this.Yu("DISCONNECTED"):this.Qu()},c.prototype.reset=function(){this.Xo()?(this.Bu=!1,a.ue(this.$u)&&this.$u()):this.Zu()},i.default=c},{1:1,18:18,2:2,3:3,35:35,41:41}],31:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(35),r=t(2),s=t(1),o=t(3);function u(t,n){var i=this;this.ta=function(t){"DISCONNECTED"===t?i.set():i.reset()},this.Ku=t,this.na=n}u.prototype.qs=function(){e.default(r.Z,"activated"),this.Ku.subscribe(o.Ft.ConnectionStatus,this.ta)},u.prototype.Ks=function(){e.default(r.Z,"deactivated"),this.reset(),this.Ku.unsubscribe(o.Ft.ConnectionStatus,this.ta)},u.prototype.set=function(){this.ia||(this.ia=window.setTimeout(this.na,s.default.F))},u.prototype.reset=function(){this.ia&&(clearTimeout(this.ia),this.ia=null)},i.default=u},{1:1,2:2,3:3,35:35}],32:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var h=t(41),l=t(2),f=t(1),e=t(39),a=t(13),c=t(34),r=t(43),s=t(44),d=t(35),v=t(2);function o(){}o.ei=function(){return o.ri=o.ri?o.ri:new o},o.prototype.init=function(){var n=this;return this.ea().then(function(t){return n.context=t}).catch(function(t){throw new r.default(s.qt.TECHNICAL_PROBLEM,"Invalid location")})},o.prototype.update=function(t,n){d.default(v.Z,"Update context",t=void 0===t?null:t,n=void 0===n?null:n);var i=this.ra();return this.context&&i===this.context.sa?(t&&(this.context.Yt=t,this.context.Os=this.context.Yt+this.context.de,this.context.Ss=this.context.Yt+"/"),n&&(this.context.ve=n,this.context.gs=n+"/")):this.context=this.oa(i,t,n),this.context},o.prototype.Gu=function(t){return this.context.Yt+this.context.de===t},o.prototype.ea=function(){var e=this,r=this.ra();return new Promise(function(n,i){r?void 0===f.default.P.file_name?e.ua(r).then(function(t){return e.oa(r)}).then(function(t){/\.googleusercontent\.com$/.test(t.Yt)?(d.default(v.K,"Now4real is not compatible with the site: "+t.Yt),i("Invalid site")):n(t)}).catch(function(t){i(t)}):n(e.oa(r)):i("Invalid referrer")})},o.prototype.oa=function(t,n,i){d.default(v.Z,"Creating context",t,n=void 0===n?null:n,i=void 0===i?null:i);var e=this.aa(t),n=n||this.oo(t),i=i||null,r=void 0===f.default.P.file_name?this.ca(t,!1):null,s=this.uo(),o=!!r&&r.endsWith(l.default.It);return{sa:t,Yt:n,de:e,ve:i,Os:n+e,Ss:n+"/",gs:i?i+"/":null,Ti:r,zt:s,Kt:o}},o.prototype.ra=function(){var t=document.customReferrer,t=t||f.default.P.location;return t},o.prototype.ha=function(t,n){var i,e;return(t=(n=void 0===n?!0:n)&&(t&&(n=h.Oe(t))&&(n.hostname.endsWith(l.default.It)?(e=t.match(/[^-]*-[^-]*-(.+)\.translate\.goog(.*)/))&&(t=n.protocol+"//"+e[1].replace(/-/g,".")+(e[2]||"/")):new RegExp("^"+l.default.lt+"$|^127(?:.[0-9]{1,3}){3}$").test(n.hostname)&&(e=n.pathname,i=n.search,n=n.hash,/file:\/\//i.test(e)&&(e="/"+e.split("/").pop()),t=l.default.ht+"://"+f.default.R+e+i+n)),void 0!==(e=f.default.P.file_name))?l.default.ht+"://"+f.default.R+"/"+e:t)?(d.default(v.Z,"Computed referrer: "+t),t):(d.default(v.K,"Empty referrer"),null)},o.prototype.aa=function(t){var n,i,e,r,s,o,u,a,t=this.ha(t),c=f.default.S.page_context;return null!=c?(a=void 0,a=h.so(c)?c.startsWith(l.default.Nt)?c:l.default.Nt+c:(i=n="",e=c.query,c=c.fragment,r=h.Oe(t),e&&r.search&&(s=new URLSearchParams(r.search),h.Co(e)?(s.sort(),n=s.toString()):h.isArray(e)?(o=new URLSearchParams,e.forEach(function(n){var t=s.getAll(n);t.length&&t.forEach(function(t){o.append(n,t)})}),o.sort(),n=o.toString()):h.la(e)&&(u=new URLSearchParams,s.forEach(function(t,n){e.test(n)&&u.append(n,t)}),u.sort(),n=u.toString()),n=n&&"?"+(n=n.replace(/=$|=(?=&)/g,""))),c&&r.hash&&(i=r.hash),r.pathname+n+i),d.default(v.Z,"Custom Page Context: "+a),a):(c=h.Oe(t).pathname,d.default(v.Z,"Retrieved Page Context: "+c),this.fa(c))},o.prototype.oo=function(t){t=this.ha(t),t=h.Oe(t).host;return d.default(v.Z,"Retrieved Site Context: "+t),t.toLowerCase()},o.prototype.ca=function(t,n){t=h.Oe(this.ha(t,n)),n=t.origin;return d.default(v.Z,"Retrieved parent origin: "+n,t),n},o.prototype.ua=function(t){var s=h.Oe(t).origin,o=h.Oi(16),u=window.parent;return e.timeout(f.default.G,new Promise(function(i,e){function r(t){var n=t.data;t.source===u&&t.origin===s&&"verify"===n.cmd&&(d.default(v.Z,"Origin verification event",t),n.payload.id===o?(c.default.removeEventListener(window,"message",r),i(s)):e("Invalid verification"))}c.default.addEventListener(window,"message",r),u.postMessage(new a.Ai({id:o}),s),d.default(v.Z,"Started origin verification",t,s,o)}))},o.prototype.uo=function(){var t=window.n4rConfig,n=-1<window.location.host.indexOf("localhost"),i="file:"===window.location.protocol,e=-1<window.location.host.indexOf("cdn");return i||t&&n?"http://localhost:3000":e||!t&&n?window.location.origin:"https://cdn.now4real.com"},o.prototype.fa=function(t){return h.so(t)?/\/([Hh]ome|[Ii]ndex|[Dd]efault)(\.\w+)?/.test(t)?t.substring(0,t.length-t.split("/").pop().length):t:null},i.default=o},{1:1,13:13,2:2,34:34,35:35,39:39,41:41,43:43,44:44}],33:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.decode=i.da=void 0;var e=t(41);function r(t){return t.replace(/-/g,"+").replace(/_/g,"/")}function s(t){return decodeURIComponent(atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}i.da=function(t){return!!t&&e.so(t)&&/^[^\.\s]+\.[^\.\s]+\.[^\.\s]*$/.test(t)},i.decode=function(t){return(t=t.split("."))?{va:JSON.parse(s(r(t[0]))),payload:JSON.parse(s(r(t[1]))),signature:t[2]||null}:null}},{41:41}],34:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var o=t(1),u=t(21),e=t(41),r=t(10),a=t(7),c=t(35),h=t(2),t=(s.prototype.init=function(t,n,i){this.wa=n,this.zt=i,c.default(h.Z,"Origins: our -> "+i+", integrator -> "+n),this.ma=t,this.pa()},s.prototype.reset=function(){c.default(h.Z,"Listeners resetted"),this.removeEventListener(window,"message",this.ba)},s.prototype.pa=function(){if(!r.test(1))throw new Error("Message API not supported!");this.addEventListener(window,"message",this.ba)},s.prototype.addEventListener=function(t,n,i){document.addEventListener&&t.addEventListener(n,i,!1)},s.prototype.removeEventListener=function(t,n,i){document.removeEventListener&&t.removeEventListener(n,i,!1)},s.prototype.Ea=function(t,n){return(n=void 0===n?!1:n)?void 0!==o.default.P.file_name||t===this.wa:t===this.zt},s.prototype.ga=function(t){return e.Tn(t)&&"cmd"in t&&"payload"in t&&"PROXY"===t.iss},s.prototype.Sa=function(t){return e.Tn(t)&&"cmd"in t&&"getStoredEmail"===t.cmd},s);function s(){var s=this;this.ba=function(t){var n,i,e=t.data,r=t.origin||t.originalEvent.origin;s.Ea(r,!0)&&s.ga(e)?(c.default(h.Z,"Proxy message received"),s.ma.Pr(e.id,e.cmd,e.payload)):s.Ea(r)&&s.Sa(e)&&(e=e.siteKey,i=void c.default(h.Z,"Get email message received",e),e&&(null==(n=a.default.Fe)?void 0:n.fu())==="n4rAuth@"+e?i=a.default.Fe.getItem(o.default.q):e||(i=u.default.getUser()),i)&&i.email&&t.source.postMessage({email:i.email},r)}}i.default=new t},{1:1,10:10,2:2,21:21,35:35,41:41,7:7}],35:[function(t,n,i){var s=this&&this.__spreadArrays||function(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var e=Array(t),r=0,n=0;n<i;n++)for(var s=arguments[n],o=0,u=s.length;o<u;o++,r++)e[r]=s[o];return e},o=(Object.defineProperty(i,"t",{value:!0}),t(1)),u=t(3);function a(t,n){return n.length>=t?n:n+new Array(t-n.length+1).join(" ")}var c="[NOW4REAL-"+a(o.default.p,o.default.i)+"]";i.default=function(t,n){for(var i=[],e=2;e<arguments.length;e++)i[e-2]=arguments[e];var r=o.default.o;window.console&&r!==u.u.Off&&r<=t&&(r=t!==u.u.Error&&t!==u.u.Warn||void 0===console.error?"log":"error",t=a(o.default.h,u.u[t]),t=c+" "+t+" | "+n,0!==i.length?console[r].apply(console,s([t],i)):console[r](t))}},{1:1,3:3}],36:[function(e,t,u){!function(i){!function(){Object.defineProperty(u,"t",{value:!0});var f=e(43),d=e(44),v=e(3),w=e(41),r=e(33),a=e(2),m=e(7),S=e(1),p=e(21),s=e(22),b=e(13),E=e(39),n=e(10),g=e(4),o=e(34),c="undefined"!=typeof window?window.LS:void 0!==i?i.LS:null,O=e(35),P=e(2),T=/^CONNECTED:(?!STREAM-SENSING)/;function t(){this.Oa=!1,this.Pa=!1,this.Ta=!1,this.Ca=null}t.ei=function(){return t.ri=t.ri?t.ri:new t},t.prototype.init=function(t,n,i,e,r,s,o){var u=this,t=(this.version=t,this.be=n,this.Na=i,this.Ee=r,this.Be=s,this.we=o,this._a=w.Da(S.default.P.env_subdom),p.default.cu()||this._a),n=w.Oe(this._a).protocol,i=(this.ya=n,O.default(P.Z,"felsEndpoint",t,n),new c.LightstreamerClient(t,S.default._)),r=i.connectionOptions,s=(r.setReverseHeartbeatInterval(3e4),r.setSessionRecoveryTimeout(2e3),r.setRetryDelay(4e3),r.setCookieHandlingRequired(!0),e&&(O.default(P.Z,"DEMO"),i.connectionDetails.setAdapterSet("DEMO")),{onStatusChange:function(t){var n=t.startsWith(a.default.ft+":")||t===a.default.vt&&"CONNECTED"===u.Ia,n=(O.default(P.$,t),n?"CONNECTED":"DISCONNECTED");u.Ia!==n&&(u.Ra&&w.ue(u.Ra.Ir)&&u.Ra.Ir(n),u.Ia=n),T.test(t)?u.Aa():t===a.default.dt&&u.Ma()},onPropertyChange:function(t){var n;"sessionId"===t?(n=u.Fr.getSessionId(),!u.sessionId&&n&&(u.sessionId=n,u.Fr.setUser(u.Ua())),O.default(P.$,t+": "+n)):-1<["user","password"].indexOf(t)&&O.default(P.Z,"Changed "+t+" property")},onServerError:function(t,n){var i,e;if(u.Oa&&(O.default(P.K,"onServerError event",t,n),u.Ra))switch(t){case v.Jt.UnsupportedClient:null!=(i=u.Ra)&&i.kr();break;case v.Jt.AuthenticationExpired:u.Pa||(u.mode===v.Gt.JWT?m.default.rn?E.timeout(S.default.H,m.default.sn.send(new b.Ii)).then(function(t){O.default(P.Z,"obtained new JWT 2",t),u.ka(t)}).catch(function(t){O.default(P.K,t.message),null!=(t=u.Ra)&&t.Rr()}):null!=(i=u.Ra)&&i.Rr():u.mode!==v.Gt.SOCIAL&&u.mode!==v.Gt.EMAIL||null!=(i=u.Ra)&&i.Lr());break;case v.Ht.WrongCredentials:case v.Jt.Unauthorized:u.xa(w.La(t,n).reason);break;case v.Jt.TemporarilyUnavailable:u.Pa||(e=(i=w.La(t,n)).redirect,i.siteConf?u.xa(a.default.Lt):u.Ma(e));break;case v.Ht.AllowedSessionCountReached:case v.Ht.SessionCountLimitReached:case v.Ht.ServerTooBusy:case v.Ht.ServerBlocked:u.Pa||u.Ma()}}});return i.addListener(s),this.Qe=i,this.Fr=i.connectionDetails,i},t.prototype.yr=function(t){this.Ra=t},t.prototype.qe=function(){this.Ta=!0,this.Aa()},t.prototype.Ne=function(t){t&&(this.perms=t,this.Fr)&&this.Fr.getUser()&&this.Fr.setUser(this.Ua())},t.prototype.sr=function(){var e,r=this;return new Promise(function(n,i){r.ja().then(function(n){var t=S.default.P.no_initial_config,i=r.be.get().conf;if(t&&i){if(r.Fa(i))throw new f.default(d.qt.RELOAD_REQUIRED,JSON.stringify(r.be.en()));if(r.Ga(i))return r.Ha(i).then(function(t){var n;O.default(P.Z,"fixing config",t),null!=(n=r.Ra)&&n.jr(t)}).then(function(t){return n})}return n}).then(function(t){var n=t.Ja,t=t.Va,i=(e=n,r.be.get().auth),i=!r.Ee&&(n===v.Gt.JWT&&1!==i||n!==v.Gt.JWT&&1===i);return O.default(P.Z,"First connection",n,t,i),r.connect(n,t,i)}).then(function(t){r.Oa=!0,r.Wa=r.be.get().auth,n(t)}).catch(function(t){e!==v.Gt.READ_ONLY&&e!==v.Gt.N4R&&r.Ba(t)?r.Je().then(function(t){r.Oa=!0,r.Wa=r.be.get().auth,n(r.mode)}).catch(function(t){i(t)}):r.qa(t)?i(new f.default(d.qt.ACCESS_DENIED,t.message)):i(t)})})},t.prototype.ja=function(){var e=this;return new Promise(function(n,i){e.Be&&m.default.rn?E.timeout(S.default.H,m.default.sn.send(new b.Ii)).then(function(t){O.default(P.Z,"obtained first JWT",t),e.Ca=m.default.Ya=t,n(e.za(t))}).catch(function(t){O.default(P.K,t.message),i(new f.default(d.qt.ACCESS_DENIED,t.message))}):n(e.za())})},t.prototype.He=function(e,r){var s=this;return new Promise(function(n,i){O.default(P.Z,"Switching to authenticated",e,r),s.Ne([]),s.disconnect().then(function(t){s.connect(e,r).then(function(t){n(r)}).catch(function(n){s.Ba(n)?s.connect(v.Gt.READ_ONLY).then(function(t){i(n)}).catch(function(t){i(t),s.qa(t)&&s.xa(a.default.Lt)}):(i(n),s.qa(n)&&s.xa(a.default.Lt))})})})},t.prototype.Je=function(){var e=this;return new Promise(function(n,i){O.default(P.Z,"Switching to unauthenticated"),e.Ne([]),e.disconnect().then(function(t){e.connect(v.Gt.READ_ONLY).then(function(t){n()}).catch(function(t){i(t),e.qa(t)&&e.xa(a.default.Lt)})})})},t.prototype.Gr=function(){this.Qe.disconnect()},t.prototype.Hr=function(){var t;n.wi()&&(t=p.default.cu(),this.Fr.setServerAddress(t||this._a)),this.Qe.connect()},t.prototype.za=function(t){var n,i=this.be.get(),e=i.auth,i=i.siteKey,r=3===e;return r=this.Ee?(n=v.Gt.N4R,S.default.P.n4r_jwt||null):this.Be?(n=v.Gt.JWT,t||S.default.S.custom_auth.jwt):2===e?(t=(m.default.Fe=new s.default(a.default.Dt+"@"+i)).getItem(S.default.W),n=v.Gt.NO_REGISTRATION,t?t.token:null):r?(e=(m.default.Fe=new s.default(a.default.Dt+"@"+i)).getItem(S.default.q),n=v.Gt.EMAIL,e||null):(n=(t=p.default.getUser())&&!this.we?v.Gt.SOCIAL:v.Gt.READ_ONLY,t&&!this.we?t:null),{Ja:n,Va:r}},t.prototype.Ba=function(t){return t.code===d.qt.ACCESS_DENIED},t.prototype.qa=function(t){return t.code===d.qt.MISMATCH},t.prototype.Ka=function(t,n,i){void 0===i&&(i=!1);t=t||"",n=n||{};return Object.keys(n).length||(n.site=this.Na,n["x-conf"]=S.default.S),i||(n.sitev=this.be.get().version),this.sessionId&&(n.sid=w.Xa(this.sessionId)),this.perms&&(n.perms=this.perms),[this.version,t,JSON.stringify(n,function(t,n){return!0===n?1:!1===n?0:null!==n?n:void 0})].join(a.default.Ct)},t.prototype.$a=function(t,n,i){var e;if(void 0===i&&(i=!1),t===v.Gt.JWT||t===v.Gt.N4R){var r=null,s=null;if(n){var o=w.Qa(n,".");if(!o||5!==o.length)throw new f.default(d.qt.ACCESS_DENIED,"Invalid JWT");s=o.pop(),r=o.join("")}o=this.Ka(r,null,i),r=s}else r=t===v.Gt.NO_REGISTRATION?(o=this.Ka(n,null,i),null):t===v.Gt.EMAIL?(o=this.Ka((e=n)?e.id:null,null,i),e?e.secret:null):t===v.Gt.SOCIAL?(o=this.Ka((e=n).id,null,i),e.secret):(o=this.Ka(null,null,i),null);return[o,r]},t.prototype.Ua=function(){var t=this.Fr.getUser().split(a.default.Ct),n=t[1],t=JSON.parse(t[2]);return this.Ka(n,t)},t.prototype.Ns=function(t){if(!this.Ca||!r.da(t))throw new Error("Invalid JWT or missing initial");var n=this.Ca,n=r.decode(n).payload,i=r.decode(t).payload,e=n.sub;if(e!==i.sub)throw new Error("'sub' claim changed. It should have been equal to: "+e);e=n.iss;if(e!==i.iss)throw new Error("'iss' claim changed. It should have been equal to: "+e);n=this.Fr.getUser().split(a.default.Ct),i=JSON.parse(n[2]),e=w.Qa(t,"."),n=e.pop(),e=e.join("");this.Fr.setUser(this.Ka(e,i)),this.Fr.setPassword(n),m.default.Ya=t},t.prototype.ka=function(t){this.Ns(t),null!=(t=m.default.on)&&t.Xo()||this.Qe.connect()},t.prototype.Aa=function(){var t;this.Ta&&(t=this.Fr.getServerInstanceAddress(),O.default(P.Z,"handleFelsSaving",t),t)&&t!==this._a&&(O.default(P.Z,"control link detected",t),S.default.A&&p.default.au(t),this.Fr.setServerAddress(t))},t.prototype.Ma=function(t){var n=this.Fr.getServerAddress(),i=this.Qe.getStatus(),e=m.default.on.Xo(),i=(O.default(P.Z,"handleFelsSwitch",t,n,i,e,this._a),i===a.default.DISCONNECTED);if(t||n!==this._a){O.default(P.Z,"switching"),p.default.hu(),this.Qe.disconnect();try{this.Fr.setServerAddress(t?this.ya+"//"+t+"/":this._a)}catch(t){O.default(P.K,t.message),this.Fr.setServerAddress(this._a)}i=!0}i&&!e&&(O.default(P.Z,"reconnecting"),this.Qe.connect())},t.prototype.Za=function(t){O.default(P.Z,"handleConfUpdate",t),this.be.update(JSON.stringify(t));var t=this.za(m.default.Ya),n=t.Ja,t=this.$a(n,t.Va),i=t[0],t=t[1];return this.Fr.setUser(i),this.Fr.setPassword(t),this.Qe.connect(),n},t.prototype.connect=function(c,s,o){var u,h=this,l=(void 0===o&&(o=!1),this.Pa=!0,c);return new Promise(function(n,i){function a(t){h.Pa=!1,h.Qe.removeListener(u),i(t)}u={onStatusChange:function(t){T.test(t)&&(h.mode=l,t=l,h.Pa=!1,h.Qe.removeListener(u),n(t))},onServerError:function(t,n){O.default(P.K,n,t);var i=w.La(t,n);switch(t){case v.Ht.WrongCredentials:l===v.Gt.SOCIAL?p.default.Qs():l===v.Gt.EMAIL&&(null!=(u=m.default.Fe)&&u.removeItem(S.default.q),null!=u)&&u.removeItem(S.default.Y),a(new f.default(d.qt.ACCESS_DENIED,i));break;case v.Jt.Unauthorized:a(new f.default(d.qt.ACCESS_DENIED,i));break;case v.Jt.AuthenticationExpired:c===v.Gt.JWT&&m.default.rn?E.timeout(S.default.H,m.default.sn.send(new b.Ii)).then(function(t){O.default(P.Z,"obtained new JWT 1",t),h.ka(t)}).catch(function(t){O.default(P.K,t.message),a(new f.default(d.qt.ACCESS_DENIED,i))}):a(new f.default(d.qt.ACCESS_DENIED,i));break;case v.Jt.UnsupportedClient:a(new f.default(d.qt.TECHNICAL_PROBLEM,"Unsupported client"));break;case v.Jt.UnsupportedBrowser:a(new f.default(d.qt.TECHNICAL_PROBLEM,"Unsupported browser"));break;case v.Jt.TemporarilyUnavailable:var e,r,s,o=i.siteConf,u=i.redirect;o?(e=o.s,r=o.a,s=o.c||{},e?!r&&(!h.Oa&&c===v.Gt.JWT||h.Oa&&r!==h.Wa&&c!==v.Gt.N4R)?a(new f.default(d.qt.MISMATCH,"This site requires social authentication")):1===r&&c!==v.Gt.JWT&&c!==v.Gt.N4R?a(new f.default(d.qt.MISMATCH,"This site requires JWT authentication")):2===r&&(!h.Oa&&c===v.Gt.JWT||h.Oa&&r!==h.Wa&&c!==v.Gt.N4R)?a(new f.default(d.qt.MISMATCH,"This site requires No Registration login")):3===r&&(!h.Oa&&c===v.Gt.JWT||h.Oa&&r!==h.Wa&&c!==v.Gt.N4R)?a(new f.default(d.qt.MISMATCH,"This site requires Email login")):!h.Oa&&h.Fa(s)?a(new f.default(d.qt.RELOAD_REQUIRED,JSON.stringify(o))):!h.Oa&&h.Ga(s)?h.Ha(s).then(function(t){var n;O.default(P.Z,"obtained new config",t),null!=(n=h.Ra)&&n.jr(t),l=h.Za(o)}).catch(function(t){O.default(P.Z,t),a(new f.default(d.qt.TECHNICAL_PROBLEM,"unable to refresh config"))}):l=h.Za(o):a(g.Bt)):h.Ma(u);break;case v.Ht.AllowedSessionCountReached:case v.Ht.SessionCountLimitReached:case v.Ht.ServerTooBusy:case v.Ht.ServerBlocked:h.Ma();break;default:a(new f.default(d.qt.TECHNICAL_PROBLEM,i))}}},h.Qe.addListener(u);try{var t=h.$a(c,s,o),e=t[0],r=t[1];h.Fr.setUser(e),h.Fr.setPassword(r),O.default(P.Z,c+" attempt",s,e,r),o=!1,h.Qe.connect()}catch(t){a(t)}})},t.prototype.disconnect=function(){var e=this;return new Promise(function(n){var i;e.Qe.getStatus()===a.default.DISCONNECTED?n():(i={onStatusChange:function(t){t===a.default.DISCONNECTED&&(e.Qe.removeListener(i),n())}},e.Qe.addListener(i),e.Qe.disconnect())})},t.prototype.xa=function(t){var n;switch(t){case a.default.Lt:null!=(n=this.Ra)&&n.Mr();break;case a.default.jt:null!=(n=this.Ra)&&n.Ur();break;default:this.mode===v.Gt.JWT&&null!=(n=this.Ra)&&n.Rr()}},t.prototype.Fa=function(t){var n,i,e,r,s,o,u,a,c,h,l,f,d,v,w,m,p,b,E,g;try{return O.default(P.Z,"requiresReload",t),this.Ee||top===self?!1:(u=S.default.T,a=S.default.S,c=u.target,h=a.target,l=null!=(n=t.target)?n:"widget",f=u.page_context,d=a.page_context,v=null!=(i=t.page_context)?i:null,w=u.param_overriding,m=a.param_overriding,p=null!=(e=t.param_overriding)&&e,b=null==(r=u.widget)?void 0:r.container,E=a.widget.container,g=null!=(o=null==(s=t.widget)?void 0:s.container)?o:null,void 0===c&&l!==h||void 0===f&&v!==d||void 0===w&&p!==m||void 0===b&&g!==E)}catch(t){return O.default(P.K,"requiresReload error",t),!1}},t.prototype.Ga=function(t){try{return O.default(P.Z,"requiresConfigUpdate",t),!this.Ee&&top!==self}catch(t){return O.default(P.K,"requiresConfigUpdate error",t),!1}},t.prototype.Ha=function(t){var s=window.parent;return E.timeout(S.default.G,new Promise(function(i,e){function r(t){var n=t.data;if(t.source===s&&"updateConfig"===n.cmd){O.default(P.Z,"Config update event",t),o.default.removeEventListener(window,"message",r);try{i(n.ih)}catch(t){e("Invalid config update")}}}o.default.addEventListener(window,"message",r),m.default.sn.send(new b.yi(t))}))},u.default=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,10:10,13:13,2:2,21:21,22:22,3:3,33:33,34:34,35:35,39:39,4:4,41:41,43:43,44:44,7:7}],37:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var o=t(3),r=t(41),u=t(39),a=t(2),c=t(1),h=t(43),l=t(44),f=t(35),d=t(2);function e(){}e.ei=function(){return e.ri=e.ri?e.ri:new e},e.prototype.init=function(t,n){this.Qe=t,this.getContext=n},e.prototype.Re=function(){return this.tc(o.Vt.GET_AUTH_INFO,{})},e.prototype.po=function(t){return this.tc(o.Vt.DELETE_PASSWORD,{password:t})},e.prototype.Oo=function(t,n){t={payload:t},n=n&&n.replyTo;return n&&(t.reply=n),this.tc(o.Vt.MESSAGE_SEND,t)},e.prototype.Po=function(t){return this.tc(o.Vt.MESSAGE_DELETE,{id:t})},e.prototype.To=function(){return this.tc(o.Vt.CHAT_FLUSH,{})},e.prototype.No=function(t){return this.tc(o.Vt.CHAT_ENABLE,{enable:t})},e.prototype._o=function(t){return this.tc(o.Vt.MUTE_USER_GET,{userId:t})},e.prototype.yo=function(t,n){return this.tc(o.Vt.MUTE_USER_SET,{userId:t,duration:n})},e.prototype.Io=function(t,n,i){t={id:t,reason:n};return i&&(t.comment=i),this.tc(o.Vt.REPORT_CHAT_MESSAGE,t)},e.prototype.Eu=function(t){return this.tc(o.Vt.USER_PREFERENCE_SET,{value:t})},e.prototype.nc=function(t){return this.tc(o.Vt.LOG,{msg:t})},e.prototype.Ro=function(){return this.tc(o.Vt.USER_CONSENT_SET,{})},e.prototype._s=function(t){return this.tc(o.Vt.JWT_REFRESH,{jwt:t},{ic:!0})},e.prototype.Mo=function(t,n,i){return this.tc(o.Vt.POLL_NEW,{question:t,options:n,maxVotes:i})},e.prototype.Uo=function(t){return this.tc(o.Vt.POLL_CLOSE,{remove:t})},e.prototype.xo=function(){return this.tc(o.Vt.POLL_VOTE_GET,{})},e.prototype.ko=function(t){return this.tc(o.Vt.POLL_VOTE_SET,{vote:t})},e.prototype.tc=function(t,n,i){var e=this.getContext(),e=c.default.S.scope===a.default.Tt&&-1<[o.Vt.MESSAGE_SEND,o.Vt.MESSAGE_DELETE,o.Vt.CHAT_FLUSH,o.Vt.CHAT_ENABLE,o.Vt.MUTE_USER_GET,o.Vt.MUTE_USER_SET,o.Vt.REPORT_CHAT_MESSAGE,o.Vt.USER_CONSENT_SET,o.Vt.POLL_NEW,o.Vt.POLL_CLOSE,o.Vt.POLL_VOTE_GET,o.Vt.POLL_VOTE_SET].indexOf(t)?a.default.Mt+"/":""+a.default.Ut+e.de,r=this.ec(e,o.Vt[t],n),s=(f.default(d.Z,"RPC ("+o.Vt[t]+")",r,i),(null!=i&&i.ic?this.rc:this.oc).bind(this));return null!=i&&i.retryOnAbort?u.retry(function(){return s(r)},{Qt:"message",Zt:["onAbort"],tn:5,delay:500}):s(r)},e.prototype.ec=function(t,n,i){return t+a.default.Ct+n+a.default.Ct+JSON.stringify(i)},e.prototype.oc=function(t){var r=this;return new Promise(function(i,e){r.Qe.sendMessage(t,"s",null,{onDeny:function(t,n,i){f.default(d.Z,"onDeny listener call",t,n,i),r.uc(n,i,e)},onProcessed:function(t,n){f.default(d.Z,"onProcessed listener call",t,n),r.ac(t,n,i,e)},onDiscarded:function(t){f.default(d.X,"onDiscarded listener call",t),e(new h.default(l.qt.TECHNICAL_PROBLEM,"onDiscarded"))},onError:function(t){f.default(d.K,"onError listener call",t),e(new h.default(l.qt.TECHNICAL_PROBLEM,"onError"))},onAbort:function(t,n){f.default(d.Z,"onAbort listener call",t,n),e(new h.default(l.qt.TECHNICAL_PROBLEM,"onAbort"))}},!0)})},e.prototype.rc=function(i){var e=this;return new Promise(function(t,n){try{e.Qe.sendMessage(i,"UNORDERED_MESSAGES",null,null,!1),t()}catch(t){n(new h.default(l.qt.TECHNICAL_PROBLEM,t.message))}})},e.prototype.uc=function(t,n,i){try{switch(t){case o.Jt.TemporarilyUnavailable:i(new h.default(l.qt.SERVICE_UNAVAILABLE,"the service is temporarily unavailable"));break;case o.Jt.Unauthorized:var e=r.La(t,n);i(new h.default(l.qt.NOT_AUTHORIZED,e));break;default:i(new h.default(l.qt.TECHNICAL_PROBLEM,t.toString()))}}catch(t){f.default(d.K,t),i(new h.default(l.qt.TECHNICAL_PROBLEM,"protocol mismatch"))}},e.prototype.ac=function(t,n,i,e){try{var r,s,o,u=n?JSON.parse(n):null;this.hc(t)?(r=u.publish,s=u.moderation,o=u.error,r?i(u):e(o||s)):(this.lc(t)||this.fc(t)||this.dc(t))&&(o=u.error)?e(o):i(u)}catch(t){f.default(d.K,t),e(new h.default(l.qt.TECHNICAL_PROBLEM,"protocol mismatch"))}},e.prototype.vc=function(t){return t.split(a.default.Ct)[1]},e.prototype.hc=function(t){return this.vc(t)===o.Vt[o.Vt.MESSAGE_SEND]},e.prototype.lc=function(t){return this.vc(t)===o.Vt[o.Vt.REPORT_CHAT_MESSAGE]},e.prototype.fc=function(t){return this.vc(t)===o.Vt[o.Vt.USER_PREFERENCE_SET]},e.prototype.dc=function(t){return[o.Vt[o.Vt.POLL_NEW],o.Vt[o.Vt.POLL_CLOSE],o.Vt[o.Vt.POLL_VOTE_GET],o.Vt[o.Vt.POLL_VOTE_SET]].includes(this.vc(t))},i.default=e},{1:1,2:2,3:3,35:35,39:39,41:41,43:43,44:44}],38:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(40),r=t(35),s=t(2),a="ABORT_RUNNING";function o(t,n,i){void 0===t&&(t=!1),void 0===n&&(n=1),this.wc=[],this.mc=0,this.bc=n,(this.Ec=t)&&(this.Sc=new e.default(i)),this.name=i||"",this.Oc=function(){}}o.prototype.next=function(){this.mc--,0<this.wc.length?this.wc.shift()():this.Oc()},o.prototype.add=function(o){var u=this;return new Promise(function(r,s){function t(){u.mc++;var n,i,e=!1;u.Ec&&(n=Date.now(),i=function(t){n<t&&(e=!0,s(new Error("Task aborted")),u.Sc.unsubscribe(a,i),u.next())},u.Sc.subscribe(a,i)),o().then(function(t){e||(r(t),u.Ec&&u.Sc.unsubscribe(a,i),u.next())},function(t){e||(s(t),u.Ec&&u.Sc.unsubscribe(a,i),u.next())})}u.mc<u.bc?t():u.wc.push(t)})},o.prototype.Xs=function(){this.Ec&&(r.default(s.Z,"abortRunning",this.Sc.Pc(a),this.name),this.Sc.publish(a,Date.now()))},o.prototype.Nu=function(){return this.mc},i.default=o},{2:2,35:35,40:40}],39:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.timeout=i.retry=i.pause=void 0;var h=t(35),l=t(2);function f(n){return new Promise(function(t){return setTimeout(t,n)})}i.pause=f,i.retry=function e(r,s){var o=s.Qt||"code",u=s.Zt||"*",a=s.tn||3,c=s.delay||1e3;return r().catch(function(t){var n,i=t[o];return 1<a&&i&&(-1<u.indexOf(i)||"*"===u)?(h.default(l.Z,"Retry "+r+", remaining attempts: "+(n=a-1)+", code: "+i),s.tn=n,f(c).then(function(){return e(r,s)})):Promise.reject(t)})},i.timeout=function(i,t){var e,n=new Promise(function(t,n){e=setTimeout(function(){n(new Error("Timeout after "+i+" ms"))},i)});return Promise.race([t,n]).then(function(t){return clearTimeout(e),t})}},{2:2,35:35}],40:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e={}.hasOwnProperty,s=t(35),o=t(2);function r(t){this.Tc={},this.name=t||""}r.prototype.subscribe=function(t,n){var i;s.default(o.Z,"PubSub subscribe",t,this.name,null==(i=this.Tc[t])?void 0:i.length),e.call(this.Tc,t)||(this.Tc[t]=[]),this.Tc[t].push(n)},r.prototype.unsubscribe=function(t,n){var i,e=null==(i=this.Tc[t])?void 0:i.length;if(e){s.default(o.Z,"PubSub unsubscribe",t,this.name,e);for(var r=0;r<e;r++)if(this.Tc[t][r]===n){this.Tc[t].splice(r,1),1===e&&delete this.Tc[t];break}}},r.prototype.Au=function(t){delete this.Tc[t]},r.prototype.publish=function(t,n){e.call(this.Tc,t)&&this.Tc[t].forEach(function(t){t(void 0!==n?n:{})})},r.prototype.Pc=function(t){return this.Tc[t]?this.Tc[t].length:null},i.default=r},{2:2,35:35}],41:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.Cs=i.ku=i.Ts=i.bo=i.Ds=i.Us=i.Qa=i.getTime=i.Oi=i.La=i.Ps=i.ro=i.bn=i.la=i.so=i.Do=i.isArray=i.Co=i.ue=i.Tn=i.eo=i.ys=i.zr=i.Xa=i.So=i.Wo=i.Da=i.dr=i.wr=i.vr=i.hr=i.Oe=i.Cc=i.Nc=void 0;var r=t(35),s=t(2),o=t(1),u=t(2);function a(t,n){return n?n===u.default.ct&&t.endsWith(":80")||"https"===n&&t.endsWith(":443"):(r.default(s.K,"Undefined protocol"),!1)}function c(t){return t.replace(/\:[0-9]{1,4}(.*)/,"$1")}function h(t){return("0"+t.toString(16)).substr(-2)}i.Nc=a,i.Cc=c,i.Oe=function(t){var n,i,e,r,s,o,u;if(t)return(n=document.createElement("a")).href=t,t=n.port,e=n.hostname,r=n.pathname,s=n.search,o=n.hash,u=n.origin,a(i=n.host,(n=n.protocol).slice(0,-1))&&(i=c(i)),{protocol:n,host:i,hostname:e,port:t,pathname:r=r.startsWith("/")?r:"/"+r,origin:u=u||n+"//"+i,search:s,hash:o};throw new Error("Empty URL")},i.hr=function(){return decodeURIComponent(location.hash.substring(1))},i.vr=function(t){var n=["cdn.",""!==t?t+".":t,"now4real.com"].join("");return r.default(s.Z,"Computed cdn hostname for "+t+" env: "+n),u.default.ht+"://"+n},i.wr=function(t){return this.vr(t)+"/user-app/"},i.dr=function(t){var n=["api.",""!==t?t+".":t,"now4real.com"].join("");return r.default(s.Z,"Computed api gateway hostname for "+t+" env: "+n),u.default.ht+"://"+n+":443"},i.Da=function(t){if(void 0===t)throw new Error("env err: "+t);"staging"===t||""===t?(e=o.default.C,i=["fels.",""!==t?t+".":t,"now4real.com"].join(""),n=o.default.N):"devops"===t?(e="http",i="fels.localtest.me",n="4000"):"ci-devops"===t&&(e=u.default.ct,i="n4r-fels.now4real-client-integration-test.svc.cluster.local",n="80");var n,i,e=e+"://"+i+":"+n+"/";return r.default(s.Z,"Computed fels for "+t+" env: "+e),e},i.Wo=function(t){return null==t||void 0===t.closed},i.So=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},i.Xa=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},i.zr=function(t){Promise.resolve().then(function(){t()})},i.ys=function(t,n,i){return t={id:t.id,name:t.nick,pic:t.icon,provider:t.provider},n&&(t.role=n),i&&(t.badge=i),t},i.eo=function(t,n,i,e,r){return(t=this.ys(t,i,e)).consentGiven=n,r&&(t.preferences=r),t},i.Tn=function(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)},i.ue=function(t){return"function"==typeof t},i.Co=function(t){return"boolean"==typeof t},i.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.Do=function(t){return"number"==typeof t||"object"==typeof t&&t.constructor===Number},i.so=function(t){return"string"==typeof t},i.la=function(t){return t instanceof RegExp},i.bn=function(t){return JSON.parse(JSON.stringify(t))},i.ro=function(t,n){return JSON.stringify(t)===JSON.stringify(n)},i.Ps=function(t,n){return t.bind(n)},i.La=function(t,n){return 0<t?n:JSON.parse(n)},i.Oi=function(t){var n;if(void 0===t&&(t=8),window.crypto&&window.crypto.getRandomValues&&Uint8Array)return n=new Uint8Array((t||40)/2),window.crypto.getRandomValues(n),Array.prototype.slice.call(n).map(h).join("");for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",r=0;r<t;r++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},i.getTime=function(){return(new Date).getTime()},i.Qa=function(t,n){for(var i=t.split(n),e=i.length;1<e--;)i.splice(e,0,n);return i},i.Us=function(t){if(!t||!/^\d+(W|D|h|m)$/.test(t))throw new Error("Invalid duration");var n;switch((t=t.split("")).pop()){case"W":n="WEEKS";break;case"D":n="DAYS";break;case"h":n="HOURS";break;case"m":n="MINUTES"}return{value:Number(t.join("")),unit:n}},i.Ds=function(t,n,i,e){var r=null;switch(t){case"M":r=u.default.Rt;break;case"G":r=u.default.At}return{role:r,badge:null!==n&&i&&e?{label:n,textColor:"#"+i,backgroundColor:"#"+e}:null}},i.bo=function(t,n){var t=t.snapshot,i=null;return n?n===u.default.Rt?i=t.messageMaxLengthModerator:n===u.default.At&&(i=t.messageMaxLengthGuest):i=t.messageMaxLength,null!==i?i:o.default.M},i.Ts=function(t){return t=atob(t),Array.from(t).map(function(t){return t.charCodeAt(0)})},i.ku=function(t,n){var i,t=null==t?void 0:t.match(/.{2}/g),e=null==n?void 0:n.split(""),r={};return t&&e&&(i=0,t.forEach(function(t,n){n=e[n].charCodeAt(0)-32;i+=r[t]=n=0===n?.5:n}),Object.keys(r).forEach(function(t){r[t]=r[t]/i})),r},i.Cs=function(t){return t?parseInt(t,16):null}},{1:1,2:2,35:35}],42:[function(t,n,i){Object.defineProperty(i,"t",{value:!0});var e=t(10),r=t(1),s=t(35),o=t(2);function u(t){var n=this;if(this._c=null,this.gr=null,this.Sr=null,this.Or=null,this.visible=null,this.Dc=null,this.yc=null,this.Ic=function(){s.default(o.Z,"visibilityChangeHandler"),n.visible=n.ie(),n.visible||localStorage.setItem("visibilityChangeHandler","Visibility changed: "+document.hidden+", "+new Date),n.yc||n.Rc()},this.Ac=function(t){s.default(o.Z,"pagehideHandler"),t.persisted||(null!=(t=n.Or)&&t.call(n),localStorage.setItem("pagehideHandler",""+new Date))},!e.test(2))throw new Error("Visibility API not supported!");t.gr&&(this.gr=t.gr),t.Sr&&(this.Sr=t.Sr),t.Or&&(this.Or=t.Or),this._c=e.pi(),this.visible=this.Dc=this.ie(),document.addEventListener(this._c.visibilityChange,this.Ic),window.addEventListener("pagehide",this.Ac)}u.prototype.Rc=function(){var n=this,t=this.Mc(this.visible);this.yc=t?setTimeout(function(t){n.Rc()},r.default.J):null},u.prototype.Mc=function(t){var n;return t!==this.Dc&&(s.default(o.Z,"notify",t,this.Dc,this.yc),t?null!=(n=this.Sr)&&n.call(this):null!=(n=this.gr)&&n.call(this),this.Dc=t,!0)},u.prototype.reset=function(){document.removeEventListener(this._c.visibilityChange,this.Ic),window.removeEventListener("pagehide",this.Ac)},u.prototype.ie=function(){return!document[this._c.hidden]},i.default=u},{1:1,10:10,2:2,35:35}],43:[function(t,n,i){function e(t,n){this.code=t,this.message=n}Object.defineProperty(i,"t",{value:!0}),e.prototype.toString=function(){return this.code+" - "+this.message},i.default=e},{}],44:[function(t,n,i){var e;Object.defineProperty(i,"t",{value:!0}),i.ni=i.qt=void 0,(e=i.qt||(i.qt={})).ABORTED="ABORTED",e.ACCESS_DENIED="ACCESS_DENIED",e.ALREADY_PRESENT="ALREADY_PRESENT",e.ALREADY_REPORTED="ALREADY_REPORTED",e.ALREADY_STARTED="ALREADY_STARTED",e.BLOCKED="BLOCKED",e.CANNOT_MODERATE="CANNOT_MODERATE",e.CHAT_DISABLED="CHAT_DISABLED",e.CLOSED="CLOSED",e.CREDIT_EXHAUSTED="CREDIT_EXHAUSTED",e.CURRENTLY_DISABLED="CURRENTLY_DISABLED",e.DISCONNECTED="DISCONNECTED",e.INVALID_ARGUMENTS="INVALID_ARGUMENTS",e.INVALID_CALL="INVALID_CALL",e.MISMATCH="MISMATCH",e.NOT_AUTHENTICATED="NOT_AUTHENTICATED",e.NOT_AUTHORIZED="NOT_AUTHORIZED",e.NOT_FOUND="NOT_FOUND",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.RELOAD_REQUIRED="RELOAD_REQUIRED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TECHNICAL_PROBLEM="TECHNICAL_PROBLEM",e.TOO_FREQUENT="TOO_FREQUENT",e.USER_MUTED="USER_MUTED",e.CHATBOT="CHATBOT",(e=i.ni||(i.ni={})).AUTHORIZATION="AUTHORIZATION",e.CONNECTION_STATUS="CONNECTION_STATUS",e.COUNTER_CHAT_MESSAGES="COUNTER_CHAT_MESSAGES",e.COUNTER_CHAT_TYPING="COUNTER_CHAT_TYPING",e.COUNTER_PAGE_CHATTERS="COUNTER_PAGE_CHATTERS",e.COUNTER_PAGE_VIEWERS="COUNTER_PAGE_VIEWERS",e.COUNTER_SITE_CHATTERS="COUNTER_SITE_CHATTERS",e.COUNTER_SITE_VIEWERS="COUNTER_SITE_VIEWERS",e.HEATMAP_PAGE_VIEWERS="HEATMAP_PAGE_VIEWERS",e.HEATMAP_SITE_VIEWERS="HEATMAP_SITE_VIEWERS",e.LIST_CHAT_MESSAGES="LIST_CHAT_MESSAGES",e.LIST_CHAT_TYPING="LIST_CHAT_TYPING",e.LOGIN_STATUS="LOGIN_STATUS",e.PARAMETERS="PARAMETERS",e.POLL="POLL",e.POLL_STATUS="POLL_STATUS",e.RANKING_PAGE_CHATTERS="RANKING_PAGE_CHATTERS",e.RANKING_PAGE_VIEWERS="RANKING_PAGE_VIEWERS"},{}],45:[function(t,n,i){Object.defineProperty(i,"t",{value:!0}),i.wr=i.lr=void 0,i.lr=function(t,n){var i,e,r,s=(t=JSON.parse(t)).config.page_context;return(s=s&&s.query)&&("string"==typeof(r=s)||r instanceof String)&&(i=r=void 0,r=(e=s.match(/.*\/([igmsuy]+)$/))?(i=e[1],s.slice(1,-(i.length+1))):(i="",s.slice(1,-1)),t.config.page_context.query=new RegExp(r,i)),n&&"fn"===(null==(e=t.config.custom_auth)?void 0:e.jwt)&&(t.config.custom_auth.jwt=n.custom_auth.jwt),t},i.wr=function(t,n,i){var e=t+"#/"+n;return["site","lang","action","userId","siteKey","provider","wl","cm","bgColor","logo"].forEach(function(t,n){null!=i&&i[t]&&(e+=(n?"&":"?")+t+"="+encodeURIComponent(i[t]))}),e}},{}]},{},[16]);